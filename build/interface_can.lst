ARM GAS  /tmp/cchSd3uo.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 2
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 2
  13              		.file	"interface_can.cpp"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text._ZN9ODriveCANC2ERNS_8Config_tEP19FDCAN_HandleTypeDef,"ax",%progbits
  18              		.align	1
  19              		.p2align 2,,3
  20              		.global	_ZN9ODriveCANC2ERNS_8Config_tEP19FDCAN_HandleTypeDef
  21              		.arch armv7e-m
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  25              		.fpu fpv4-sp-d16
  27              	_ZN9ODriveCANC2ERNS_8Config_tEP19FDCAN_HandleTypeDef:
  28              	.LVL0:
  29              	.LFB5609:
  30              		.file 1 "Src/interface_can.cpp"
   1:Src/interface_can.cpp **** #include "interface_can.hpp"
   2:Src/interface_can.cpp **** 
   3:Src/interface_can.cpp **** #include "crc.hpp"
   4:Src/interface_can.cpp **** #include "freertos_vars.h"
   5:Src/interface_can.cpp **** #include "utils.hpp"
   6:Src/interface_can.cpp **** 
   7:Src/interface_can.cpp **** #include <cmsis_os.h>
   8:Src/interface_can.cpp **** #include "stm32g4xx_hal.h"
   9:Src/interface_can.cpp **** 
  10:Src/interface_can.cpp **** // Specific CAN Protocols
  11:Src/interface_can.cpp **** #include "can_encos.hpp"
  12:Src/interface_can.cpp **** #include "stm32g4xx_hal_fdcan.h"  // Include FDCAN header
  13:Src/interface_can.cpp **** #include "axis.hpp"
  14:Src/interface_can.cpp **** 
  15:Src/interface_can.cpp **** 
  16:Src/interface_can.cpp **** // Safer context handling via maps instead of arrays
  17:Src/interface_can.cpp **** // #include <unordered_map>
  18:Src/interface_can.cpp **** // std::unordered_map<CAN_HandleTypeDef *, ODriveCAN *> ctxMap;
  19:Src/interface_can.cpp **** 
  20:Src/interface_can.cpp **** // Constructor is called by communication.cpp and the handle is assigned appropriately
  21:Src/interface_can.cpp **** ODriveCAN::ODriveCAN(ODriveCAN::Config_t &config, FDCAN_HandleTypeDef *handle)
  31              		.loc 1 21 1 view -0
  32              		.cfi_startproc
  33              		@ args = 0, pretend = 0, frame = 0
  34              		@ frame_needed = 0, uses_anonymous_args = 0
  35              		@ link register save eliminated.
  36              		.loc 1 21 1 is_stmt 0 view .LVU1
  37 0000 10B4     		push	{r4}
ARM GAS  /tmp/cchSd3uo.s 			page 2


  38              	.LCFI0:
  39              		.cfi_def_cfa_offset 4
  40              		.cfi_offset 4, -4
  41              	.LBB2:
  22:Src/interface_can.cpp ****     : config_{config},
  23:Src/interface_can.cpp ****       handle_{handle} {
  42              		.loc 1 23 21 view .LVU2
  43 0002 4FF48064 		mov	r4, #1024
  44 0006 4FF0000C 		mov	ip, #0
  45 000a 4460     		str	r4, [r0, #4]
  46 000c C0E90312 		strd	r1, r2, [r0, #12]
  47              	.LBE2:
  24:Src/interface_can.cpp ****     // ctxMap[handle_] = this;
  25:Src/interface_can.cpp **** }
  48              		.loc 1 25 1 view .LVU3
  49 0010 5DF8044B 		ldr	r4, [sp], #4
  50              	.LCFI1:
  51              		.cfi_restore 4
  52              		.cfi_def_cfa_offset 0
  53              	.LBB3:
  23:Src/interface_can.cpp ****     // ctxMap[handle_] = this;
  54              		.loc 1 23 21 view .LVU4
  55 0014 80F808C0 		strb	ip, [r0, #8]
  56 0018 80F809C0 		strb	ip, [r0, #9]
  57              	.LBE3:
  58              		.loc 1 25 1 view .LVU5
  59 001c 7047     		bx	lr
  60              		.cfi_endproc
  61              	.LFE5609:
  63              		.global	_ZN9ODriveCANC1ERNS_8Config_tEP19FDCAN_HandleTypeDef
  64              		.thumb_set _ZN9ODriveCANC1ERNS_8Config_tEP19FDCAN_HandleTypeDef,_ZN9ODriveCANC2ERNS_8Config_tEP19F
  65 001e 00BF     		.section	.text._ZN9ODriveCAN17can_server_threadEv,"ax",%progbits
  66              		.align	1
  67              		.p2align 2,,3
  68              		.global	_ZN9ODriveCAN17can_server_threadEv
  69              		.syntax unified
  70              		.thumb
  71              		.thumb_func
  72              		.fpu fpv4-sp-d16
  74              	_ZN9ODriveCAN17can_server_threadEv:
  75              	.LVL1:
  76              	.LFB5611:
  26:Src/interface_can.cpp **** 
  27:Src/interface_can.cpp **** void ODriveCAN::can_server_thread() {
  77              		.loc 1 27 37 is_stmt 1 view -0
  78              		.cfi_startproc
  79              		@ args = 0, pretend = 0, frame = 56
  80              		@ frame_needed = 0, uses_anonymous_args = 0
  81              		.loc 1 27 37 is_stmt 0 view .LVU7
  82 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
  83              	.LCFI2:
  84              		.cfi_def_cfa_offset 28
  85              		.cfi_offset 4, -28
  86              		.cfi_offset 5, -24
  87              		.cfi_offset 6, -20
  88              		.cfi_offset 7, -16
  89              		.cfi_offset 8, -12
ARM GAS  /tmp/cchSd3uo.s 			page 3


  90              		.cfi_offset 9, -8
  91              		.cfi_offset 14, -4
  92 0004 3F4F     		ldr	r7, .L31
  93 0006 DFF80081 		ldr	r8, .L31+4
  94              	.LBB11:
  95              	.LBB12:
  28:Src/interface_can.cpp ****     for (;;) {
  29:Src/interface_can.cpp ****         uint32_t status = HAL_FDCAN_GetError(handle_);
  30:Src/interface_can.cpp ****         if (status == HAL_FDCAN_ERROR_NONE) {
  31:Src/interface_can.cpp ****             can_Message_t rxmsg;
  32:Src/interface_can.cpp **** 
  33:Src/interface_can.cpp ****             // Poll every 10ms regardless of semaphore status
  34:Src/interface_can.cpp ****             osSemaphoreWait(sem_can, 10);  
  35:Src/interface_can.cpp ****             
  36:Src/interface_can.cpp ****             while (available()) {
  37:Src/interface_can.cpp ****                 read(rxmsg);
  38:Src/interface_can.cpp ****                 switch (config_.protocol) {
  39:Src/interface_can.cpp ****                     case PROTOCOL_SIMPLE:
  40:Src/interface_can.cpp ****                         break;
  41:Src/interface_can.cpp ****                     case PROTOCOL_ENCOS:
  42:Src/interface_can.cpp ****                         CANEncos::handle_can_message(rxmsg);
  43:Src/interface_can.cpp ****                         break;
  44:Src/interface_can.cpp ****                 }
  45:Src/interface_can.cpp ****             }
  46:Src/interface_can.cpp ****             
  47:Src/interface_can.cpp ****             // Re-enable FDCAN notifications
  48:Src/interface_can.cpp ****             HAL_FDCAN_ActivateNotification(handle_, 
  49:Src/interface_can.cpp ****                 FDCAN_IT_RX_FIFO0_NEW_MESSAGE, 
  50:Src/interface_can.cpp ****                 FDCAN_INTERRUPT_LINE0);
  51:Src/interface_can.cpp ****                 
  52:Src/interface_can.cpp ****         } else {
  53:Src/interface_can.cpp ****             if (status == HAL_FDCAN_ERROR_TIMEOUT) {
  54:Src/interface_can.cpp ****                 // Reset FDCAN on timeout by stopping and restarting
  55:Src/interface_can.cpp ****                 HAL_FDCAN_Stop(handle_);
  56:Src/interface_can.cpp ****                 
  57:Src/interface_can.cpp ****                 // Clear error flags in ECR register
  58:Src/interface_can.cpp ****                 CLEAR_BIT(handle_->Instance->ECR, (FDCAN_ECR_TEC | FDCAN_ECR_REC));
  96              		.loc 1 58 17 view .LVU8
  97 000a DFF80091 		ldr	r9, .L31+8
  98              	.LBE12:
  99              	.LBE11:
  27:Src/interface_can.cpp ****     for (;;) {
 100              		.loc 1 27 37 view .LVU9
 101 000e 8FB0     		sub	sp, sp, #60
 102              	.LCFI3:
 103              		.cfi_def_cfa_offset 88
  27:Src/interface_can.cpp ****     for (;;) {
 104              		.loc 1 27 37 view .LVU10
 105 0010 0446     		mov	r4, r0
 106 0012 6E46     		mov	r6, sp
 107              	.LVL2:
 108              	.L5:
  28:Src/interface_can.cpp ****     for (;;) {
 109              		.loc 1 28 5 is_stmt 1 view .LVU11
 110              	.LBB34:
  29:Src/interface_can.cpp ****         if (status == HAL_FDCAN_ERROR_NONE) {
 111              		.loc 1 29 9 view .LVU12
ARM GAS  /tmp/cchSd3uo.s 			page 4


  29:Src/interface_can.cpp ****         if (status == HAL_FDCAN_ERROR_NONE) {
 112              		.loc 1 29 45 is_stmt 0 view .LVU13
 113 0014 2069     		ldr	r0, [r4, #16]
 114 0016 FFF7FEFF 		bl	HAL_FDCAN_GetError
 115              	.LVL3:
  30:Src/interface_can.cpp ****             can_Message_t rxmsg;
 116              		.loc 1 30 9 is_stmt 1 view .LVU14
 117              	.LBB32:
 118 001a 0546     		mov	r5, r0
 119 001c 0028     		cmp	r0, #0
 120 001e 5CD1     		bne	.L6
 121              	.L30:
 122              	.LBB13:
  31:Src/interface_can.cpp **** 
 123              		.loc 1 31 13 view .LVU15
  31:Src/interface_can.cpp **** 
 124              		.loc 1 31 27 is_stmt 0 view .LVU16
 125 0020 97E80F00 		ldm	r7, {r0, r1, r2, r3}
 126              	.LVL4:
  31:Src/interface_can.cpp **** 
 127              		.loc 1 31 27 view .LVU17
 128 0024 86E80F00 		stm	r6, {r0, r1, r2, r3}
  34:Src/interface_can.cpp ****             
 129              		.loc 1 34 13 is_stmt 1 view .LVU18
  34:Src/interface_can.cpp ****             
 130              		.loc 1 34 28 is_stmt 0 view .LVU19
 131 0028 D8F80000 		ldr	r0, [r8]
 132 002c 0A21     		movs	r1, #10
 133 002e FFF7FEFF 		bl	osSemaphoreWait
 134              	.LVL5:
 135 0032 09E0     		b	.L12
 136              	.LVL6:
 137              	.L8:
 138              	.LBB14:
 139              	.LBB15:
  59:Src/interface_can.cpp ****                 
  60:Src/interface_can.cpp ****                 // Restart FDCAN
  61:Src/interface_can.cpp ****                 status = HAL_FDCAN_Start(handle_);
  62:Src/interface_can.cpp ****                 if (status == HAL_OK) {
  63:Src/interface_can.cpp ****                     status = HAL_FDCAN_ActivateNotification(handle_,
  64:Src/interface_can.cpp ****                         FDCAN_IT_RX_FIFO0_NEW_MESSAGE,
  65:Src/interface_can.cpp ****                         FDCAN_INTERRUPT_LINE0);
  66:Src/interface_can.cpp ****                 }
  67:Src/interface_can.cpp ****             }
  68:Src/interface_can.cpp ****         }
  69:Src/interface_can.cpp ****     }
  70:Src/interface_can.cpp **** }
  71:Src/interface_can.cpp **** 
  72:Src/interface_can.cpp ****  
  73:Src/interface_can.cpp **** 
  74:Src/interface_can.cpp **** static void can_server_thread_wrapper(void *ctx) {
  75:Src/interface_can.cpp ****     reinterpret_cast<ODriveCAN *>(ctx)->can_server_thread();
  76:Src/interface_can.cpp ****     reinterpret_cast<ODriveCAN *>(ctx)->thread_id_valid_ = false;
  77:Src/interface_can.cpp **** }
  78:Src/interface_can.cpp **** 
  79:Src/interface_can.cpp **** bool ODriveCAN::start_can_server() {
  80:Src/interface_can.cpp ****     HAL_StatusTypeDef status;
ARM GAS  /tmp/cchSd3uo.s 			page 5


  81:Src/interface_can.cpp **** 
  82:Src/interface_can.cpp ****     // Set initial baud rate
  83:Src/interface_can.cpp ****     set_baud_rate(config_.baud_rate);
  84:Src/interface_can.cpp **** 
  85:Src/interface_can.cpp ****     // Initialize FDCAN with current configuration
  86:Src/interface_can.cpp ****     status = HAL_FDCAN_Init(handle_);
  87:Src/interface_can.cpp ****     if (status != HAL_OK) {
  88:Src/interface_can.cpp ****         return false;
  89:Src/interface_can.cpp ****     }
  90:Src/interface_can.cpp **** 
  91:Src/interface_can.cpp ****     // Configure FDCAN global filter
  92:Src/interface_can.cpp ****     HAL_FDCAN_ConfigGlobalFilter(handle_,
  93:Src/interface_can.cpp ****                                 FDCAN_ACCEPT_IN_RX_FIFO0,
  94:Src/interface_can.cpp ****                                 FDCAN_ACCEPT_IN_RX_FIFO0,
  95:Src/interface_can.cpp ****                                 FDCAN_FILTER_REMOTE,
  96:Src/interface_can.cpp ****                                 FDCAN_FILTER_REJECT);
  97:Src/interface_can.cpp **** 
  98:Src/interface_can.cpp ****     // Start FDCAN peripheral
  99:Src/interface_can.cpp ****     status = HAL_FDCAN_Start(handle_);
 100:Src/interface_can.cpp ****     if (status != HAL_OK) {
 101:Src/interface_can.cpp ****         return false;
 102:Src/interface_can.cpp ****     }
 103:Src/interface_can.cpp **** 
 104:Src/interface_can.cpp ****     // Enable FDCAN notifications
 105:Src/interface_can.cpp ****     status = HAL_FDCAN_ActivateNotification(handle_,
 106:Src/interface_can.cpp ****         FDCAN_IT_RX_FIFO0_NEW_MESSAGE | 
 107:Src/interface_can.cpp ****         FDCAN_IT_RX_FIFO0_FULL | 
 108:Src/interface_can.cpp ****         FDCAN_IT_ERROR_WARNING,
 109:Src/interface_can.cpp ****         FDCAN_INTERRUPT_LINE0);
 110:Src/interface_can.cpp ****     
 111:Src/interface_can.cpp ****     if (status != HAL_OK) {
 112:Src/interface_can.cpp ****         return false;
 113:Src/interface_can.cpp ****     }
 114:Src/interface_can.cpp **** 
 115:Src/interface_can.cpp ****     // Create CAN server thread using CMSIS-RTOS v1
 116:Src/interface_can.cpp ****     osThreadDef_t thread_def;
 117:Src/interface_can.cpp ****     thread_def.name = "can_server";
 118:Src/interface_can.cpp ****     thread_def.pthread = (os_pthread)can_server_thread_wrapper;
 119:Src/interface_can.cpp ****     thread_def.tpriority = osPriorityRealtime;
 120:Src/interface_can.cpp ****     thread_def.instances = 0;
 121:Src/interface_can.cpp ****     thread_def.stacksize = stack_size_ / sizeof(StackType_t);
 122:Src/interface_can.cpp **** 
 123:Src/interface_can.cpp ****     thread_id_ = osThreadCreate(&thread_def, this);
 124:Src/interface_can.cpp ****     thread_id_valid_ = (thread_id_ != nullptr);
 125:Src/interface_can.cpp **** 
 126:Src/interface_can.cpp ****     return thread_id_valid_;
 127:Src/interface_can.cpp **** }
 128:Src/interface_can.cpp **** 
 129:Src/interface_can.cpp **** // Send a CAN message on the bus
 130:Src/interface_can.cpp **** 
 131:Src/interface_can.cpp **** uint32_t ODriveCAN::write(can_Message_t &txmsg) {
 132:Src/interface_can.cpp ****     if (HAL_FDCAN_GetError(handle_) == HAL_FDCAN_ERROR_NONE) {
 133:Src/interface_can.cpp ****         FDCAN_TxHeaderTypeDef header;
 134:Src/interface_can.cpp ****         
 135:Src/interface_can.cpp ****         // Configure message header
 136:Src/interface_can.cpp ****         header.Identifier = txmsg.id;
 137:Src/interface_can.cpp ****         header.IdType = txmsg.isExt ? FDCAN_EXTENDED_ID : FDCAN_STANDARD_ID;
ARM GAS  /tmp/cchSd3uo.s 			page 6


 138:Src/interface_can.cpp ****         header.TxFrameType = txmsg.rtr ? FDCAN_REMOTE_FRAME : FDCAN_DATA_FRAME;
 139:Src/interface_can.cpp ****         header.DataLength = txmsg.len << 16;  // FDCAN uses shifted DLC format
 140:Src/interface_can.cpp ****         header.ErrorStateIndicator = FDCAN_ESI_ACTIVE;
 141:Src/interface_can.cpp ****         header.BitRateSwitch = FDCAN_BRS_OFF;
 142:Src/interface_can.cpp ****         header.FDFormat = FDCAN_CLASSIC_CAN;
 143:Src/interface_can.cpp ****         header.TxEventFifoControl = FDCAN_NO_TX_EVENTS;
 144:Src/interface_can.cpp ****         header.MessageMarker = 0;
 145:Src/interface_can.cpp **** 
 146:Src/interface_can.cpp ****         // Add message to transmission FIFO
 147:Src/interface_can.cpp ****         if (HAL_FDCAN_GetTxFifoFreeLevel(handle_) > 0) {
 148:Src/interface_can.cpp ****             HAL_StatusTypeDef status = HAL_FDCAN_AddMessageToTxFifoQ(handle_, 
 149:Src/interface_can.cpp ****                                                                     &header,
 150:Src/interface_can.cpp ****                                                                     txmsg.buf);
 151:Src/interface_can.cpp ****             return (status == HAL_OK) ? 1 : 0;
 152:Src/interface_can.cpp ****         }
 153:Src/interface_can.cpp ****         return 0;
 154:Src/interface_can.cpp ****     }
 155:Src/interface_can.cpp ****     return -1;
 156:Src/interface_can.cpp **** }
 157:Src/interface_can.cpp **** 
 158:Src/interface_can.cpp **** 
 159:Src/interface_can.cpp **** uint32_t ODriveCAN::available() {
 160:Src/interface_can.cpp ****     return (HAL_FDCAN_GetRxFifoFillLevel(handle_, FDCAN_RX_FIFO0) + 
 161:Src/interface_can.cpp ****             HAL_FDCAN_GetRxFifoFillLevel(handle_, FDCAN_RX_FIFO1));
 162:Src/interface_can.cpp **** }
 163:Src/interface_can.cpp **** 
 164:Src/interface_can.cpp **** bool ODriveCAN::read(can_Message_t &rxmsg) {
 165:Src/interface_can.cpp ****     FDCAN_RxHeaderTypeDef header;
 166:Src/interface_can.cpp ****     bool validRead = false;
 167:Src/interface_can.cpp **** 
 168:Src/interface_can.cpp ****     if (HAL_FDCAN_GetRxFifoFillLevel(handle_, FDCAN_RX_FIFO0) > 0) {
 169:Src/interface_can.cpp ****         if (HAL_FDCAN_GetRxMessage(handle_, FDCAN_RX_FIFO0, &header, rxmsg.buf) == HAL_OK) {
 170:Src/interface_can.cpp ****             validRead = true;
 171:Src/interface_can.cpp ****         }
 172:Src/interface_can.cpp ****     } else if (HAL_FDCAN_GetRxFifoFillLevel(handle_, FDCAN_RX_FIFO1) > 0) {
 140              		.loc 1 172 44 view .LVU20
 141 0034 2069     		ldr	r0, [r4, #16]
 142 0036 4121     		movs	r1, #65
 143 0038 FFF7FEFF 		bl	HAL_FDCAN_GetRxFifoFillLevel
 144              	.LVL7:
 145              		.loc 1 172 12 view .LVU21
 146 003c 0028     		cmp	r0, #0
 147 003e 3CD1     		bne	.L28
 148              	.L10:
 149              	.LVL8:
 173:Src/interface_can.cpp ****         if (HAL_FDCAN_GetRxMessage(handle_, FDCAN_RX_FIFO1, &header, rxmsg.buf) == HAL_OK) {
 174:Src/interface_can.cpp ****             validRead = true;
 175:Src/interface_can.cpp ****         }
 176:Src/interface_can.cpp ****     }
 177:Src/interface_can.cpp **** 
 178:Src/interface_can.cpp ****     if (validRead) {
 179:Src/interface_can.cpp ****         rxmsg.isExt = (header.IdType == FDCAN_EXTENDED_ID);
 180:Src/interface_can.cpp ****         rxmsg.id = rxmsg.isExt ? header.Identifier : header.Identifier;
 181:Src/interface_can.cpp ****         rxmsg.len = header.DataLength >> 16; // Convert FDCAN DLC to actual length
 182:Src/interface_can.cpp ****         rxmsg.rtr = (header.RxFrameType == FDCAN_REMOTE_FRAME);
 183:Src/interface_can.cpp ****     }
 184:Src/interface_can.cpp **** 
ARM GAS  /tmp/cchSd3uo.s 			page 7


 185:Src/interface_can.cpp ****     return validRead;
 150              		.loc 1 185 5 is_stmt 1 view .LVU22
 151              		.loc 1 185 5 is_stmt 0 view .LVU23
 152              	.LBE15:
 153              	.LBE14:
  38:Src/interface_can.cpp ****                     case PROTOCOL_SIMPLE:
 154              		.loc 1 38 17 is_stmt 1 view .LVU24
  38:Src/interface_can.cpp ****                     case PROTOCOL_SIMPLE:
 155              		.loc 1 38 33 is_stmt 0 view .LVU25
 156 0040 E368     		ldr	r3, [r4, #12]
  38:Src/interface_can.cpp ****                     case PROTOCOL_SIMPLE:
 157              		.loc 1 38 17 view .LVU26
 158 0042 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 159 0044 012B     		cmp	r3, #1
 160 0046 34D0     		beq	.L29
 161              	.L12:
  36:Src/interface_can.cpp ****                 read(rxmsg);
 162              		.loc 1 36 13 is_stmt 1 view .LVU27
  36:Src/interface_can.cpp ****                 read(rxmsg);
 163              		.loc 1 36 29 view .LVU28
 164              	.LVL9:
 165              	.LBB23:
 166              	.LBI23:
 159:Src/interface_can.cpp ****     return (HAL_FDCAN_GetRxFifoFillLevel(handle_, FDCAN_RX_FIFO0) + 
 167              		.loc 1 159 10 view .LVU29
 168              	.LBB24:
 160:Src/interface_can.cpp ****             HAL_FDCAN_GetRxFifoFillLevel(handle_, FDCAN_RX_FIFO1));
 169              		.loc 1 160 5 view .LVU30
 160:Src/interface_can.cpp ****             HAL_FDCAN_GetRxFifoFillLevel(handle_, FDCAN_RX_FIFO1));
 170              		.loc 1 160 41 is_stmt 0 view .LVU31
 171 0048 4021     		movs	r1, #64
 172 004a 2069     		ldr	r0, [r4, #16]
 173 004c FFF7FEFF 		bl	HAL_FDCAN_GetRxFifoFillLevel
 174              	.LVL10:
 161:Src/interface_can.cpp **** }
 175              		.loc 1 161 41 view .LVU32
 176 0050 4121     		movs	r1, #65
 160:Src/interface_can.cpp ****             HAL_FDCAN_GetRxFifoFillLevel(handle_, FDCAN_RX_FIFO1));
 177              		.loc 1 160 41 view .LVU33
 178 0052 0546     		mov	r5, r0
 161:Src/interface_can.cpp **** }
 179              		.loc 1 161 41 view .LVU34
 180 0054 2069     		ldr	r0, [r4, #16]
 181 0056 FFF7FEFF 		bl	HAL_FDCAN_GetRxFifoFillLevel
 182              	.LVL11:
 161:Src/interface_can.cpp **** }
 183              		.loc 1 161 41 view .LVU35
 184              	.LBE24:
 185              	.LBE23:
  37:Src/interface_can.cpp ****                 switch (config_.protocol) {
 186              		.loc 1 37 17 is_stmt 1 view .LVU36
 187              	.LBB25:
 188              	.LBI14:
 164:Src/interface_can.cpp ****     FDCAN_RxHeaderTypeDef header;
 189              		.loc 1 164 6 view .LVU37
 190              	.LBB16:
 165:Src/interface_can.cpp ****     bool validRead = false;
ARM GAS  /tmp/cchSd3uo.s 			page 8


 191              		.loc 1 165 5 view .LVU38
 166:Src/interface_can.cpp **** 
 192              		.loc 1 166 5 view .LVU39
 168:Src/interface_can.cpp ****         if (HAL_FDCAN_GetRxMessage(handle_, FDCAN_RX_FIFO0, &header, rxmsg.buf) == HAL_OK) {
 193              		.loc 1 168 5 view .LVU40
 194              	.LBE16:
 195              	.LBE25:
  36:Src/interface_can.cpp ****                 read(rxmsg);
 196              		.loc 1 36 29 is_stmt 0 view .LVU41
 197 005a C542     		cmn	r5, r0
 198              	.LBB26:
 199              	.LBB17:
 168:Src/interface_can.cpp ****         if (HAL_FDCAN_GetRxMessage(handle_, FDCAN_RX_FIFO0, &header, rxmsg.buf) == HAL_OK) {
 200              		.loc 1 168 37 view .LVU42
 201 005c 4FF04001 		mov	r1, #64
 202              	.LBE17:
 203              	.LBE26:
  36:Src/interface_can.cpp ****                 read(rxmsg);
 204              		.loc 1 36 29 view .LVU43
 205 0060 30D0     		beq	.L7
 206              	.LBB27:
 207              	.LBB18:
 168:Src/interface_can.cpp ****         if (HAL_FDCAN_GetRxMessage(handle_, FDCAN_RX_FIFO0, &header, rxmsg.buf) == HAL_OK) {
 208              		.loc 1 168 37 view .LVU44
 209 0062 2069     		ldr	r0, [r4, #16]
 210 0064 FFF7FEFF 		bl	HAL_FDCAN_GetRxFifoFillLevel
 211              	.LVL12:
 169:Src/interface_can.cpp ****             validRead = true;
 212              		.loc 1 169 9 is_stmt 1 view .LVU45
 172:Src/interface_can.cpp ****         if (HAL_FDCAN_GetRxMessage(handle_, FDCAN_RX_FIFO1, &header, rxmsg.buf) == HAL_OK) {
 213              		.loc 1 172 12 view .LVU46
 169:Src/interface_can.cpp ****             validRead = true;
 214              		.loc 1 169 35 is_stmt 0 view .LVU47
 215 0068 0DF10703 		add	r3, sp, #7
 216 006c 04AA     		add	r2, sp, #16
 217 006e 4021     		movs	r1, #64
 168:Src/interface_can.cpp ****         if (HAL_FDCAN_GetRxMessage(handle_, FDCAN_RX_FIFO0, &header, rxmsg.buf) == HAL_OK) {
 218              		.loc 1 168 5 view .LVU48
 219 0070 0028     		cmp	r0, #0
 220 0072 DFD0     		beq	.L8
 221              	.L27:
 173:Src/interface_can.cpp ****             validRead = true;
 222              		.loc 1 173 35 view .LVU49
 223 0074 2069     		ldr	r0, [r4, #16]
 224 0076 FFF7FEFF 		bl	HAL_FDCAN_GetRxMessage
 225              	.LVL13:
 173:Src/interface_can.cpp ****             validRead = true;
 226              		.loc 1 173 9 view .LVU50
 227 007a 0028     		cmp	r0, #0
 228 007c E0D1     		bne	.L10
 229              	.LVL14:
 179:Src/interface_can.cpp ****         rxmsg.id = rxmsg.isExt ? header.Identifier : header.Identifier;
 230              		.loc 1 179 9 is_stmt 1 view .LVU51
 182:Src/interface_can.cpp ****     }
 231              		.loc 1 182 41 is_stmt 0 view .LVU52
 232 007e DDE90523 		ldrd	r2, r3, [sp, #20]
 233 0082 A3F10053 		sub	r3, r3, #536870912
ARM GAS  /tmp/cchSd3uo.s 			page 9


 234 0086 B3FA83F3 		clz	r3, r3
 235 008a 5B09     		lsrs	r3, r3, #5
 181:Src/interface_can.cpp ****         rxmsg.rtr = (header.RxFrameType == FDCAN_REMOTE_FRAME);
 236              		.loc 1 181 39 view .LVU53
 237 008c BDF81E10 		ldrh	r1, [sp, #30]
 182:Src/interface_can.cpp ****     }
 238              		.loc 1 182 41 view .LVU54
 239 0090 8DF80530 		strb	r3, [sp, #5]
 240              	.LBE18:
 241              	.LBE27:
  38:Src/interface_can.cpp ****                     case PROTOCOL_SIMPLE:
 242              		.loc 1 38 33 view .LVU55
 243 0094 E368     		ldr	r3, [r4, #12]
 244              	.LBB28:
 245              	.LBB19:
 181:Src/interface_can.cpp ****         rxmsg.rtr = (header.RxFrameType == FDCAN_REMOTE_FRAME);
 246              		.loc 1 181 19 view .LVU56
 247 0096 8DF80610 		strb	r1, [sp, #6]
 248              	.LBE19:
 249              	.LBE28:
  38:Src/interface_can.cpp ****                     case PROTOCOL_SIMPLE:
 250              		.loc 1 38 17 view .LVU57
 251 009a 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 252              	.LBB29:
 253              	.LBB20:
 180:Src/interface_can.cpp ****         rxmsg.len = header.DataLength >> 16; // Convert FDCAN DLC to actual length
 254              		.loc 1 180 18 view .LVU58
 255 009c 0498     		ldr	r0, [sp, #16]
 256 009e 0090     		str	r0, [sp]
 179:Src/interface_can.cpp ****         rxmsg.id = rxmsg.isExt ? header.Identifier : header.Identifier;
 257              		.loc 1 179 38 view .LVU59
 258 00a0 A2F18042 		sub	r2, r2, #1073741824
 259 00a4 B2FA82F2 		clz	r2, r2
 260 00a8 5209     		lsrs	r2, r2, #5
 261              	.LBE20:
 262              	.LBE29:
  38:Src/interface_can.cpp ****                     case PROTOCOL_SIMPLE:
 263              		.loc 1 38 17 view .LVU60
 264 00aa 012B     		cmp	r3, #1
 265              	.LBB30:
 266              	.LBB21:
 179:Src/interface_can.cpp ****         rxmsg.id = rxmsg.isExt ? header.Identifier : header.Identifier;
 267              		.loc 1 179 38 view .LVU61
 268 00ac 8DF80420 		strb	r2, [sp, #4]
 180:Src/interface_can.cpp ****         rxmsg.len = header.DataLength >> 16; // Convert FDCAN DLC to actual length
 269              		.loc 1 180 9 is_stmt 1 view .LVU62
 181:Src/interface_can.cpp ****         rxmsg.rtr = (header.RxFrameType == FDCAN_REMOTE_FRAME);
 270              		.loc 1 181 9 view .LVU63
 182:Src/interface_can.cpp ****     }
 271              		.loc 1 182 9 view .LVU64
 272              		.loc 1 185 5 view .LVU65
 273              	.LVL15:
 274              		.loc 1 185 5 is_stmt 0 view .LVU66
 275              	.LBE21:
 276              	.LBE30:
  38:Src/interface_can.cpp ****                     case PROTOCOL_SIMPLE:
 277              		.loc 1 38 17 is_stmt 1 view .LVU67
ARM GAS  /tmp/cchSd3uo.s 			page 10


 278 00b0 CAD1     		bne	.L12
 279              	.L29:
  41:Src/interface_can.cpp ****                         CANEncos::handle_can_message(rxmsg);
 280              		.loc 1 41 21 view .LVU68
  42:Src/interface_can.cpp ****                         break;
 281              		.loc 1 42 25 view .LVU69
  42:Src/interface_can.cpp ****                         break;
 282              		.loc 1 42 53 is_stmt 0 view .LVU70
 283 00b2 3046     		mov	r0, r6
 284 00b4 FFF7FEFF 		bl	_ZN8CANEncos18handle_can_messageER13can_Message_t
 285              	.LVL16:
  43:Src/interface_can.cpp ****                 }
 286              		.loc 1 43 25 is_stmt 1 view .LVU71
 287 00b8 C6E7     		b	.L12
 288              	.LVL17:
 289              	.L28:
 290              	.LBB31:
 291              	.LBB22:
 173:Src/interface_can.cpp ****             validRead = true;
 292              		.loc 1 173 9 view .LVU72
 173:Src/interface_can.cpp ****             validRead = true;
 293              		.loc 1 173 35 is_stmt 0 view .LVU73
 294 00ba 0DF10703 		add	r3, sp, #7
 295 00be 04AA     		add	r2, sp, #16
 296 00c0 4121     		movs	r1, #65
 297 00c2 D7E7     		b	.L27
 298              	.L7:
 173:Src/interface_can.cpp ****             validRead = true;
 299              		.loc 1 173 35 view .LVU74
 300              	.LBE22:
 301              	.LBE31:
  48:Src/interface_can.cpp ****                 FDCAN_IT_RX_FIFO0_NEW_MESSAGE, 
 302              		.loc 1 48 13 is_stmt 1 view .LVU75
  48:Src/interface_can.cpp ****                 FDCAN_IT_RX_FIFO0_NEW_MESSAGE, 
 303              		.loc 1 48 43 is_stmt 0 view .LVU76
 304 00c4 0122     		movs	r2, #1
 305 00c6 1146     		mov	r1, r2
 306 00c8 2069     		ldr	r0, [r4, #16]
 307 00ca FFF7FEFF 		bl	HAL_FDCAN_ActivateNotification
 308              	.LVL18:
 309              	.LBE13:
 310              	.LBE32:
 311              	.LBE34:
  28:Src/interface_can.cpp ****         uint32_t status = HAL_FDCAN_GetError(handle_);
 312              		.loc 1 28 5 is_stmt 1 view .LVU77
 313              	.LBB35:
  29:Src/interface_can.cpp ****         if (status == HAL_FDCAN_ERROR_NONE) {
 314              		.loc 1 29 9 view .LVU78
  29:Src/interface_can.cpp ****         if (status == HAL_FDCAN_ERROR_NONE) {
 315              		.loc 1 29 45 is_stmt 0 view .LVU79
 316 00ce 2069     		ldr	r0, [r4, #16]
 317 00d0 FFF7FEFF 		bl	HAL_FDCAN_GetError
 318              	.LVL19:
  30:Src/interface_can.cpp ****             can_Message_t rxmsg;
 319              		.loc 1 30 9 is_stmt 1 view .LVU80
 320              	.LBB33:
 321 00d4 0546     		mov	r5, r0
ARM GAS  /tmp/cchSd3uo.s 			page 11


 322 00d6 0028     		cmp	r0, #0
 323 00d8 A2D0     		beq	.L30
 324              	.LVL20:
 325              	.L6:
  53:Src/interface_can.cpp ****                 // Reset FDCAN on timeout by stopping and restarting
 326              		.loc 1 53 13 view .LVU81
 327 00da 0128     		cmp	r0, #1
 328 00dc 9AD1     		bne	.L5
  55:Src/interface_can.cpp ****                 
 329              		.loc 1 55 17 view .LVU82
  55:Src/interface_can.cpp ****                 
 330              		.loc 1 55 31 is_stmt 0 view .LVU83
 331 00de 2069     		ldr	r0, [r4, #16]
 332              	.LVL21:
  55:Src/interface_can.cpp ****                 
 333              		.loc 1 55 31 view .LVU84
 334 00e0 FFF7FEFF 		bl	HAL_FDCAN_Stop
 335              	.LVL22:
  58:Src/interface_can.cpp ****                 
 336              		.loc 1 58 17 is_stmt 1 view .LVU85
 337 00e4 2069     		ldr	r0, [r4, #16]
 338 00e6 0268     		ldr	r2, [r0]
 339 00e8 136C     		ldr	r3, [r2, #64]
 340 00ea 03EA0903 		and	r3, r3, r9
 341 00ee 1364     		str	r3, [r2, #64]
  61:Src/interface_can.cpp ****                 if (status == HAL_OK) {
 342              		.loc 1 61 17 view .LVU86
  61:Src/interface_can.cpp ****                 if (status == HAL_OK) {
 343              		.loc 1 61 41 is_stmt 0 view .LVU87
 344 00f0 FFF7FEFF 		bl	HAL_FDCAN_Start
 345              	.LVL23:
  62:Src/interface_can.cpp ****                     status = HAL_FDCAN_ActivateNotification(handle_,
 346              		.loc 1 62 17 is_stmt 1 view .LVU88
 347 00f4 0028     		cmp	r0, #0
 348 00f6 8DD1     		bne	.L5
  63:Src/interface_can.cpp ****                         FDCAN_IT_RX_FIFO0_NEW_MESSAGE,
 349              		.loc 1 63 21 view .LVU89
  63:Src/interface_can.cpp ****                         FDCAN_IT_RX_FIFO0_NEW_MESSAGE,
 350              		.loc 1 63 60 is_stmt 0 view .LVU90
 351 00f8 2069     		ldr	r0, [r4, #16]
 352              	.LVL24:
  63:Src/interface_can.cpp ****                         FDCAN_IT_RX_FIFO0_NEW_MESSAGE,
 353              		.loc 1 63 60 view .LVU91
 354 00fa 2A46     		mov	r2, r5
 355 00fc 2946     		mov	r1, r5
 356 00fe FFF7FEFF 		bl	HAL_FDCAN_ActivateNotification
 357              	.LVL25:
  63:Src/interface_can.cpp ****                         FDCAN_IT_RX_FIFO0_NEW_MESSAGE,
 358              		.loc 1 63 60 view .LVU92
 359 0102 87E7     		b	.L5
 360              	.L32:
 361              		.align	2
 362              	.L31:
 363 0104 00000000 		.word	.LANCHOR0
 364 0108 00000000 		.word	sem_can
 365 010c 0080FFFF 		.word	-32768
 366              	.LBE33:
ARM GAS  /tmp/cchSd3uo.s 			page 12


 367              	.LBE35:
 368              		.cfi_endproc
 369              	.LFE5611:
 371              		.section	.text._ZL25can_server_thread_wrapperPv,"ax",%progbits
 372              		.align	1
 373              		.p2align 2,,3
 374              		.syntax unified
 375              		.thumb
 376              		.thumb_func
 377              		.fpu fpv4-sp-d16
 379              	_ZL25can_server_thread_wrapperPv:
 380              	.LVL26:
 381              	.LFB5615:
  74:Src/interface_can.cpp ****     reinterpret_cast<ODriveCAN *>(ctx)->can_server_thread();
 382              		.loc 1 74 50 is_stmt 1 view -0
 383              		.cfi_startproc
 384              		@ Volatile: function does not return.
 385              		@ args = 0, pretend = 0, frame = 0
 386              		@ frame_needed = 0, uses_anonymous_args = 0
  75:Src/interface_can.cpp ****     reinterpret_cast<ODriveCAN *>(ctx)->thread_id_valid_ = false;
 387              		.loc 1 75 5 view .LVU94
  74:Src/interface_can.cpp ****     reinterpret_cast<ODriveCAN *>(ctx)->can_server_thread();
 388              		.loc 1 74 50 is_stmt 0 view .LVU95
 389 0000 08B5     		push	{r3, lr}
 390              	.LCFI4:
 391              		.cfi_def_cfa_offset 8
 392              		.cfi_offset 3, -8
 393              		.cfi_offset 14, -4
  75:Src/interface_can.cpp ****     reinterpret_cast<ODriveCAN *>(ctx)->thread_id_valid_ = false;
 394              		.loc 1 75 58 view .LVU96
 395 0002 FFF7FEFF 		bl	_ZN9ODriveCAN17can_server_threadEv
 396              	.LVL27:
  75:Src/interface_can.cpp ****     reinterpret_cast<ODriveCAN *>(ctx)->thread_id_valid_ = false;
 397              		.loc 1 75 58 view .LVU97
 398              		.cfi_endproc
 399              	.LFE5615:
 401 0006 00BF     		.section	.rodata._ZN9ODriveCAN16start_can_serverEv.str1.4,"aMS",%progbits,1
 402              		.align	2
 403              	.LC1:
 404 0000 63616E5F 		.ascii	"can_server\000"
 404      73657276 
 404      657200
 405              		.section	.text._ZN9ODriveCAN16start_can_serverEv,"ax",%progbits
 406              		.align	1
 407              		.p2align 2,,3
 408              		.global	_ZN9ODriveCAN16start_can_serverEv
 409              		.syntax unified
 410              		.thumb
 411              		.thumb_func
 412              		.fpu fpv4-sp-d16
 414              	_ZN9ODriveCAN16start_can_serverEv:
 415              	.LVL28:
 416              	.LFB5616:
  79:Src/interface_can.cpp ****     HAL_StatusTypeDef status;
 417              		.loc 1 79 36 is_stmt 1 view -0
 418              		.cfi_startproc
 419              		@ args = 0, pretend = 0, frame = 24
ARM GAS  /tmp/cchSd3uo.s 			page 13


 420              		@ frame_needed = 0, uses_anonymous_args = 0
  80:Src/interface_can.cpp **** 
 421              		.loc 1 80 5 view .LVU99
  83:Src/interface_can.cpp **** 
 422              		.loc 1 83 5 view .LVU100
  79:Src/interface_can.cpp ****     HAL_StatusTypeDef status;
 423              		.loc 1 79 36 is_stmt 0 view .LVU101
 424 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 425              	.LCFI5:
 426              		.cfi_def_cfa_offset 20
 427              		.cfi_offset 4, -20
 428              		.cfi_offset 5, -16
 429              		.cfi_offset 6, -12
 430              		.cfi_offset 7, -8
 431              		.cfi_offset 14, -4
  83:Src/interface_can.cpp **** 
 432              		.loc 1 83 19 view .LVU102
 433 0002 C268     		ldr	r2, [r0, #12]
 434              	.LBB54:
 435              	.LBB55:
 186:Src/interface_can.cpp **** }
 187:Src/interface_can.cpp **** 
 188:Src/interface_can.cpp **** // Set one of only a few common baud rates.  CAN doesn't do arbitrary baud rates well due to the ti
 189:Src/interface_can.cpp **** // 21 TQ allows for easy sampling at exactly 80% (recommended by Vector Informatik GmbH for high re
 190:Src/interface_can.cpp **** // Conveniently, the CAN peripheral's 42MHz clock lets us easily create 21TQs for all common baud r
 191:Src/interface_can.cpp **** void ODriveCAN::set_baud_rate(uint32_t baudRate) {
 192:Src/interface_can.cpp ****     switch (baudRate) {
 436              		.loc 1 192 5 view .LVU103
 437 0004 3D49     		ldr	r1, .L55
 438              	.LBE55:
 439              	.LBE54:
  83:Src/interface_can.cpp **** 
 440              		.loc 1 83 18 view .LVU104
 441 0006 1368     		ldr	r3, [r2]
 442              	.LVL29:
 443              	.LBB66:
 444              	.LBI54:
 191:Src/interface_can.cpp ****     switch (baudRate) {
 445              		.loc 1 191 6 is_stmt 1 view .LVU105
 446              	.LBB62:
 447              		.loc 1 192 5 view .LVU106
 448 0008 8B42     		cmp	r3, r1
 449              	.LBE62:
 450              	.LBE66:
  79:Src/interface_can.cpp ****     HAL_StatusTypeDef status;
 451              		.loc 1 79 36 is_stmt 0 view .LVU107
 452 000a 89B0     		sub	sp, sp, #36
 453              	.LCFI6:
 454              		.cfi_def_cfa_offset 56
  79:Src/interface_can.cpp ****     HAL_StatusTypeDef status;
 455              		.loc 1 79 36 view .LVU108
 456 000c 0446     		mov	r4, r0
 457              	.LBB67:
 458              	.LBB63:
 459              		.loc 1 192 5 view .LVU109
 460 000e 71D0     		beq	.L36
 461 0010 30D8     		bhi	.L37
ARM GAS  /tmp/cchSd3uo.s 			page 14


 462 0012 3B49     		ldr	r1, .L55+4
 463 0014 8B42     		cmp	r3, r1
 464 0016 6AD0     		beq	.L38
 465 0018 3A49     		ldr	r1, .L55+8
 466 001a 8B42     		cmp	r3, r1
 467 001c 23D1     		bne	.L40
 193:Src/interface_can.cpp ****         case CAN_BAUD_125K:
 194:Src/interface_can.cpp ****             handle_->Init.NominalPrescaler = 16;    // 21 TQ's
 195:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 196:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg2 = 2;
 197:Src/interface_can.cpp ****             handle_->Init.NominalSyncJumpWidth = 1;
 198:Src/interface_can.cpp ****             config_.baud_rate = baudRate;
 199:Src/interface_can.cpp ****             reinit_can();
 200:Src/interface_can.cpp ****             break;
 201:Src/interface_can.cpp **** 
 202:Src/interface_can.cpp ****         case CAN_BAUD_250K:
 468              		.loc 1 202 9 is_stmt 1 view .LVU110
 203:Src/interface_can.cpp ****             handle_->Init.NominalPrescaler = 8;     // 21 TQ's
 469              		.loc 1 203 13 view .LVU111
 470 001e 0069     		ldr	r0, [r0, #16]
 471              	.LVL30:
 472              		.loc 1 203 44 is_stmt 0 view .LVU112
 473 0020 0821     		movs	r1, #8
 474              	.L53:
 204:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 205:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg2 = 2;
 206:Src/interface_can.cpp ****             handle_->Init.NominalSyncJumpWidth = 1;
 207:Src/interface_can.cpp ****             config_.baud_rate = baudRate;
 208:Src/interface_can.cpp ****             reinit_can();
 209:Src/interface_can.cpp ****             break;
 210:Src/interface_can.cpp **** 
 211:Src/interface_can.cpp ****         case CAN_BAUD_500K:
 212:Src/interface_can.cpp ****             handle_->Init.NominalPrescaler = 4;     // 21 TQ's
 213:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 214:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg2 = 2;
 215:Src/interface_can.cpp ****             handle_->Init.NominalSyncJumpWidth = 1;
 475              		.loc 1 215 48 view .LVU113
 476 0022 0126     		movs	r6, #1
 477 0024 0D27     		movs	r7, #13
 478 0026 C0E90667 		strd	r6, r7, [r0, #24]
 214:Src/interface_can.cpp ****             handle_->Init.NominalSyncJumpWidth = 1;
 479              		.loc 1 214 43 view .LVU114
 480 002a 0225     		movs	r5, #2
 212:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 481              		.loc 1 212 44 view .LVU115
 482 002c 4161     		str	r1, [r0, #20]
 213:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg2 = 2;
 483              		.loc 1 213 13 is_stmt 1 view .LVU116
 214:Src/interface_can.cpp ****             handle_->Init.NominalSyncJumpWidth = 1;
 484              		.loc 1 214 43 is_stmt 0 view .LVU117
 485 002e 0562     		str	r5, [r0, #32]
 486              		.loc 1 215 13 is_stmt 1 view .LVU118
 216:Src/interface_can.cpp ****             config_.baud_rate = baudRate;
 487              		.loc 1 216 13 view .LVU119
 488              	.L50:
 217:Src/interface_can.cpp ****             reinit_can();
 218:Src/interface_can.cpp ****             break;
ARM GAS  /tmp/cchSd3uo.s 			page 15


 219:Src/interface_can.cpp **** 
 220:Src/interface_can.cpp ****         case CAN_BAUD_1000K:
 221:Src/interface_can.cpp ****             handle_->Init.NominalPrescaler = 2;     // 21 TQ's
 222:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 223:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg2 = 2;
 489              		.loc 1 223 13 view .LVU120
 224:Src/interface_can.cpp ****             handle_->Init.NominalSyncJumpWidth = 1;
 490              		.loc 1 224 13 view .LVU121
 225:Src/interface_can.cpp ****             config_.baud_rate = baudRate;
 491              		.loc 1 225 13 view .LVU122
 492              		.loc 1 225 31 is_stmt 0 view .LVU123
 493 0030 1360     		str	r3, [r2]
 226:Src/interface_can.cpp ****             reinit_can();
 494              		.loc 1 226 13 is_stmt 1 view .LVU124
 495              	.LVL31:
 496              	.LBB56:
 497              	.LBI56:
 227:Src/interface_can.cpp ****             break;
 228:Src/interface_can.cpp **** 
 229:Src/interface_can.cpp ****         default:
 230:Src/interface_can.cpp ****             // baudRate is invalid, so don't accept it.
 231:Src/interface_can.cpp ****             break;
 232:Src/interface_can.cpp ****     }
 233:Src/interface_can.cpp **** }
 234:Src/interface_can.cpp **** void ODriveCAN::reinit_can() {
 498              		.loc 1 234 6 view .LVU125
 499              	.LBB57:
 235:Src/interface_can.cpp ****     // Stop FDCAN peripheral
 236:Src/interface_can.cpp ****     HAL_FDCAN_Stop(handle_);
 500              		.loc 1 236 5 view .LVU126
 501              		.loc 1 236 19 is_stmt 0 view .LVU127
 502 0032 FFF7FEFF 		bl	HAL_FDCAN_Stop
 503              	.LVL32:
 237:Src/interface_can.cpp ****     
 238:Src/interface_can.cpp ****     // Configure FDCAN init structure
 239:Src/interface_can.cpp ****     handle_->Init.FrameFormat = FDCAN_FRAME_CLASSIC;
 504              		.loc 1 239 5 is_stmt 1 view .LVU128
 505 0036 2069     		ldr	r0, [r4, #16]
 240:Src/interface_can.cpp ****     handle_->Init.Mode = FDCAN_MODE_NORMAL;
 241:Src/interface_can.cpp ****     handle_->Init.AutoRetransmission = ENABLE;
 242:Src/interface_can.cpp ****     handle_->Init.TransmitPause = DISABLE;
 243:Src/interface_can.cpp ****     handle_->Init.ProtocolException = DISABLE;
 244:Src/interface_can.cpp ****     
 245:Src/interface_can.cpp ****     // Set timing parameters for the selected baud rate
 246:Src/interface_can.cpp ****     handle_->Init.NominalPrescaler = handle_->Init.NominalPrescaler; // Use existing prescaler
 247:Src/interface_can.cpp ****     handle_->Init.NominalSyncJumpWidth = 1;
 248:Src/interface_can.cpp ****     handle_->Init.NominalTimeSeg1 = 13; // 80% sample point
 249:Src/interface_can.cpp ****     handle_->Init.NominalTimeSeg2 = 2;
 506              		.loc 1 249 35 is_stmt 0 view .LVU129
 507 0038 0562     		str	r5, [r0, #32]
 239:Src/interface_can.cpp ****     handle_->Init.Mode = FDCAN_MODE_NORMAL;
 508              		.loc 1 239 31 view .LVU130
 509 003a 0025     		movs	r5, #0
 240:Src/interface_can.cpp ****     handle_->Init.Mode = FDCAN_MODE_NORMAL;
 510              		.loc 1 240 24 view .LVU131
 511 003c C0E90255 		strd	r5, r5, [r0, #8]
 241:Src/interface_can.cpp ****     handle_->Init.TransmitPause = DISABLE;
ARM GAS  /tmp/cchSd3uo.s 			page 16


 512              		.loc 1 241 5 is_stmt 1 view .LVU132
 242:Src/interface_can.cpp ****     handle_->Init.ProtocolException = DISABLE;
 513              		.loc 1 242 5 view .LVU133
 243:Src/interface_can.cpp ****     
 514              		.loc 1 243 5 view .LVU134
 248:Src/interface_can.cpp ****     handle_->Init.NominalTimeSeg2 = 2;
 515              		.loc 1 248 35 is_stmt 0 view .LVU135
 516 0040 C761     		str	r7, [r0, #28]
 241:Src/interface_can.cpp ****     handle_->Init.TransmitPause = DISABLE;
 517              		.loc 1 241 38 view .LVU136
 518 0042 0682     		strh	r6, [r0, #16]	@ movhi
 247:Src/interface_can.cpp ****     handle_->Init.NominalTimeSeg1 = 13; // 80% sample point
 519              		.loc 1 247 40 view .LVU137
 520 0044 8661     		str	r6, [r0, #24]
 243:Src/interface_can.cpp ****     
 521              		.loc 1 243 37 view .LVU138
 522 0046 8574     		strb	r5, [r0, #18]
 246:Src/interface_can.cpp ****     handle_->Init.NominalSyncJumpWidth = 1;
 523              		.loc 1 246 5 is_stmt 1 view .LVU139
 247:Src/interface_can.cpp ****     handle_->Init.NominalTimeSeg1 = 13; // 80% sample point
 524              		.loc 1 247 5 view .LVU140
 248:Src/interface_can.cpp ****     handle_->Init.NominalTimeSeg2 = 2;
 525              		.loc 1 248 5 view .LVU141
 526              		.loc 1 249 5 view .LVU142
 250:Src/interface_can.cpp ****     
 251:Src/interface_can.cpp ****     // Reinitialize FDCAN
 252:Src/interface_can.cpp ****     HAL_FDCAN_Init(handle_);
 527              		.loc 1 252 5 view .LVU143
 528              		.loc 1 252 19 is_stmt 0 view .LVU144
 529 0048 FFF7FEFF 		bl	HAL_FDCAN_Init
 530              	.LVL33:
 253:Src/interface_can.cpp ****     
 254:Src/interface_can.cpp ****     // Configure global filter to accept all messages
 255:Src/interface_can.cpp ****     HAL_FDCAN_ConfigGlobalFilter(handle_,
 531              		.loc 1 255 5 is_stmt 1 view .LVU145
 532              		.loc 1 255 33 is_stmt 0 view .LVU146
 533 004c 0322     		movs	r2, #3
 534 004e 0092     		str	r2, [sp]
 535 0050 2069     		ldr	r0, [r4, #16]
 536 0052 2B46     		mov	r3, r5
 537 0054 2A46     		mov	r2, r5
 538 0056 2946     		mov	r1, r5
 539 0058 FFF7FEFF 		bl	HAL_FDCAN_ConfigGlobalFilter
 540              	.LVL34:
 256:Src/interface_can.cpp ****                                 FDCAN_ACCEPT_IN_RX_FIFO0,  // Non-matching frames
 257:Src/interface_can.cpp ****                                 FDCAN_ACCEPT_IN_RX_FIFO0,  // Non-matching frames
 258:Src/interface_can.cpp ****                                 FDCAN_FILTER_REMOTE,       // Remote frames
 259:Src/interface_can.cpp ****                                 FDCAN_FILTER_REJECT);      // Reject error frames
 260:Src/interface_can.cpp ****     
 261:Src/interface_can.cpp ****     // Start FDCAN peripheral
 262:Src/interface_can.cpp ****     HAL_StatusTypeDef status = HAL_FDCAN_Start(handle_);
 541              		.loc 1 262 5 is_stmt 1 view .LVU147
 542              		.loc 1 262 47 is_stmt 0 view .LVU148
 543 005c 2069     		ldr	r0, [r4, #16]
 544 005e FFF7FEFF 		bl	HAL_FDCAN_Start
 545              	.LVL35:
 263:Src/interface_can.cpp ****     
ARM GAS  /tmp/cchSd3uo.s 			page 17


 264:Src/interface_can.cpp ****     if (status == HAL_OK) {
 546              		.loc 1 264 5 is_stmt 1 view .LVU149
 547 0062 0028     		cmp	r0, #0
 548 0064 3DD0     		beq	.L54
 549              	.LVL36:
 550              	.L40:
 551              		.loc 1 264 5 is_stmt 0 view .LVU150
 552              	.LBE57:
 553              	.LBE56:
 554              	.LBE63:
 555              	.LBE67:
  86:Src/interface_can.cpp ****     if (status != HAL_OK) {
 556              		.loc 1 86 5 is_stmt 1 view .LVU151
  86:Src/interface_can.cpp ****     if (status != HAL_OK) {
 557              		.loc 1 86 28 is_stmt 0 view .LVU152
 558 0066 2069     		ldr	r0, [r4, #16]
 559 0068 FFF7FEFF 		bl	HAL_FDCAN_Init
 560              	.LVL37:
  87:Src/interface_can.cpp ****         return false;
 561              		.loc 1 87 5 is_stmt 1 view .LVU153
 562 006c 70B1     		cbz	r0, .L44
 563              	.L46:
  88:Src/interface_can.cpp ****     }
 564              		.loc 1 88 16 is_stmt 0 view .LVU154
 565 006e 0020     		movs	r0, #0
 566              	.LVL38:
 127:Src/interface_can.cpp **** 
 567              		.loc 1 127 1 view .LVU155
 568 0070 09B0     		add	sp, sp, #36
 569              	.LCFI7:
 570              		.cfi_remember_state
 571              		.cfi_def_cfa_offset 20
 572              		@ sp needed
 573 0072 F0BD     		pop	{r4, r5, r6, r7, pc}
 574              	.LVL39:
 575              	.L37:
 576              	.LCFI8:
 577              		.cfi_restore_state
 578              	.LBB68:
 579              	.LBB64:
 192:Src/interface_can.cpp ****         case CAN_BAUD_125K:
 580              		.loc 1 192 5 view .LVU156
 581 0074 2449     		ldr	r1, .L55+12
 582 0076 8B42     		cmp	r3, r1
 583 0078 F5D1     		bne	.L40
 220:Src/interface_can.cpp ****             handle_->Init.NominalPrescaler = 2;     // 21 TQ's
 584              		.loc 1 220 9 is_stmt 1 view .LVU157
 221:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 585              		.loc 1 221 13 view .LVU158
 586 007a 0069     		ldr	r0, [r0, #16]
 587              	.LVL40:
 221:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 588              		.loc 1 221 44 is_stmt 0 view .LVU159
 589 007c 0225     		movs	r5, #2
 222:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg2 = 2;
 590              		.loc 1 222 43 view .LVU160
 591 007e 0126     		movs	r6, #1
ARM GAS  /tmp/cchSd3uo.s 			page 18


 592 0080 0D27     		movs	r7, #13
 593 0082 C0E90667 		strd	r6, r7, [r0, #24]
 221:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 594              		.loc 1 221 44 view .LVU161
 595 0086 4561     		str	r5, [r0, #20]
 222:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg2 = 2;
 596              		.loc 1 222 13 is_stmt 1 view .LVU162
 223:Src/interface_can.cpp ****             handle_->Init.NominalSyncJumpWidth = 1;
 597              		.loc 1 223 43 is_stmt 0 view .LVU163
 598 0088 0562     		str	r5, [r0, #32]
 599 008a D1E7     		b	.L50
 600              	.LVL41:
 601              	.L44:
 223:Src/interface_can.cpp ****             handle_->Init.NominalSyncJumpWidth = 1;
 602              		.loc 1 223 43 view .LVU164
 603              	.LBE64:
 604              	.LBE68:
  92:Src/interface_can.cpp ****                                 FDCAN_ACCEPT_IN_RX_FIFO0,
 605              		.loc 1 92 5 is_stmt 1 view .LVU165
  92:Src/interface_can.cpp ****                                 FDCAN_ACCEPT_IN_RX_FIFO0,
 606              		.loc 1 92 33 is_stmt 0 view .LVU166
 607 008c 0325     		movs	r5, #3
 608 008e 0095     		str	r5, [sp]
 609 0090 0346     		mov	r3, r0
 610 0092 0246     		mov	r2, r0
 611 0094 0146     		mov	r1, r0
 612 0096 2069     		ldr	r0, [r4, #16]
 613              	.LVL42:
  92:Src/interface_can.cpp ****                                 FDCAN_ACCEPT_IN_RX_FIFO0,
 614              		.loc 1 92 33 view .LVU167
 615 0098 FFF7FEFF 		bl	HAL_FDCAN_ConfigGlobalFilter
 616              	.LVL43:
  99:Src/interface_can.cpp ****     if (status != HAL_OK) {
 617              		.loc 1 99 5 is_stmt 1 view .LVU168
  99:Src/interface_can.cpp ****     if (status != HAL_OK) {
 618              		.loc 1 99 29 is_stmt 0 view .LVU169
 619 009c 2069     		ldr	r0, [r4, #16]
 620 009e FFF7FEFF 		bl	HAL_FDCAN_Start
 621              	.LVL44:
 100:Src/interface_can.cpp ****         return false;
 622              		.loc 1 100 5 is_stmt 1 view .LVU170
 623 00a2 0028     		cmp	r0, #0
 624 00a4 E3D1     		bne	.L46
 105:Src/interface_can.cpp ****         FDCAN_IT_RX_FIFO0_NEW_MESSAGE | 
 625              		.loc 1 105 5 view .LVU171
 105:Src/interface_can.cpp ****         FDCAN_IT_RX_FIFO0_NEW_MESSAGE | 
 626              		.loc 1 105 44 is_stmt 0 view .LVU172
 627 00a6 1949     		ldr	r1, .L55+16
 628 00a8 2069     		ldr	r0, [r4, #16]
 629              	.LVL45:
 105:Src/interface_can.cpp ****         FDCAN_IT_RX_FIFO0_NEW_MESSAGE | 
 630              		.loc 1 105 44 view .LVU173
 631 00aa 0122     		movs	r2, #1
 632 00ac FFF7FEFF 		bl	HAL_FDCAN_ActivateNotification
 633              	.LVL46:
 111:Src/interface_can.cpp ****         return false;
 634              		.loc 1 111 5 is_stmt 1 view .LVU174
ARM GAS  /tmp/cchSd3uo.s 			page 19


 635 00b0 0028     		cmp	r0, #0
 636 00b2 DCD1     		bne	.L46
 116:Src/interface_can.cpp ****     thread_def.name = "can_server";
 637              		.loc 1 116 5 view .LVU175
 117:Src/interface_can.cpp ****     thread_def.pthread = (os_pthread)can_server_thread_wrapper;
 638              		.loc 1 117 5 view .LVU176
 121:Src/interface_can.cpp **** 
 639              		.loc 1 121 40 is_stmt 0 view .LVU177
 640 00b4 6368     		ldr	r3, [r4, #4]
 117:Src/interface_can.cpp ****     thread_def.pthread = (os_pthread)can_server_thread_wrapper;
 641              		.loc 1 117 21 view .LVU178
 642 00b6 164A     		ldr	r2, .L55+20
 643 00b8 0392     		str	r2, [sp, #12]
 118:Src/interface_can.cpp ****     thread_def.tpriority = osPriorityRealtime;
 644              		.loc 1 118 5 is_stmt 1 view .LVU179
 121:Src/interface_can.cpp **** 
 645              		.loc 1 121 40 is_stmt 0 view .LVU180
 646 00ba 9B08     		lsrs	r3, r3, #2
 121:Src/interface_can.cpp **** 
 647              		.loc 1 121 26 view .LVU181
 648 00bc CDE90603 		strd	r0, r3, [sp, #24]
 118:Src/interface_can.cpp ****     thread_def.tpriority = osPriorityRealtime;
 649              		.loc 1 118 24 view .LVU182
 650 00c0 144A     		ldr	r2, .L55+24
 651 00c2 0492     		str	r2, [sp, #16]
 119:Src/interface_can.cpp ****     thread_def.instances = 0;
 652              		.loc 1 119 5 is_stmt 1 view .LVU183
 123:Src/interface_can.cpp ****     thread_id_valid_ = (thread_id_ != nullptr);
 653              		.loc 1 123 32 is_stmt 0 view .LVU184
 654 00c4 2146     		mov	r1, r4
 655 00c6 03A8     		add	r0, sp, #12
 656              	.LVL47:
 119:Src/interface_can.cpp ****     thread_def.instances = 0;
 657              		.loc 1 119 26 view .LVU185
 658 00c8 ADF81450 		strh	r5, [sp, #20]	@ movhi
 120:Src/interface_can.cpp ****     thread_def.stacksize = stack_size_ / sizeof(StackType_t);
 659              		.loc 1 120 5 is_stmt 1 view .LVU186
 123:Src/interface_can.cpp ****     thread_id_valid_ = (thread_id_ != nullptr);
 660              		.loc 1 123 5 view .LVU187
 123:Src/interface_can.cpp ****     thread_id_valid_ = (thread_id_ != nullptr);
 661              		.loc 1 123 32 is_stmt 0 view .LVU188
 662 00cc FFF7FEFF 		bl	osThreadCreate
 663              	.LVL48:
 124:Src/interface_can.cpp **** 
 664              		.loc 1 124 36 view .LVU189
 665 00d0 031E     		subs	r3, r0, #0
 666 00d2 18BF     		it	ne
 667 00d4 0123     		movne	r3, #1
 124:Src/interface_can.cpp **** 
 668              		.loc 1 124 22 view .LVU190
 669 00d6 6372     		strb	r3, [r4, #9]
 126:Src/interface_can.cpp **** }
 670              		.loc 1 126 12 view .LVU191
 671 00d8 637A     		ldrb	r3, [r4, #9]	@ zero_extendqisi2
 123:Src/interface_can.cpp ****     thread_id_valid_ = (thread_id_ != nullptr);
 672              		.loc 1 123 16 view .LVU192
 673 00da 2060     		str	r0, [r4]
ARM GAS  /tmp/cchSd3uo.s 			page 20


 124:Src/interface_can.cpp **** 
 674              		.loc 1 124 5 is_stmt 1 view .LVU193
 126:Src/interface_can.cpp **** }
 675              		.loc 1 126 5 view .LVU194
 126:Src/interface_can.cpp **** }
 676              		.loc 1 126 12 is_stmt 0 view .LVU195
 677 00dc D8B2     		uxtb	r0, r3
 127:Src/interface_can.cpp **** 
 678              		.loc 1 127 1 view .LVU196
 679 00de 09B0     		add	sp, sp, #36
 680              	.LCFI9:
 681              		.cfi_remember_state
 682              		.cfi_def_cfa_offset 20
 683              		@ sp needed
 684 00e0 F0BD     		pop	{r4, r5, r6, r7, pc}
 685              	.LVL49:
 686              	.L54:
 687              	.LCFI10:
 688              		.cfi_restore_state
 689              	.LBB69:
 690              	.LBB65:
 691              	.LBB61:
 692              	.LBB60:
 693              	.LBB58:
 694              	.LBI58:
 234:Src/interface_can.cpp ****     // Stop FDCAN peripheral
 695              		.loc 1 234 6 is_stmt 1 view .LVU197
 696              	.LBB59:
 265:Src/interface_can.cpp ****         // Enable notifications for new messages
 266:Src/interface_can.cpp ****         // FDCAN requires interrupt line parameter (0 or 1)
 267:Src/interface_can.cpp ****         status = HAL_FDCAN_ActivateNotification(handle_, 
 697              		.loc 1 267 9 view .LVU198
 698              		.loc 1 267 48 is_stmt 0 view .LVU199
 699 00e2 0A49     		ldr	r1, .L55+16
 700 00e4 2069     		ldr	r0, [r4, #16]
 701              	.LVL50:
 702              		.loc 1 267 48 view .LVU200
 703 00e6 3246     		mov	r2, r6
 704 00e8 FFF7FEFF 		bl	HAL_FDCAN_ActivateNotification
 705              	.LVL51:
 268:Src/interface_can.cpp ****             FDCAN_IT_RX_FIFO0_NEW_MESSAGE | 
 269:Src/interface_can.cpp ****             FDCAN_IT_RX_FIFO0_FULL | 
 270:Src/interface_can.cpp ****             FDCAN_IT_ERROR_WARNING,
 271:Src/interface_can.cpp ****             FDCAN_INTERRUPT_LINE0);  // Use interrupt line 0
 272:Src/interface_can.cpp ****     }
 273:Src/interface_can.cpp **** }
 706              		.loc 1 273 1 view .LVU201
 707 00ec BBE7     		b	.L40
 708              	.LVL52:
 709              	.L38:
 710              		.loc 1 273 1 view .LVU202
 711              	.LBE59:
 712              	.LBE58:
 713              	.LBE60:
 714              	.LBE61:
 193:Src/interface_can.cpp ****             handle_->Init.NominalPrescaler = 16;    // 21 TQ's
 715              		.loc 1 193 9 is_stmt 1 view .LVU203
ARM GAS  /tmp/cchSd3uo.s 			page 21


 194:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 716              		.loc 1 194 13 view .LVU204
 717 00ee 0069     		ldr	r0, [r0, #16]
 718              	.LVL53:
 194:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 719              		.loc 1 194 44 is_stmt 0 view .LVU205
 720 00f0 1021     		movs	r1, #16
 721 00f2 96E7     		b	.L53
 722              	.LVL54:
 723              	.L36:
 211:Src/interface_can.cpp ****             handle_->Init.NominalPrescaler = 4;     // 21 TQ's
 724              		.loc 1 211 9 is_stmt 1 view .LVU206
 212:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 725              		.loc 1 212 13 view .LVU207
 726 00f4 0069     		ldr	r0, [r0, #16]
 727              	.LVL55:
 212:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 728              		.loc 1 212 44 is_stmt 0 view .LVU208
 729 00f6 0421     		movs	r1, #4
 730 00f8 93E7     		b	.L53
 731              	.L56:
 732 00fa 00BF     		.align	2
 733              	.L55:
 734 00fc 20A10700 		.word	500000
 735 0100 48E80100 		.word	125000
 736 0104 90D00300 		.word	250000
 737 0108 40420F00 		.word	1000000
 738 010c 03000400 		.word	262147
 739 0110 00000000 		.word	.LC1
 740 0114 00000000 		.word	_ZL25can_server_thread_wrapperPv
 741              	.LBE65:
 742              	.LBE69:
 743              		.cfi_endproc
 744              	.LFE5616:
 746              		.section	.text._ZN9ODriveCAN5writeER13can_Message_t,"ax",%progbits
 747              		.align	1
 748              		.p2align 2,,3
 749              		.global	_ZN9ODriveCAN5writeER13can_Message_t
 750              		.syntax unified
 751              		.thumb
 752              		.thumb_func
 753              		.fpu fpv4-sp-d16
 755              	_ZN9ODriveCAN5writeER13can_Message_t:
 756              	.LVL56:
 757              	.LFB5617:
 131:Src/interface_can.cpp ****     if (HAL_FDCAN_GetError(handle_) == HAL_FDCAN_ERROR_NONE) {
 758              		.loc 1 131 49 is_stmt 1 view -0
 759              		.cfi_startproc
 760              		@ args = 0, pretend = 0, frame = 40
 761              		@ frame_needed = 0, uses_anonymous_args = 0
 132:Src/interface_can.cpp ****         FDCAN_TxHeaderTypeDef header;
 762              		.loc 1 132 5 view .LVU210
 131:Src/interface_can.cpp ****     if (HAL_FDCAN_GetError(handle_) == HAL_FDCAN_ERROR_NONE) {
 763              		.loc 1 131 49 is_stmt 0 view .LVU211
 764 0000 30B5     		push	{r4, r5, lr}
 765              	.LCFI11:
 766              		.cfi_def_cfa_offset 12
ARM GAS  /tmp/cchSd3uo.s 			page 22


 767              		.cfi_offset 4, -12
 768              		.cfi_offset 5, -8
 769              		.cfi_offset 14, -4
 770 0002 0546     		mov	r5, r0
 771 0004 8BB0     		sub	sp, sp, #44
 772              	.LCFI12:
 773              		.cfi_def_cfa_offset 56
 774              	.LBB70:
 132:Src/interface_can.cpp ****         FDCAN_TxHeaderTypeDef header;
 775              		.loc 1 132 27 view .LVU212
 776 0006 0069     		ldr	r0, [r0, #16]
 777              	.LVL57:
 132:Src/interface_can.cpp ****         FDCAN_TxHeaderTypeDef header;
 778              		.loc 1 132 27 view .LVU213
 779              	.LBE70:
 131:Src/interface_can.cpp ****     if (HAL_FDCAN_GetError(handle_) == HAL_FDCAN_ERROR_NONE) {
 780              		.loc 1 131 49 view .LVU214
 781 0008 0C46     		mov	r4, r1
 782              	.LBB77:
 132:Src/interface_can.cpp ****         FDCAN_TxHeaderTypeDef header;
 783              		.loc 1 132 27 view .LVU215
 784 000a FFF7FEFF 		bl	HAL_FDCAN_GetError
 785              	.LVL58:
 132:Src/interface_can.cpp ****         FDCAN_TxHeaderTypeDef header;
 786              		.loc 1 132 5 view .LVU216
 787 000e 48BB     		cbnz	r0, .L62
 788              	.LBB71:
 133:Src/interface_can.cpp ****         
 789              		.loc 1 133 9 is_stmt 1 view .LVU217
 136:Src/interface_can.cpp ****         header.IdType = txmsg.isExt ? FDCAN_EXTENDED_ID : FDCAN_STANDARD_ID;
 790              		.loc 1 136 9 view .LVU218
 136:Src/interface_can.cpp ****         header.IdType = txmsg.isExt ? FDCAN_EXTENDED_ID : FDCAN_STANDARD_ID;
 791              		.loc 1 136 27 is_stmt 0 view .LVU219
 792 0010 2268     		ldr	r2, [r4]
 793 0012 0092     		str	r2, [sp]
 137:Src/interface_can.cpp ****         header.TxFrameType = txmsg.rtr ? FDCAN_REMOTE_FRAME : FDCAN_DATA_FRAME;
 794              		.loc 1 137 9 is_stmt 1 view .LVU220
 137:Src/interface_can.cpp ****         header.TxFrameType = txmsg.rtr ? FDCAN_REMOTE_FRAME : FDCAN_DATA_FRAME;
 795              		.loc 1 137 37 is_stmt 0 view .LVU221
 796 0014 2279     		ldrb	r2, [r4, #4]	@ zero_extendqisi2
 144:Src/interface_can.cpp **** 
 797              		.loc 1 144 30 view .LVU222
 798 0016 0890     		str	r0, [sp, #32]
 799 0018 0346     		mov	r3, r0
 138:Src/interface_can.cpp ****         header.DataLength = txmsg.len << 16;  // FDCAN uses shifted DLC format
 800              		.loc 1 138 40 view .LVU223
 801 001a 6079     		ldrb	r0, [r4, #5]	@ zero_extendqisi2
 137:Src/interface_can.cpp ****         header.TxFrameType = txmsg.rtr ? FDCAN_REMOTE_FRAME : FDCAN_DATA_FRAME;
 802              		.loc 1 137 37 view .LVU224
 803 001c 002A     		cmp	r2, #0
 139:Src/interface_can.cpp ****         header.ErrorStateIndicator = FDCAN_ESI_ACTIVE;
 804              		.loc 1 139 35 view .LVU225
 805 001e A279     		ldrb	r2, [r4, #6]	@ zero_extendqisi2
 137:Src/interface_can.cpp ****         header.TxFrameType = txmsg.rtr ? FDCAN_REMOTE_FRAME : FDCAN_DATA_FRAME;
 806              		.loc 1 137 37 view .LVU226
 807 0020 14BF     		ite	ne
 808 0022 4FF08041 		movne	r1, #1073741824
ARM GAS  /tmp/cchSd3uo.s 			page 23


 809 0026 0021     		moveq	r1, #0
 138:Src/interface_can.cpp ****         header.DataLength = txmsg.len << 16;  // FDCAN uses shifted DLC format
 810              		.loc 1 138 40 view .LVU227
 811 0028 0028     		cmp	r0, #0
 812 002a 18BF     		it	ne
 813 002c 4FF00053 		movne	r3, #536870912
 139:Src/interface_can.cpp ****         header.ErrorStateIndicator = FDCAN_ESI_ACTIVE;
 814              		.loc 1 139 39 view .LVU228
 815 0030 1204     		lsls	r2, r2, #16
 139:Src/interface_can.cpp ****         header.ErrorStateIndicator = FDCAN_ESI_ACTIVE;
 816              		.loc 1 139 27 view .LVU229
 817 0032 CDE90232 		strd	r3, r2, [sp, #8]
 818              	.LBB72:
 147:Src/interface_can.cpp ****             HAL_StatusTypeDef status = HAL_FDCAN_AddMessageToTxFifoQ(handle_, 
 819              		.loc 1 147 41 view .LVU230
 820 0036 2869     		ldr	r0, [r5, #16]
 821              	.LBE72:
 137:Src/interface_can.cpp ****         header.TxFrameType = txmsg.rtr ? FDCAN_REMOTE_FRAME : FDCAN_DATA_FRAME;
 822              		.loc 1 137 23 view .LVU231
 823 0038 0191     		str	r1, [sp, #4]
 138:Src/interface_can.cpp ****         header.DataLength = txmsg.len << 16;  // FDCAN uses shifted DLC format
 824              		.loc 1 138 9 is_stmt 1 view .LVU232
 140:Src/interface_can.cpp ****         header.BitRateSwitch = FDCAN_BRS_OFF;
 825              		.loc 1 140 9 view .LVU233
 141:Src/interface_can.cpp ****         header.FDFormat = FDCAN_CLASSIC_CAN;
 826              		.loc 1 141 9 view .LVU234
 142:Src/interface_can.cpp ****         header.TxEventFifoControl = FDCAN_NO_TX_EVENTS;
 827              		.loc 1 142 9 view .LVU235
 143:Src/interface_can.cpp ****         header.MessageMarker = 0;
 828              		.loc 1 143 9 view .LVU236
 140:Src/interface_can.cpp ****         header.BitRateSwitch = FDCAN_BRS_OFF;
 829              		.loc 1 140 36 is_stmt 0 view .LVU237
 830 003a 0022     		movs	r2, #0
 831 003c 0023     		movs	r3, #0
 832 003e CDE90423 		strd	r2, [sp, #16]
 833 0042 CDE90623 		strd	r2, [sp, #24]
 144:Src/interface_can.cpp **** 
 834              		.loc 1 144 9 is_stmt 1 view .LVU238
 147:Src/interface_can.cpp ****             HAL_StatusTypeDef status = HAL_FDCAN_AddMessageToTxFifoQ(handle_, 
 835              		.loc 1 147 9 view .LVU239
 836              	.LBB74:
 147:Src/interface_can.cpp ****             HAL_StatusTypeDef status = HAL_FDCAN_AddMessageToTxFifoQ(handle_, 
 837              		.loc 1 147 41 is_stmt 0 view .LVU240
 838 0046 FFF7FEFF 		bl	HAL_FDCAN_GetTxFifoFreeLevel
 839              	.LVL59:
 147:Src/interface_can.cpp ****             HAL_StatusTypeDef status = HAL_FDCAN_AddMessageToTxFifoQ(handle_, 
 840              		.loc 1 147 9 view .LVU241
 841 004a 08B9     		cbnz	r0, .L69
 842              	.LBE74:
 843              	.LBE71:
 844              	.LBE77:
 156:Src/interface_can.cpp **** 
 845              		.loc 1 156 1 view .LVU242
 846 004c 0BB0     		add	sp, sp, #44
 847              	.LCFI13:
 848              		.cfi_remember_state
 849              		.cfi_def_cfa_offset 12
ARM GAS  /tmp/cchSd3uo.s 			page 24


 850              		@ sp needed
 851 004e 30BD     		pop	{r4, r5, pc}
 852              	.LVL60:
 853              	.L69:
 854              	.LCFI14:
 855              		.cfi_restore_state
 856              	.LBB78:
 857              	.LBB76:
 858              	.LBB75:
 859              	.LBB73:
 148:Src/interface_can.cpp ****                                                                     &header,
 860              		.loc 1 148 13 is_stmt 1 view .LVU243
 148:Src/interface_can.cpp ****                                                                     &header,
 861              		.loc 1 148 69 is_stmt 0 view .LVU244
 862 0050 2869     		ldr	r0, [r5, #16]
 863 0052 E21D     		adds	r2, r4, #7
 864 0054 6946     		mov	r1, sp
 865 0056 FFF7FEFF 		bl	HAL_FDCAN_AddMessageToTxFifoQ
 866              	.LVL61:
 151:Src/interface_can.cpp ****         }
 867              		.loc 1 151 13 is_stmt 1 view .LVU245
 151:Src/interface_can.cpp ****         }
 868              		.loc 1 151 39 is_stmt 0 view .LVU246
 869 005a B0FA80F0 		clz	r0, r0
 870              	.LVL62:
 151:Src/interface_can.cpp ****         }
 871              		.loc 1 151 39 view .LVU247
 872 005e 4009     		lsrs	r0, r0, #5
 873              	.LBE73:
 874              	.LBE75:
 875              	.LBE76:
 876              	.LBE78:
 156:Src/interface_can.cpp **** 
 877              		.loc 1 156 1 view .LVU248
 878 0060 0BB0     		add	sp, sp, #44
 879              	.LCFI15:
 880              		.cfi_remember_state
 881              		.cfi_def_cfa_offset 12
 882              		@ sp needed
 883 0062 30BD     		pop	{r4, r5, pc}
 884              	.LVL63:
 885              	.L62:
 886              	.LCFI16:
 887              		.cfi_restore_state
 155:Src/interface_can.cpp **** }
 888              		.loc 1 155 13 view .LVU249
 889 0064 4FF0FF30 		mov	r0, #-1
 156:Src/interface_can.cpp **** 
 890              		.loc 1 156 1 view .LVU250
 891 0068 0BB0     		add	sp, sp, #44
 892              	.LCFI17:
 893              		.cfi_def_cfa_offset 12
 894              		@ sp needed
 895 006a 30BD     		pop	{r4, r5, pc}
 156:Src/interface_can.cpp **** 
 896              		.loc 1 156 1 view .LVU251
 897              		.cfi_endproc
ARM GAS  /tmp/cchSd3uo.s 			page 25


 898              	.LFE5617:
 900              		.section	.text._ZN9ODriveCAN9availableEv,"ax",%progbits
 901              		.align	1
 902              		.p2align 2,,3
 903              		.global	_ZN9ODriveCAN9availableEv
 904              		.syntax unified
 905              		.thumb
 906              		.thumb_func
 907              		.fpu fpv4-sp-d16
 909              	_ZN9ODriveCAN9availableEv:
 910              	.LVL64:
 911              	.LFB5618:
 159:Src/interface_can.cpp ****     return (HAL_FDCAN_GetRxFifoFillLevel(handle_, FDCAN_RX_FIFO0) + 
 912              		.loc 1 159 33 is_stmt 1 view -0
 913              		.cfi_startproc
 914              		@ args = 0, pretend = 0, frame = 0
 915              		@ frame_needed = 0, uses_anonymous_args = 0
 160:Src/interface_can.cpp ****             HAL_FDCAN_GetRxFifoFillLevel(handle_, FDCAN_RX_FIFO1));
 916              		.loc 1 160 5 view .LVU253
 159:Src/interface_can.cpp ****     return (HAL_FDCAN_GetRxFifoFillLevel(handle_, FDCAN_RX_FIFO0) + 
 917              		.loc 1 159 33 is_stmt 0 view .LVU254
 918 0000 10B5     		push	{r4, lr}
 919              	.LCFI18:
 920              		.cfi_def_cfa_offset 8
 921              		.cfi_offset 4, -8
 922              		.cfi_offset 14, -4
 160:Src/interface_can.cpp ****             HAL_FDCAN_GetRxFifoFillLevel(handle_, FDCAN_RX_FIFO1));
 923              		.loc 1 160 41 view .LVU255
 924 0002 4021     		movs	r1, #64
 159:Src/interface_can.cpp ****     return (HAL_FDCAN_GetRxFifoFillLevel(handle_, FDCAN_RX_FIFO0) + 
 925              		.loc 1 159 33 view .LVU256
 926 0004 0446     		mov	r4, r0
 160:Src/interface_can.cpp ****             HAL_FDCAN_GetRxFifoFillLevel(handle_, FDCAN_RX_FIFO1));
 927              		.loc 1 160 41 view .LVU257
 928 0006 0069     		ldr	r0, [r0, #16]
 929              	.LVL65:
 160:Src/interface_can.cpp ****             HAL_FDCAN_GetRxFifoFillLevel(handle_, FDCAN_RX_FIFO1));
 930              		.loc 1 160 41 view .LVU258
 931 0008 FFF7FEFF 		bl	HAL_FDCAN_GetRxFifoFillLevel
 932              	.LVL66:
 161:Src/interface_can.cpp **** }
 933              		.loc 1 161 41 view .LVU259
 934 000c 4121     		movs	r1, #65
 160:Src/interface_can.cpp ****             HAL_FDCAN_GetRxFifoFillLevel(handle_, FDCAN_RX_FIFO1));
 935              		.loc 1 160 41 view .LVU260
 936 000e 0346     		mov	r3, r0
 161:Src/interface_can.cpp **** }
 937              		.loc 1 161 41 view .LVU261
 938 0010 2069     		ldr	r0, [r4, #16]
 160:Src/interface_can.cpp ****             HAL_FDCAN_GetRxFifoFillLevel(handle_, FDCAN_RX_FIFO1));
 939              		.loc 1 160 41 view .LVU262
 940 0012 1C46     		mov	r4, r3
 941              	.LVL67:
 161:Src/interface_can.cpp **** }
 942              		.loc 1 161 41 view .LVU263
 943 0014 FFF7FEFF 		bl	HAL_FDCAN_GetRxFifoFillLevel
 944              	.LVL68:
ARM GAS  /tmp/cchSd3uo.s 			page 26


 162:Src/interface_can.cpp **** 
 945              		.loc 1 162 1 view .LVU264
 946 0018 2044     		add	r0, r0, r4
 947 001a 10BD     		pop	{r4, pc}
 948              		.cfi_endproc
 949              	.LFE5618:
 951              		.section	.text._ZN9ODriveCAN4readER13can_Message_t,"ax",%progbits
 952              		.align	1
 953              		.p2align 2,,3
 954              		.global	_ZN9ODriveCAN4readER13can_Message_t
 955              		.syntax unified
 956              		.thumb
 957              		.thumb_func
 958              		.fpu fpv4-sp-d16
 960              	_ZN9ODriveCAN4readER13can_Message_t:
 961              	.LVL69:
 962              	.LFB5619:
 164:Src/interface_can.cpp ****     FDCAN_RxHeaderTypeDef header;
 963              		.loc 1 164 44 is_stmt 1 view -0
 964              		.cfi_startproc
 965              		@ args = 0, pretend = 0, frame = 40
 966              		@ frame_needed = 0, uses_anonymous_args = 0
 165:Src/interface_can.cpp ****     bool validRead = false;
 967              		.loc 1 165 5 view .LVU266
 166:Src/interface_can.cpp **** 
 968              		.loc 1 166 5 view .LVU267
 168:Src/interface_can.cpp ****         if (HAL_FDCAN_GetRxMessage(handle_, FDCAN_RX_FIFO0, &header, rxmsg.buf) == HAL_OK) {
 969              		.loc 1 168 5 view .LVU268
 164:Src/interface_can.cpp ****     FDCAN_RxHeaderTypeDef header;
 970              		.loc 1 164 44 is_stmt 0 view .LVU269
 971 0000 30B5     		push	{r4, r5, lr}
 972              	.LCFI19:
 973              		.cfi_def_cfa_offset 12
 974              		.cfi_offset 4, -12
 975              		.cfi_offset 5, -8
 976              		.cfi_offset 14, -4
 977 0002 0446     		mov	r4, r0
 978 0004 8BB0     		sub	sp, sp, #44
 979              	.LCFI20:
 980              		.cfi_def_cfa_offset 56
 164:Src/interface_can.cpp ****     FDCAN_RxHeaderTypeDef header;
 981              		.loc 1 164 44 view .LVU270
 982 0006 0D46     		mov	r5, r1
 168:Src/interface_can.cpp ****         if (HAL_FDCAN_GetRxMessage(handle_, FDCAN_RX_FIFO0, &header, rxmsg.buf) == HAL_OK) {
 983              		.loc 1 168 37 view .LVU271
 984 0008 0069     		ldr	r0, [r0, #16]
 985              	.LVL70:
 168:Src/interface_can.cpp ****         if (HAL_FDCAN_GetRxMessage(handle_, FDCAN_RX_FIFO0, &header, rxmsg.buf) == HAL_OK) {
 986              		.loc 1 168 37 view .LVU272
 987 000a 4021     		movs	r1, #64
 988              	.LVL71:
 168:Src/interface_can.cpp ****         if (HAL_FDCAN_GetRxMessage(handle_, FDCAN_RX_FIFO0, &header, rxmsg.buf) == HAL_OK) {
 989              		.loc 1 168 37 view .LVU273
 990 000c FFF7FEFF 		bl	HAL_FDCAN_GetRxFifoFillLevel
 991              	.LVL72:
 168:Src/interface_can.cpp ****         if (HAL_FDCAN_GetRxMessage(handle_, FDCAN_RX_FIFO0, &header, rxmsg.buf) == HAL_OK) {
 992              		.loc 1 168 5 view .LVU274
ARM GAS  /tmp/cchSd3uo.s 			page 27


 993 0010 48B1     		cbz	r0, .L73
 169:Src/interface_can.cpp ****             validRead = true;
 994              		.loc 1 169 9 is_stmt 1 view .LVU275
 169:Src/interface_can.cpp ****             validRead = true;
 995              		.loc 1 169 35 is_stmt 0 view .LVU276
 996 0012 2069     		ldr	r0, [r4, #16]
 997 0014 EB1D     		adds	r3, r5, #7
 998 0016 6A46     		mov	r2, sp
 999 0018 4021     		movs	r1, #64
 1000 001a FFF7FEFF 		bl	HAL_FDCAN_GetRxMessage
 1001              	.LVL73:
 169:Src/interface_can.cpp ****             validRead = true;
 1002              		.loc 1 169 9 view .LVU277
 1003 001e 80B1     		cbz	r0, .L74
 1004              	.L76:
 166:Src/interface_can.cpp **** 
 1005              		.loc 1 166 10 view .LVU278
 1006 0020 0020     		movs	r0, #0
 1007              	.LVL74:
 185:Src/interface_can.cpp **** }
 1008              		.loc 1 185 5 is_stmt 1 view .LVU279
 186:Src/interface_can.cpp **** 
 1009              		.loc 1 186 1 is_stmt 0 view .LVU280
 1010 0022 0BB0     		add	sp, sp, #44
 1011              	.LCFI21:
 1012              		.cfi_remember_state
 1013              		.cfi_def_cfa_offset 12
 1014              		@ sp needed
 1015 0024 30BD     		pop	{r4, r5, pc}
 1016              	.LVL75:
 1017              	.L73:
 1018              	.LCFI22:
 1019              		.cfi_restore_state
 172:Src/interface_can.cpp ****         if (HAL_FDCAN_GetRxMessage(handle_, FDCAN_RX_FIFO1, &header, rxmsg.buf) == HAL_OK) {
 1020              		.loc 1 172 12 is_stmt 1 view .LVU281
 172:Src/interface_can.cpp ****         if (HAL_FDCAN_GetRxMessage(handle_, FDCAN_RX_FIFO1, &header, rxmsg.buf) == HAL_OK) {
 1021              		.loc 1 172 44 is_stmt 0 view .LVU282
 1022 0026 2069     		ldr	r0, [r4, #16]
 1023 0028 4121     		movs	r1, #65
 1024 002a FFF7FEFF 		bl	HAL_FDCAN_GetRxFifoFillLevel
 1025              	.LVL76:
 172:Src/interface_can.cpp ****         if (HAL_FDCAN_GetRxMessage(handle_, FDCAN_RX_FIFO1, &header, rxmsg.buf) == HAL_OK) {
 1026              		.loc 1 172 12 view .LVU283
 1027 002e 0028     		cmp	r0, #0
 1028 0030 F6D0     		beq	.L76
 173:Src/interface_can.cpp ****             validRead = true;
 1029              		.loc 1 173 9 is_stmt 1 view .LVU284
 173:Src/interface_can.cpp ****             validRead = true;
 1030              		.loc 1 173 35 is_stmt 0 view .LVU285
 1031 0032 2069     		ldr	r0, [r4, #16]
 1032 0034 EB1D     		adds	r3, r5, #7
 1033 0036 6A46     		mov	r2, sp
 1034 0038 4121     		movs	r1, #65
 1035 003a FFF7FEFF 		bl	HAL_FDCAN_GetRxMessage
 1036              	.LVL77:
 173:Src/interface_can.cpp ****             validRead = true;
 1037              		.loc 1 173 9 view .LVU286
ARM GAS  /tmp/cchSd3uo.s 			page 28


 1038 003e 0028     		cmp	r0, #0
 1039 0040 EED1     		bne	.L76
 1040              	.L74:
 1041              	.LVL78:
 179:Src/interface_can.cpp ****         rxmsg.id = rxmsg.isExt ? header.Identifier : header.Identifier;
 1042              		.loc 1 179 9 is_stmt 1 view .LVU287
 182:Src/interface_can.cpp ****     }
 1043              		.loc 1 182 41 is_stmt 0 view .LVU288
 1044 0042 DDE90123 		ldrd	r2, r3, [sp, #4]
 179:Src/interface_can.cpp ****         rxmsg.id = rxmsg.isExt ? header.Identifier : header.Identifier;
 1045              		.loc 1 179 38 view .LVU289
 1046 0046 A2F18042 		sub	r2, r2, #1073741824
 182:Src/interface_can.cpp ****     }
 1047              		.loc 1 182 41 view .LVU290
 1048 004a A3F10053 		sub	r3, r3, #536870912
 180:Src/interface_can.cpp ****         rxmsg.len = header.DataLength >> 16; // Convert FDCAN DLC to actual length
 1049              		.loc 1 180 18 view .LVU291
 1050 004e 0098     		ldr	r0, [sp]
 181:Src/interface_can.cpp ****         rxmsg.rtr = (header.RxFrameType == FDCAN_REMOTE_FRAME);
 1051              		.loc 1 181 39 view .LVU292
 1052 0050 BDF80E10 		ldrh	r1, [sp, #14]
 180:Src/interface_can.cpp ****         rxmsg.len = header.DataLength >> 16; // Convert FDCAN DLC to actual length
 1053              		.loc 1 180 18 view .LVU293
 1054 0054 2860     		str	r0, [r5]
 179:Src/interface_can.cpp ****         rxmsg.id = rxmsg.isExt ? header.Identifier : header.Identifier;
 1055              		.loc 1 179 38 view .LVU294
 1056 0056 B2FA82F2 		clz	r2, r2
 182:Src/interface_can.cpp ****     }
 1057              		.loc 1 182 41 view .LVU295
 1058 005a B3FA83F3 		clz	r3, r3
 179:Src/interface_can.cpp ****         rxmsg.id = rxmsg.isExt ? header.Identifier : header.Identifier;
 1059              		.loc 1 179 38 view .LVU296
 1060 005e 5209     		lsrs	r2, r2, #5
 182:Src/interface_can.cpp ****     }
 1061              		.loc 1 182 41 view .LVU297
 1062 0060 5B09     		lsrs	r3, r3, #5
 1063 0062 0120     		movs	r0, #1
 179:Src/interface_can.cpp ****         rxmsg.id = rxmsg.isExt ? header.Identifier : header.Identifier;
 1064              		.loc 1 179 38 view .LVU298
 1065 0064 2A71     		strb	r2, [r5, #4]
 180:Src/interface_can.cpp ****         rxmsg.len = header.DataLength >> 16; // Convert FDCAN DLC to actual length
 1066              		.loc 1 180 9 is_stmt 1 view .LVU299
 181:Src/interface_can.cpp ****         rxmsg.rtr = (header.RxFrameType == FDCAN_REMOTE_FRAME);
 1067              		.loc 1 181 9 view .LVU300
 181:Src/interface_can.cpp ****         rxmsg.rtr = (header.RxFrameType == FDCAN_REMOTE_FRAME);
 1068              		.loc 1 181 19 is_stmt 0 view .LVU301
 1069 0066 A971     		strb	r1, [r5, #6]
 182:Src/interface_can.cpp ****     }
 1070              		.loc 1 182 9 is_stmt 1 view .LVU302
 185:Src/interface_can.cpp **** }
 1071              		.loc 1 185 5 view .LVU303
 182:Src/interface_can.cpp ****     }
 1072              		.loc 1 182 41 is_stmt 0 view .LVU304
 1073 0068 6B71     		strb	r3, [r5, #5]
 186:Src/interface_can.cpp **** 
 1074              		.loc 1 186 1 view .LVU305
 1075 006a 0BB0     		add	sp, sp, #44
ARM GAS  /tmp/cchSd3uo.s 			page 29


 1076              	.LCFI23:
 1077              		.cfi_def_cfa_offset 12
 1078              		@ sp needed
 1079 006c 30BD     		pop	{r4, r5, pc}
 186:Src/interface_can.cpp **** 
 1080              		.loc 1 186 1 view .LVU306
 1081              		.cfi_endproc
 1082              	.LFE5619:
 1084 006e 00BF     		.section	.text._ZN9ODriveCAN13set_baud_rateEm,"ax",%progbits
 1085              		.align	1
 1086              		.p2align 2,,3
 1087              		.global	_ZN9ODriveCAN13set_baud_rateEm
 1088              		.syntax unified
 1089              		.thumb
 1090              		.thumb_func
 1091              		.fpu fpv4-sp-d16
 1093              	_ZN9ODriveCAN13set_baud_rateEm:
 1094              	.LVL79:
 1095              	.LFB5620:
 191:Src/interface_can.cpp ****     switch (baudRate) {
 1096              		.loc 1 191 50 is_stmt 1 view -0
 1097              		.cfi_startproc
 1098              		@ args = 0, pretend = 0, frame = 0
 1099              		@ frame_needed = 0, uses_anonymous_args = 0
 192:Src/interface_can.cpp ****         case CAN_BAUD_125K:
 1100              		.loc 1 192 5 view .LVU308
 191:Src/interface_can.cpp ****     switch (baudRate) {
 1101              		.loc 1 191 50 is_stmt 0 view .LVU309
 1102 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1103              	.LCFI24:
 1104              		.cfi_def_cfa_offset 20
 1105              		.cfi_offset 4, -20
 1106              		.cfi_offset 5, -16
 1107              		.cfi_offset 6, -12
 1108              		.cfi_offset 7, -8
 1109              		.cfi_offset 14, -4
 192:Src/interface_can.cpp ****         case CAN_BAUD_125K:
 1110              		.loc 1 192 5 view .LVU310
 1111 0002 274B     		ldr	r3, .L103
 1112 0004 9942     		cmp	r1, r3
 191:Src/interface_can.cpp ****     switch (baudRate) {
 1113              		.loc 1 191 50 view .LVU311
 1114 0006 83B0     		sub	sp, sp, #12
 1115              	.LCFI25:
 1116              		.cfi_def_cfa_offset 32
 191:Src/interface_can.cpp ****     switch (baudRate) {
 1117              		.loc 1 191 50 view .LVU312
 1118 0008 0446     		mov	r4, r0
 192:Src/interface_can.cpp ****         case CAN_BAUD_125K:
 1119              		.loc 1 192 5 view .LVU313
 1120 000a 42D0     		beq	.L88
 1121 000c 2BD8     		bhi	.L89
 1122 000e 254B     		ldr	r3, .L103+4
 1123 0010 9942     		cmp	r1, r3
 1124 0012 38D0     		beq	.L90
 1125 0014 244B     		ldr	r3, .L103+8
 1126 0016 9942     		cmp	r1, r3
ARM GAS  /tmp/cchSd3uo.s 			page 30


 1127 0018 23D1     		bne	.L87
 202:Src/interface_can.cpp ****             handle_->Init.NominalPrescaler = 8;     // 21 TQ's
 1128              		.loc 1 202 9 is_stmt 1 view .LVU314
 203:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 1129              		.loc 1 203 13 view .LVU315
 1130 001a 0069     		ldr	r0, [r0, #16]
 1131              	.LVL80:
 203:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 1132              		.loc 1 203 44 is_stmt 0 view .LVU316
 1133 001c 0823     		movs	r3, #8
 204:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg2 = 2;
 1134              		.loc 1 204 43 view .LVU317
 1135 001e 0D27     		movs	r7, #13
 205:Src/interface_can.cpp ****             handle_->Init.NominalSyncJumpWidth = 1;
 1136              		.loc 1 205 43 view .LVU318
 1137 0020 0225     		movs	r5, #2
 203:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 1138              		.loc 1 203 44 view .LVU319
 1139 0022 4361     		str	r3, [r0, #20]
 204:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg2 = 2;
 1140              		.loc 1 204 13 is_stmt 1 view .LVU320
 1141              	.L99:
 222:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg2 = 2;
 1142              		.loc 1 222 13 view .LVU321
 225:Src/interface_can.cpp ****             reinit_can();
 1143              		.loc 1 225 31 is_stmt 0 view .LVU322
 1144 0024 E368     		ldr	r3, [r4, #12]
 224:Src/interface_can.cpp ****             config_.baud_rate = baudRate;
 1145              		.loc 1 224 48 view .LVU323
 1146 0026 0126     		movs	r6, #1
 223:Src/interface_can.cpp ****             handle_->Init.NominalSyncJumpWidth = 1;
 1147              		.loc 1 223 43 view .LVU324
 1148 0028 C0E90775 		strd	r7, r5, [r0, #28]
 224:Src/interface_can.cpp ****             config_.baud_rate = baudRate;
 1149              		.loc 1 224 13 is_stmt 1 view .LVU325
 224:Src/interface_can.cpp ****             config_.baud_rate = baudRate;
 1150              		.loc 1 224 48 is_stmt 0 view .LVU326
 1151 002c 8661     		str	r6, [r0, #24]
 225:Src/interface_can.cpp ****             reinit_can();
 1152              		.loc 1 225 13 is_stmt 1 view .LVU327
 225:Src/interface_can.cpp ****             reinit_can();
 1153              		.loc 1 225 31 is_stmt 0 view .LVU328
 1154 002e 1960     		str	r1, [r3]
 226:Src/interface_can.cpp ****             break;
 1155              		.loc 1 226 13 is_stmt 1 view .LVU329
 1156              	.LVL81:
 1157              	.LBB95:
 1158              	.LBI95:
 234:Src/interface_can.cpp ****     // Stop FDCAN peripheral
 1159              		.loc 1 234 6 view .LVU330
 1160              	.LBB96:
 236:Src/interface_can.cpp ****     
 1161              		.loc 1 236 5 view .LVU331
 236:Src/interface_can.cpp ****     
 1162              		.loc 1 236 19 is_stmt 0 view .LVU332
 1163 0030 FFF7FEFF 		bl	HAL_FDCAN_Stop
 1164              	.LVL82:
ARM GAS  /tmp/cchSd3uo.s 			page 31


 239:Src/interface_can.cpp ****     handle_->Init.Mode = FDCAN_MODE_NORMAL;
 1165              		.loc 1 239 5 is_stmt 1 view .LVU333
 1166 0034 2069     		ldr	r0, [r4, #16]
 249:Src/interface_can.cpp ****     
 1167              		.loc 1 249 35 is_stmt 0 view .LVU334
 1168 0036 0562     		str	r5, [r0, #32]
 239:Src/interface_can.cpp ****     handle_->Init.Mode = FDCAN_MODE_NORMAL;
 1169              		.loc 1 239 31 view .LVU335
 1170 0038 0025     		movs	r5, #0
 240:Src/interface_can.cpp ****     handle_->Init.AutoRetransmission = ENABLE;
 1171              		.loc 1 240 24 view .LVU336
 1172 003a C0E90255 		strd	r5, r5, [r0, #8]
 241:Src/interface_can.cpp ****     handle_->Init.TransmitPause = DISABLE;
 1173              		.loc 1 241 5 is_stmt 1 view .LVU337
 242:Src/interface_can.cpp ****     handle_->Init.ProtocolException = DISABLE;
 1174              		.loc 1 242 5 view .LVU338
 243:Src/interface_can.cpp ****     
 1175              		.loc 1 243 5 view .LVU339
 248:Src/interface_can.cpp ****     handle_->Init.NominalTimeSeg2 = 2;
 1176              		.loc 1 248 35 is_stmt 0 view .LVU340
 1177 003e C761     		str	r7, [r0, #28]
 241:Src/interface_can.cpp ****     handle_->Init.TransmitPause = DISABLE;
 1178              		.loc 1 241 38 view .LVU341
 1179 0040 0682     		strh	r6, [r0, #16]	@ movhi
 247:Src/interface_can.cpp ****     handle_->Init.NominalTimeSeg1 = 13; // 80% sample point
 1180              		.loc 1 247 40 view .LVU342
 1181 0042 8661     		str	r6, [r0, #24]
 243:Src/interface_can.cpp ****     
 1182              		.loc 1 243 37 view .LVU343
 1183 0044 8574     		strb	r5, [r0, #18]
 246:Src/interface_can.cpp ****     handle_->Init.NominalSyncJumpWidth = 1;
 1184              		.loc 1 246 5 is_stmt 1 view .LVU344
 247:Src/interface_can.cpp ****     handle_->Init.NominalTimeSeg1 = 13; // 80% sample point
 1185              		.loc 1 247 5 view .LVU345
 248:Src/interface_can.cpp ****     handle_->Init.NominalTimeSeg2 = 2;
 1186              		.loc 1 248 5 view .LVU346
 249:Src/interface_can.cpp ****     
 1187              		.loc 1 249 5 view .LVU347
 252:Src/interface_can.cpp ****     
 1188              		.loc 1 252 5 view .LVU348
 252:Src/interface_can.cpp ****     
 1189              		.loc 1 252 19 is_stmt 0 view .LVU349
 1190 0046 FFF7FEFF 		bl	HAL_FDCAN_Init
 1191              	.LVL83:
 255:Src/interface_can.cpp ****                                 FDCAN_ACCEPT_IN_RX_FIFO0,  // Non-matching frames
 1192              		.loc 1 255 5 is_stmt 1 view .LVU350
 255:Src/interface_can.cpp ****                                 FDCAN_ACCEPT_IN_RX_FIFO0,  // Non-matching frames
 1193              		.loc 1 255 33 is_stmt 0 view .LVU351
 1194 004a 0322     		movs	r2, #3
 1195 004c 0092     		str	r2, [sp]
 1196 004e 2069     		ldr	r0, [r4, #16]
 1197 0050 2B46     		mov	r3, r5
 1198 0052 2A46     		mov	r2, r5
 1199 0054 2946     		mov	r1, r5
 1200 0056 FFF7FEFF 		bl	HAL_FDCAN_ConfigGlobalFilter
 1201              	.LVL84:
 262:Src/interface_can.cpp ****     
ARM GAS  /tmp/cchSd3uo.s 			page 32


 1202              		.loc 1 262 5 is_stmt 1 view .LVU352
 262:Src/interface_can.cpp ****     
 1203              		.loc 1 262 47 is_stmt 0 view .LVU353
 1204 005a 2069     		ldr	r0, [r4, #16]
 1205 005c FFF7FEFF 		bl	HAL_FDCAN_Start
 1206              	.LVL85:
 264:Src/interface_can.cpp ****         // Enable notifications for new messages
 1207              		.loc 1 264 5 is_stmt 1 view .LVU354
 1208 0060 48B1     		cbz	r0, .L102
 1209              	.LVL86:
 1210              	.L87:
 264:Src/interface_can.cpp ****         // Enable notifications for new messages
 1211              		.loc 1 264 5 is_stmt 0 view .LVU355
 1212              	.LBE96:
 1213              	.LBE95:
 233:Src/interface_can.cpp **** void ODriveCAN::reinit_can() {
 1214              		.loc 1 233 1 view .LVU356
 1215 0062 03B0     		add	sp, sp, #12
 1216              	.LCFI26:
 1217              		.cfi_remember_state
 1218              		.cfi_def_cfa_offset 20
 1219              		@ sp needed
 1220 0064 F0BD     		pop	{r4, r5, r6, r7, pc}
 1221              	.LVL87:
 1222              	.L89:
 1223              	.LCFI27:
 1224              		.cfi_restore_state
 192:Src/interface_can.cpp ****         case CAN_BAUD_125K:
 1225              		.loc 1 192 5 view .LVU357
 1226 0066 114B     		ldr	r3, .L103+12
 1227 0068 9942     		cmp	r1, r3
 1228 006a FAD1     		bne	.L87
 220:Src/interface_can.cpp ****             handle_->Init.NominalPrescaler = 2;     // 21 TQ's
 1229              		.loc 1 220 9 is_stmt 1 view .LVU358
 221:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 1230              		.loc 1 221 13 view .LVU359
 1231 006c 0069     		ldr	r0, [r0, #16]
 1232              	.LVL88:
 221:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 1233              		.loc 1 221 44 is_stmt 0 view .LVU360
 1234 006e 0225     		movs	r5, #2
 222:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg2 = 2;
 1235              		.loc 1 222 43 view .LVU361
 1236 0070 0D27     		movs	r7, #13
 221:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 1237              		.loc 1 221 44 view .LVU362
 1238 0072 4561     		str	r5, [r0, #20]
 1239 0074 D6E7     		b	.L99
 1240              	.LVL89:
 1241              	.L102:
 1242              	.LBB103:
 1243              	.LBB101:
 1244              	.LBB97:
 1245              	.LBI97:
 234:Src/interface_can.cpp ****     // Stop FDCAN peripheral
 1246              		.loc 1 234 6 is_stmt 1 view .LVU363
 1247              	.LBB98:
ARM GAS  /tmp/cchSd3uo.s 			page 33


 267:Src/interface_can.cpp ****             FDCAN_IT_RX_FIFO0_NEW_MESSAGE | 
 1248              		.loc 1 267 9 view .LVU364
 267:Src/interface_can.cpp ****             FDCAN_IT_RX_FIFO0_NEW_MESSAGE | 
 1249              		.loc 1 267 48 is_stmt 0 view .LVU365
 1250 0076 0E49     		ldr	r1, .L103+16
 1251 0078 2069     		ldr	r0, [r4, #16]
 1252              	.LVL90:
 267:Src/interface_can.cpp ****             FDCAN_IT_RX_FIFO0_NEW_MESSAGE | 
 1253              		.loc 1 267 48 view .LVU366
 1254 007a 3246     		mov	r2, r6
 1255              	.LBE98:
 1256              	.LBE97:
 1257              	.LBE101:
 1258              	.LBE103:
 233:Src/interface_can.cpp **** void ODriveCAN::reinit_can() {
 1259              		.loc 1 233 1 view .LVU367
 1260 007c 03B0     		add	sp, sp, #12
 1261              	.LCFI28:
 1262              		.cfi_remember_state
 1263              		.cfi_def_cfa_offset 20
 1264              		@ sp needed
 1265 007e BDE8F040 		pop	{r4, r5, r6, r7, lr}
 1266              	.LCFI29:
 1267              		.cfi_restore 14
 1268              		.cfi_restore 7
 1269              		.cfi_restore 6
 1270              		.cfi_restore 5
 1271              		.cfi_restore 4
 1272              		.cfi_def_cfa_offset 0
 1273              	.LVL91:
 1274              	.LBB104:
 1275              	.LBB102:
 1276              	.LBB100:
 1277              	.LBB99:
 267:Src/interface_can.cpp ****             FDCAN_IT_RX_FIFO0_NEW_MESSAGE | 
 1278              		.loc 1 267 48 view .LVU368
 1279 0082 FFF7FEBF 		b	HAL_FDCAN_ActivateNotification
 1280              	.LVL92:
 1281              	.L90:
 1282              	.LCFI30:
 1283              		.cfi_restore_state
 267:Src/interface_can.cpp ****             FDCAN_IT_RX_FIFO0_NEW_MESSAGE | 
 1284              		.loc 1 267 48 view .LVU369
 1285              	.LBE99:
 1286              	.LBE100:
 1287              	.LBE102:
 1288              	.LBE104:
 193:Src/interface_can.cpp ****             handle_->Init.NominalPrescaler = 16;    // 21 TQ's
 1289              		.loc 1 193 9 is_stmt 1 view .LVU370
 194:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 1290              		.loc 1 194 13 view .LVU371
 1291 0086 0069     		ldr	r0, [r0, #16]
 1292              	.LVL93:
 194:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 1293              		.loc 1 194 44 is_stmt 0 view .LVU372
 1294 0088 1023     		movs	r3, #16
 195:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg2 = 2;
ARM GAS  /tmp/cchSd3uo.s 			page 34


 1295              		.loc 1 195 43 view .LVU373
 1296 008a 0D27     		movs	r7, #13
 196:Src/interface_can.cpp ****             handle_->Init.NominalSyncJumpWidth = 1;
 1297              		.loc 1 196 43 view .LVU374
 1298 008c 0225     		movs	r5, #2
 194:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 1299              		.loc 1 194 44 view .LVU375
 1300 008e 4361     		str	r3, [r0, #20]
 195:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg2 = 2;
 1301              		.loc 1 195 13 is_stmt 1 view .LVU376
 1302 0090 C8E7     		b	.L99
 1303              	.LVL94:
 1304              	.L88:
 211:Src/interface_can.cpp ****             handle_->Init.NominalPrescaler = 4;     // 21 TQ's
 1305              		.loc 1 211 9 view .LVU377
 212:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 1306              		.loc 1 212 13 view .LVU378
 1307 0092 0069     		ldr	r0, [r0, #16]
 1308              	.LVL95:
 212:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 1309              		.loc 1 212 44 is_stmt 0 view .LVU379
 1310 0094 0423     		movs	r3, #4
 213:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg2 = 2;
 1311              		.loc 1 213 43 view .LVU380
 1312 0096 0D27     		movs	r7, #13
 214:Src/interface_can.cpp ****             handle_->Init.NominalSyncJumpWidth = 1;
 1313              		.loc 1 214 43 view .LVU381
 1314 0098 0225     		movs	r5, #2
 212:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg1 = 13;     // 80% sample point
 1315              		.loc 1 212 44 view .LVU382
 1316 009a 4361     		str	r3, [r0, #20]
 213:Src/interface_can.cpp ****             handle_->Init.NominalTimeSeg2 = 2;
 1317              		.loc 1 213 13 is_stmt 1 view .LVU383
 1318 009c C2E7     		b	.L99
 1319              	.L104:
 1320 009e 00BF     		.align	2
 1321              	.L103:
 1322 00a0 20A10700 		.word	500000
 1323 00a4 48E80100 		.word	125000
 1324 00a8 90D00300 		.word	250000
 1325 00ac 40420F00 		.word	1000000
 1326 00b0 03000400 		.word	262147
 1327              		.cfi_endproc
 1328              	.LFE5620:
 1330              		.section	.text._ZN9ODriveCAN10reinit_canEv,"ax",%progbits
 1331              		.align	1
 1332              		.p2align 2,,3
 1333              		.global	_ZN9ODriveCAN10reinit_canEv
 1334              		.syntax unified
 1335              		.thumb
 1336              		.thumb_func
 1337              		.fpu fpv4-sp-d16
 1339              	_ZN9ODriveCAN10reinit_canEv:
 1340              	.LVL96:
 1341              	.LFB5621:
 234:Src/interface_can.cpp ****     // Stop FDCAN peripheral
 1342              		.loc 1 234 30 view -0
ARM GAS  /tmp/cchSd3uo.s 			page 35


 1343              		.cfi_startproc
 1344              		@ args = 0, pretend = 0, frame = 0
 1345              		@ frame_needed = 0, uses_anonymous_args = 0
 236:Src/interface_can.cpp ****     
 1346              		.loc 1 236 5 view .LVU385
 234:Src/interface_can.cpp ****     // Stop FDCAN peripheral
 1347              		.loc 1 234 30 is_stmt 0 view .LVU386
 1348 0000 70B5     		push	{r4, r5, r6, lr}
 1349              	.LCFI31:
 1350              		.cfi_def_cfa_offset 16
 1351              		.cfi_offset 4, -16
 1352              		.cfi_offset 5, -12
 1353              		.cfi_offset 6, -8
 1354              		.cfi_offset 14, -4
 1355 0002 0446     		mov	r4, r0
 1356 0004 82B0     		sub	sp, sp, #8
 1357              	.LCFI32:
 1358              		.cfi_def_cfa_offset 24
 236:Src/interface_can.cpp ****     
 1359              		.loc 1 236 19 view .LVU387
 1360 0006 0069     		ldr	r0, [r0, #16]
 1361              	.LVL97:
 236:Src/interface_can.cpp ****     
 1362              		.loc 1 236 19 view .LVU388
 1363 0008 FFF7FEFF 		bl	HAL_FDCAN_Stop
 1364              	.LVL98:
 239:Src/interface_can.cpp ****     handle_->Init.Mode = FDCAN_MODE_NORMAL;
 1365              		.loc 1 239 5 is_stmt 1 view .LVU389
 1366 000c 2069     		ldr	r0, [r4, #16]
 241:Src/interface_can.cpp ****     handle_->Init.TransmitPause = DISABLE;
 1367              		.loc 1 241 38 is_stmt 0 view .LVU390
 1368 000e 0126     		movs	r6, #1
 248:Src/interface_can.cpp ****     handle_->Init.NominalTimeSeg2 = 2;
 1369              		.loc 1 248 35 view .LVU391
 1370 0010 0D23     		movs	r3, #13
 239:Src/interface_can.cpp ****     handle_->Init.Mode = FDCAN_MODE_NORMAL;
 1371              		.loc 1 239 31 view .LVU392
 1372 0012 0025     		movs	r5, #0
 248:Src/interface_can.cpp ****     handle_->Init.NominalTimeSeg2 = 2;
 1373              		.loc 1 248 35 view .LVU393
 1374 0014 C0E90663 		strd	r6, r3, [r0, #24]
 249:Src/interface_can.cpp ****     
 1375              		.loc 1 249 35 view .LVU394
 1376 0018 0223     		movs	r3, #2
 1377 001a 0362     		str	r3, [r0, #32]
 240:Src/interface_can.cpp ****     handle_->Init.AutoRetransmission = ENABLE;
 1378              		.loc 1 240 24 view .LVU395
 1379 001c C0E90255 		strd	r5, r5, [r0, #8]
 241:Src/interface_can.cpp ****     handle_->Init.TransmitPause = DISABLE;
 1380              		.loc 1 241 5 is_stmt 1 view .LVU396
 242:Src/interface_can.cpp ****     handle_->Init.ProtocolException = DISABLE;
 1381              		.loc 1 242 5 view .LVU397
 241:Src/interface_can.cpp ****     handle_->Init.TransmitPause = DISABLE;
 1382              		.loc 1 241 38 is_stmt 0 view .LVU398
 1383 0020 0682     		strh	r6, [r0, #16]	@ movhi
 243:Src/interface_can.cpp ****     
 1384              		.loc 1 243 5 is_stmt 1 view .LVU399
ARM GAS  /tmp/cchSd3uo.s 			page 36


 243:Src/interface_can.cpp ****     
 1385              		.loc 1 243 37 is_stmt 0 view .LVU400
 1386 0022 8574     		strb	r5, [r0, #18]
 246:Src/interface_can.cpp ****     handle_->Init.NominalSyncJumpWidth = 1;
 1387              		.loc 1 246 5 is_stmt 1 view .LVU401
 247:Src/interface_can.cpp ****     handle_->Init.NominalTimeSeg1 = 13; // 80% sample point
 1388              		.loc 1 247 5 view .LVU402
 249:Src/interface_can.cpp ****     
 1389              		.loc 1 249 5 view .LVU403
 252:Src/interface_can.cpp ****     
 1390              		.loc 1 252 5 view .LVU404
 252:Src/interface_can.cpp ****     
 1391              		.loc 1 252 19 is_stmt 0 view .LVU405
 1392 0024 FFF7FEFF 		bl	HAL_FDCAN_Init
 1393              	.LVL99:
 255:Src/interface_can.cpp ****                                 FDCAN_ACCEPT_IN_RX_FIFO0,  // Non-matching frames
 1394              		.loc 1 255 5 is_stmt 1 view .LVU406
 255:Src/interface_can.cpp ****                                 FDCAN_ACCEPT_IN_RX_FIFO0,  // Non-matching frames
 1395              		.loc 1 255 33 is_stmt 0 view .LVU407
 1396 0028 0322     		movs	r2, #3
 1397 002a 0092     		str	r2, [sp]
 1398 002c 2069     		ldr	r0, [r4, #16]
 1399 002e 2B46     		mov	r3, r5
 1400 0030 2A46     		mov	r2, r5
 1401 0032 2946     		mov	r1, r5
 1402 0034 FFF7FEFF 		bl	HAL_FDCAN_ConfigGlobalFilter
 1403              	.LVL100:
 262:Src/interface_can.cpp ****     
 1404              		.loc 1 262 5 is_stmt 1 view .LVU408
 262:Src/interface_can.cpp ****     
 1405              		.loc 1 262 47 is_stmt 0 view .LVU409
 1406 0038 2069     		ldr	r0, [r4, #16]
 1407 003a FFF7FEFF 		bl	HAL_FDCAN_Start
 1408              	.LVL101:
 264:Src/interface_can.cpp ****         // Enable notifications for new messages
 1409              		.loc 1 264 5 is_stmt 1 view .LVU410
 1410 003e 08B1     		cbz	r0, .L108
 1411              		.loc 1 273 1 is_stmt 0 view .LVU411
 1412 0040 02B0     		add	sp, sp, #8
 1413              	.LCFI33:
 1414              		.cfi_remember_state
 1415              		.cfi_def_cfa_offset 16
 1416              		@ sp needed
 1417 0042 70BD     		pop	{r4, r5, r6, pc}
 1418              	.LVL102:
 1419              	.L108:
 1420              	.LCFI34:
 1421              		.cfi_restore_state
 1422              	.LBB107:
 1423              	.LBI107:
 234:Src/interface_can.cpp ****     // Stop FDCAN peripheral
 1424              		.loc 1 234 6 is_stmt 1 view .LVU412
 1425              	.LBB108:
 267:Src/interface_can.cpp ****             FDCAN_IT_RX_FIFO0_NEW_MESSAGE | 
 1426              		.loc 1 267 9 view .LVU413
 267:Src/interface_can.cpp ****             FDCAN_IT_RX_FIFO0_NEW_MESSAGE | 
 1427              		.loc 1 267 48 is_stmt 0 view .LVU414
ARM GAS  /tmp/cchSd3uo.s 			page 37


 1428 0044 0349     		ldr	r1, .L109
 1429 0046 2069     		ldr	r0, [r4, #16]
 1430              	.LVL103:
 267:Src/interface_can.cpp ****             FDCAN_IT_RX_FIFO0_NEW_MESSAGE | 
 1431              		.loc 1 267 48 view .LVU415
 1432 0048 3246     		mov	r2, r6
 1433              	.LBE108:
 1434              	.LBE107:
 1435              		.loc 1 273 1 view .LVU416
 1436 004a 02B0     		add	sp, sp, #8
 1437              	.LCFI35:
 1438              		.cfi_def_cfa_offset 16
 1439              		@ sp needed
 1440 004c BDE87040 		pop	{r4, r5, r6, lr}
 1441              	.LCFI36:
 1442              		.cfi_restore 14
 1443              		.cfi_restore 6
 1444              		.cfi_restore 5
 1445              		.cfi_restore 4
 1446              		.cfi_def_cfa_offset 0
 1447              	.LVL104:
 1448              	.LBB110:
 1449              	.LBB109:
 267:Src/interface_can.cpp ****             FDCAN_IT_RX_FIFO0_NEW_MESSAGE | 
 1450              		.loc 1 267 48 view .LVU417
 1451 0050 FFF7FEBF 		b	HAL_FDCAN_ActivateNotification
 1452              	.LVL105:
 1453              	.L110:
 1454              		.align	2
 1455              	.L109:
 1456 0054 03000400 		.word	262147
 1457              	.LBE109:
 1458              	.LBE110:
 1459              		.cfi_endproc
 1460              	.LFE5621:
 1462              		.section	.text._ZN9ODriveCAN9set_errorEN10ODriveIntf7CanIntf5ErrorE,"ax",%progbits
 1463              		.align	1
 1464              		.p2align 2,,3
 1465              		.global	_ZN9ODriveCAN9set_errorEN10ODriveIntf7CanIntf5ErrorE
 1466              		.syntax unified
 1467              		.thumb
 1468              		.thumb_func
 1469              		.fpu fpv4-sp-d16
 1471              	_ZN9ODriveCAN9set_errorEN10ODriveIntf7CanIntf5ErrorE:
 1472              	.LVL106:
 1473              	.LFB5622:
 274:Src/interface_can.cpp **** void ODriveCAN::set_error(Error error) {
 1474              		.loc 1 274 40 is_stmt 1 view -0
 1475              		.cfi_startproc
 1476              		@ args = 0, pretend = 0, frame = 0
 1477              		@ frame_needed = 0, uses_anonymous_args = 0
 1478              		@ link register save eliminated.
 275:Src/interface_can.cpp ****     error_ = error;
 1479              		.loc 1 275 5 view .LVU419
 1480              		.loc 1 275 12 is_stmt 0 view .LVU420
 1481 0000 0172     		strb	r1, [r0, #8]
 276:Src/interface_can.cpp **** }
ARM GAS  /tmp/cchSd3uo.s 			page 38


 1482              		.loc 1 276 1 view .LVU421
 1483 0002 7047     		bx	lr
 1484              		.cfi_endproc
 1485              	.LFE5622:
 1487              		.section	.text._ZN9ODriveCAN14send_heartbeatEP4Axis,"ax",%progbits
 1488              		.align	1
 1489              		.p2align 2,,3
 1490              		.global	_ZN9ODriveCAN14send_heartbeatEP4Axis
 1491              		.syntax unified
 1492              		.thumb
 1493              		.thumb_func
 1494              		.fpu fpv4-sp-d16
 1496              	_ZN9ODriveCAN14send_heartbeatEP4Axis:
 1497              	.LVL107:
 1498              	.LFB5623:
 277:Src/interface_can.cpp **** // This function is called by each axis.
 278:Src/interface_can.cpp **** // It provides an abstraction from the specific CAN protocol in use
 279:Src/interface_can.cpp **** void ODriveCAN::send_heartbeat(Axis *axis) {
 1499              		.loc 1 279 44 is_stmt 1 view -0
 1500              		.cfi_startproc
 1501              		@ args = 0, pretend = 0, frame = 0
 1502              		@ frame_needed = 0, uses_anonymous_args = 0
 280:Src/interface_can.cpp ****     // Handle heartbeat message
 281:Src/interface_can.cpp ****     if (axis->config_.can_heartbeat_rate_ms > 0) {
 1503              		.loc 1 281 5 view .LVU423
 1504              	.LBB111:
 1505              		.loc 1 281 23 is_stmt 0 view .LVU424
 1506 0000 4B68     		ldr	r3, [r1, #4]
 1507              		.loc 1 281 5 view .LVU425
 1508 0002 9B6F     		ldr	r3, [r3, #120]
 1509 0004 03B9     		cbnz	r3, .L120
 1510 0006 7047     		bx	lr
 1511              	.L120:
 1512              	.LBE111:
 279:Src/interface_can.cpp ****     // Handle heartbeat message
 1513              		.loc 1 279 44 view .LVU426
 1514 0008 10B5     		push	{r4, lr}
 1515              	.LCFI37:
 1516              		.cfi_def_cfa_offset 8
 1517              		.cfi_offset 4, -8
 1518              		.cfi_offset 14, -4
 1519 000a 0C46     		mov	r4, r1
 1520              	.LBB113:
 1521              	.LBB112:
 282:Src/interface_can.cpp ****         uint32_t now = osKernelSysTick();
 1522              		.loc 1 282 9 is_stmt 1 view .LVU427
 1523              		.loc 1 282 39 is_stmt 0 view .LVU428
 1524 000c FFF7FEFF 		bl	osKernelSysTick
 1525              	.LVL108:
 283:Src/interface_can.cpp ****         if ((now - axis->last_heartbeat_) >= axis->config_.can_heartbeat_rate_ms) {
 1526              		.loc 1 283 60 view .LVU429
 1527 0010 6268     		ldr	r2, [r4, #4]
 1528              		.loc 1 283 18 view .LVU430
 1529 0012 D4F8A431 		ldr	r3, [r4, #420]
 1530              	.LVL109:
 1531              		.loc 1 283 9 is_stmt 1 view .LVU431
 1532 0016 926F     		ldr	r2, [r2, #120]
ARM GAS  /tmp/cchSd3uo.s 			page 39


 1533              		.loc 1 283 18 is_stmt 0 view .LVU432
 1534 0018 C31A     		subs	r3, r0, r3
 1535              		.loc 1 283 9 view .LVU433
 1536 001a 9342     		cmp	r3, r2
 284:Src/interface_can.cpp ****             switch (config_.protocol) {
 1537              		.loc 1 284 13 is_stmt 1 view .LVU434
 285:Src/interface_can.cpp ****                 case PROTOCOL_SIMPLE:
 286:Src/interface_can.cpp ****                     break;
 287:Src/interface_can.cpp ****                 case PROTOCOL_ENCOS:
 288:Src/interface_can.cpp ****                     break;
 289:Src/interface_can.cpp **** 
 290:Src/interface_can.cpp ****                 default:
 291:Src/interface_can.cpp ****                     break;
 292:Src/interface_can.cpp **** 
 293:Src/interface_can.cpp ****             }
 294:Src/interface_can.cpp ****             axis->last_heartbeat_ = now;
 1538              		.loc 1 294 13 view .LVU435
 1539              		.loc 1 294 35 is_stmt 0 view .LVU436
 1540 001c 28BF     		it	cs
 1541 001e C4F8A401 		strcs	r0, [r4, #420]
 1542              	.LBE112:
 1543              	.LBE113:
 295:Src/interface_can.cpp ****         }
 296:Src/interface_can.cpp ****     }
 297:Src/interface_can.cpp **** }
 1544              		.loc 1 297 1 view .LVU437
 1545 0022 10BD     		pop	{r4, pc}
 1546              		.loc 1 297 1 view .LVU438
 1547              		.cfi_endproc
 1548              	.LFE5623:
 1550              		.section	.text.HAL_FDCAN_TxFifoEmptyCallback,"ax",%progbits
 1551              		.align	1
 1552              		.p2align 2,,3
 1553              		.global	HAL_FDCAN_TxFifoEmptyCallback
 1554              		.syntax unified
 1555              		.thumb
 1556              		.thumb_func
 1557              		.fpu fpv4-sp-d16
 1559              	HAL_FDCAN_TxFifoEmptyCallback:
 1560              	.LVL110:
 1561              	.LFB5624:
 298:Src/interface_can.cpp **** void HAL_FDCAN_TxFifoEmptyCallback(FDCAN_HandleTypeDef *hfdcan) {}
 1562              		.loc 1 298 65 is_stmt 1 view -0
 1563              		.cfi_startproc
 1564              		@ args = 0, pretend = 0, frame = 0
 1565              		@ frame_needed = 0, uses_anonymous_args = 0
 1566              		@ link register save eliminated.
 1567              		.loc 1 298 66 is_stmt 0 view .LVU440
 1568 0000 7047     		bx	lr
 1569              		.cfi_endproc
 1570              	.LFE5624:
 1572 0002 00BF     		.section	.text._Z34HAL_FDCAN_TxBufferCompleteCallbackP19FDCAN_HandleTypeDef,"ax",%progbits
 1573              		.align	1
 1574              		.p2align 2,,3
 1575              		.global	_Z34HAL_FDCAN_TxBufferCompleteCallbackP19FDCAN_HandleTypeDef
 1576              		.syntax unified
 1577              		.thumb
ARM GAS  /tmp/cchSd3uo.s 			page 40


 1578              		.thumb_func
 1579              		.fpu fpv4-sp-d16
 1581              	_Z34HAL_FDCAN_TxBufferCompleteCallbackP19FDCAN_HandleTypeDef:
 1582              	.LFB6264:
 1583              		.cfi_startproc
 1584              		@ args = 0, pretend = 0, frame = 0
 1585              		@ frame_needed = 0, uses_anonymous_args = 0
 1586              		@ link register save eliminated.
 1587 0000 7047     		bx	lr
 1588              		.cfi_endproc
 1589              	.LFE6264:
 1591 0002 00BF     		.section	.text._Z31HAL_FDCAN_TxBufferAbortCallbackP19FDCAN_HandleTypeDef,"ax",%progbits
 1592              		.align	1
 1593              		.p2align 2,,3
 1594              		.global	_Z31HAL_FDCAN_TxBufferAbortCallbackP19FDCAN_HandleTypeDef
 1595              		.syntax unified
 1596              		.thumb
 1597              		.thumb_func
 1598              		.fpu fpv4-sp-d16
 1600              	_Z31HAL_FDCAN_TxBufferAbortCallbackP19FDCAN_HandleTypeDef:
 1601              	.LFB6266:
 1602              		.cfi_startproc
 1603              		@ args = 0, pretend = 0, frame = 0
 1604              		@ frame_needed = 0, uses_anonymous_args = 0
 1605              		@ link register save eliminated.
 1606 0000 7047     		bx	lr
 1607              		.cfi_endproc
 1608              	.LFE6266:
 1610 0002 00BF     		.section	.text._Z25HAL_FDCAN_RxFifo0CallbackP19FDCAN_HandleTypeDef,"ax",%progbits
 1611              		.align	1
 1612              		.p2align 2,,3
 1613              		.global	_Z25HAL_FDCAN_RxFifo0CallbackP19FDCAN_HandleTypeDef
 1614              		.syntax unified
 1615              		.thumb
 1616              		.thumb_func
 1617              		.fpu fpv4-sp-d16
 1619              	_Z25HAL_FDCAN_RxFifo0CallbackP19FDCAN_HandleTypeDef:
 1620              	.LVL111:
 1621              	.LFB5627:
 299:Src/interface_can.cpp **** void HAL_FDCAN_TxBufferCompleteCallback(FDCAN_HandleTypeDef *hfdcan) {}
 300:Src/interface_can.cpp **** void HAL_FDCAN_TxBufferAbortCallback(FDCAN_HandleTypeDef *hfdcan) {}
 301:Src/interface_can.cpp **** void HAL_FDCAN_RxFifo0Callback(FDCAN_HandleTypeDef *hfdcan) {
 1622              		.loc 1 301 61 is_stmt 1 view -0
 1623              		.cfi_startproc
 1624              		@ args = 0, pretend = 0, frame = 0
 1625              		@ frame_needed = 0, uses_anonymous_args = 0
 302:Src/interface_can.cpp ****     HAL_FDCAN_DeactivateNotification(hfdcan, FDCAN_IT_RX_FIFO0_NEW_MESSAGE);
 1626              		.loc 1 302 5 view .LVU442
 301:Src/interface_can.cpp ****     HAL_FDCAN_DeactivateNotification(hfdcan, FDCAN_IT_RX_FIFO0_NEW_MESSAGE);
 1627              		.loc 1 301 61 is_stmt 0 view .LVU443
 1628 0000 08B5     		push	{r3, lr}
 1629              	.LCFI38:
 1630              		.cfi_def_cfa_offset 8
 1631              		.cfi_offset 3, -8
 1632              		.cfi_offset 14, -4
 1633              		.loc 1 302 37 view .LVU444
 1634 0002 0121     		movs	r1, #1
ARM GAS  /tmp/cchSd3uo.s 			page 41


 1635 0004 FFF7FEFF 		bl	HAL_FDCAN_DeactivateNotification
 1636              	.LVL112:
 303:Src/interface_can.cpp ****     osSemaphoreRelease(sem_can);
 1637              		.loc 1 303 5 is_stmt 1 view .LVU445
 1638              		.loc 1 303 23 is_stmt 0 view .LVU446
 1639 0008 024B     		ldr	r3, .L126
 1640 000a 1868     		ldr	r0, [r3]
 304:Src/interface_can.cpp **** }
 1641              		.loc 1 304 1 view .LVU447
 1642 000c BDE80840 		pop	{r3, lr}
 1643              	.LCFI39:
 1644              		.cfi_restore 14
 1645              		.cfi_restore 3
 1646              		.cfi_def_cfa_offset 0
 303:Src/interface_can.cpp ****     osSemaphoreRelease(sem_can);
 1647              		.loc 1 303 23 view .LVU448
 1648 0010 FFF7FEBF 		b	osSemaphoreRelease
 1649              	.LVL113:
 1650              	.L127:
 1651              		.align	2
 1652              	.L126:
 1653 0014 00000000 		.word	sem_can
 1654              		.cfi_endproc
 1655              	.LFE5627:
 1657              		.section	.text._Z29HAL_FDCAN_RxFifo0FullCallbackP19FDCAN_HandleTypeDef,"ax",%progbits
 1658              		.align	1
 1659              		.p2align 2,,3
 1660              		.global	_Z29HAL_FDCAN_RxFifo0FullCallbackP19FDCAN_HandleTypeDef
 1661              		.syntax unified
 1662              		.thumb
 1663              		.thumb_func
 1664              		.fpu fpv4-sp-d16
 1666              	_Z29HAL_FDCAN_RxFifo0FullCallbackP19FDCAN_HandleTypeDef:
 1667              	.LFB6268:
 1668              		.cfi_startproc
 1669              		@ args = 0, pretend = 0, frame = 0
 1670              		@ frame_needed = 0, uses_anonymous_args = 0
 1671              		@ link register save eliminated.
 1672 0000 7047     		bx	lr
 1673              		.cfi_endproc
 1674              	.LFE6268:
 1676 0002 00BF     		.section	.text._Z27HAL_CAN_RxFifo0FullCallbackP19FDCAN_HandleTypeDef,"ax",%progbits
 1677              		.align	1
 1678              		.p2align 2,,3
 1679              		.global	_Z27HAL_CAN_RxFifo0FullCallbackP19FDCAN_HandleTypeDef
 1680              		.syntax unified
 1681              		.thumb
 1682              		.thumb_func
 1683              		.fpu fpv4-sp-d16
 1685              	_Z27HAL_CAN_RxFifo0FullCallbackP19FDCAN_HandleTypeDef:
 1686              	.LFB6270:
 1687              		.cfi_startproc
 1688              		@ args = 0, pretend = 0, frame = 0
 1689              		@ frame_needed = 0, uses_anonymous_args = 0
 1690              		@ link register save eliminated.
 1691 0000 7047     		bx	lr
 1692              		.cfi_endproc
ARM GAS  /tmp/cchSd3uo.s 			page 42


 1693              	.LFE6270:
 1695 0002 00BF     		.section	.text._Z25HAL_FDCAN_RxFifo1CallbackP19FDCAN_HandleTypeDef,"ax",%progbits
 1696              		.align	1
 1697              		.p2align 2,,3
 1698              		.global	_Z25HAL_FDCAN_RxFifo1CallbackP19FDCAN_HandleTypeDef
 1699              		.syntax unified
 1700              		.thumb
 1701              		.thumb_func
 1702              		.fpu fpv4-sp-d16
 1704              	_Z25HAL_FDCAN_RxFifo1CallbackP19FDCAN_HandleTypeDef:
 1705              	.LFB6272:
 1706              		.cfi_startproc
 1707              		@ args = 0, pretend = 0, frame = 0
 1708              		@ frame_needed = 0, uses_anonymous_args = 0
 1709              		@ link register save eliminated.
 1710 0000 7047     		bx	lr
 1711              		.cfi_endproc
 1712              	.LFE6272:
 1714 0002 00BF     		.section	.text._Z29HAL_FDCAN_RxFifo1FullCallbackP19FDCAN_HandleTypeDef,"ax",%progbits
 1715              		.align	1
 1716              		.p2align 2,,3
 1717              		.global	_Z29HAL_FDCAN_RxFifo1FullCallbackP19FDCAN_HandleTypeDef
 1718              		.syntax unified
 1719              		.thumb
 1720              		.thumb_func
 1721              		.fpu fpv4-sp-d16
 1723              	_Z29HAL_FDCAN_RxFifo1FullCallbackP19FDCAN_HandleTypeDef:
 1724              	.LFB6274:
 1725              		.cfi_startproc
 1726              		@ args = 0, pretend = 0, frame = 0
 1727              		@ frame_needed = 0, uses_anonymous_args = 0
 1728              		@ link register save eliminated.
 1729 0000 7047     		bx	lr
 1730              		.cfi_endproc
 1731              	.LFE6274:
 1733 0002 00BF     		.section	.text._Z23HAL_FDCAN_SleepCallbackP19FDCAN_HandleTypeDef,"ax",%progbits
 1734              		.align	1
 1735              		.p2align 2,,3
 1736              		.global	_Z23HAL_FDCAN_SleepCallbackP19FDCAN_HandleTypeDef
 1737              		.syntax unified
 1738              		.thumb
 1739              		.thumb_func
 1740              		.fpu fpv4-sp-d16
 1742              	_Z23HAL_FDCAN_SleepCallbackP19FDCAN_HandleTypeDef:
 1743              	.LFB6276:
 1744              		.cfi_startproc
 1745              		@ args = 0, pretend = 0, frame = 0
 1746              		@ frame_needed = 0, uses_anonymous_args = 0
 1747              		@ link register save eliminated.
 1748 0000 7047     		bx	lr
 1749              		.cfi_endproc
 1750              	.LFE6276:
 1752 0002 00BF     		.section	.text._Z33HAL_FDCAN_WakeUpFromRxMsgCallbackP19FDCAN_HandleTypeDef,"ax",%progbits
 1753              		.align	1
 1754              		.p2align 2,,3
 1755              		.global	_Z33HAL_FDCAN_WakeUpFromRxMsgCallbackP19FDCAN_HandleTypeDef
 1756              		.syntax unified
ARM GAS  /tmp/cchSd3uo.s 			page 43


 1757              		.thumb
 1758              		.thumb_func
 1759              		.fpu fpv4-sp-d16
 1761              	_Z33HAL_FDCAN_WakeUpFromRxMsgCallbackP19FDCAN_HandleTypeDef:
 1762              	.LFB6278:
 1763              		.cfi_startproc
 1764              		@ args = 0, pretend = 0, frame = 0
 1765              		@ frame_needed = 0, uses_anonymous_args = 0
 1766              		@ link register save eliminated.
 1767 0000 7047     		bx	lr
 1768              		.cfi_endproc
 1769              	.LFE6278:
 1771 0002 00BF     		.section	.text.HAL_FDCAN_ErrorCallback,"ax",%progbits
 1772              		.align	1
 1773              		.p2align 2,,3
 1774              		.global	HAL_FDCAN_ErrorCallback
 1775              		.syntax unified
 1776              		.thumb
 1777              		.thumb_func
 1778              		.fpu fpv4-sp-d16
 1780              	HAL_FDCAN_ErrorCallback:
 1781              	.LVL114:
 1782              	.LFB5634:
 305:Src/interface_can.cpp **** void HAL_FDCAN_RxFifo0FullCallback(FDCAN_HandleTypeDef *hfdcan) {
 306:Src/interface_can.cpp ****     // osSemaphoreRelease(sem_can);
 307:Src/interface_can.cpp **** }
 308:Src/interface_can.cpp **** void HAL_CAN_RxFifo0FullCallback(FDCAN_HandleTypeDef *hcan) {
 309:Src/interface_can.cpp ****     // osSemaphoreRelease(sem_can);
 310:Src/interface_can.cpp **** }
 311:Src/interface_can.cpp **** void HAL_FDCAN_RxFifo1Callback(FDCAN_HandleTypeDef *hcan) {}
 312:Src/interface_can.cpp **** void HAL_FDCAN_RxFifo1FullCallback(FDCAN_HandleTypeDef *hcan) {}
 313:Src/interface_can.cpp **** void HAL_FDCAN_SleepCallback(FDCAN_HandleTypeDef *hcan) {}
 314:Src/interface_can.cpp **** void HAL_FDCAN_WakeUpFromRxMsgCallback(FDCAN_HandleTypeDef *hcan) {}
 315:Src/interface_can.cpp **** void HAL_FDCAN_ErrorCallback(FDCAN_HandleTypeDef *hcan) {
 1783              		.loc 1 315 57 is_stmt 1 view -0
 1784              		.cfi_startproc
 1785              		@ args = 0, pretend = 0, frame = 0
 1786              		@ frame_needed = 0, uses_anonymous_args = 0
 316:Src/interface_can.cpp ****     uint32_t CounterStartValue = 0;
 1787              		.loc 1 316 5 view .LVU450
 317:Src/interface_can.cpp ****     HAL_FDCAN_ConfigRamWatchdog(hcan, CounterStartValue);
 1788              		.loc 1 317 5 view .LVU451
 315:Src/interface_can.cpp ****     uint32_t CounterStartValue = 0;
 1789              		.loc 1 315 57 is_stmt 0 view .LVU452
 1790 0000 10B5     		push	{r4, lr}
 1791              	.LCFI40:
 1792              		.cfi_def_cfa_offset 8
 1793              		.cfi_offset 4, -8
 1794              		.cfi_offset 14, -4
 315:Src/interface_can.cpp ****     uint32_t CounterStartValue = 0;
 1795              		.loc 1 315 57 view .LVU453
 1796 0002 0446     		mov	r4, r0
 1797              		.loc 1 317 32 view .LVU454
 1798 0004 0021     		movs	r1, #0
 1799 0006 FFF7FEFF 		bl	HAL_FDCAN_ConfigRamWatchdog
 1800              	.LVL115:
 318:Src/interface_can.cpp ****     
ARM GAS  /tmp/cchSd3uo.s 			page 44


 319:Src/interface_can.cpp ****     // Clear error flags in ECR register
 320:Src/interface_can.cpp ****     CLEAR_BIT(hcan->Instance->ECR, (FDCAN_ECR_TEC | FDCAN_ECR_REC));
 1801              		.loc 1 320 5 is_stmt 1 view .LVU455
 1802 000a 2268     		ldr	r2, [r4]
 1803 000c 136C     		ldr	r3, [r2, #64]
 1804 000e 23F4FF43 		bic	r3, r3, #32640
 1805 0012 23F07F03 		bic	r3, r3, #127
 1806 0016 1364     		str	r3, [r2, #64]
 321:Src/interface_can.cpp **** }
 1807              		.loc 1 321 1 is_stmt 0 view .LVU456
 1808 0018 10BD     		pop	{r4, pc}
 1809              		.loc 1 321 1 view .LVU457
 1810              		.cfi_endproc
 1811              	.LFE5634:
 1813 001a 00BF     		.section	.rodata
 1814              		.align	2
 1815              		.set	.LANCHOR0,. + 0
 1816              	.LC0:
 1817 0000 00000000 		.word	0
 1818 0004 00       		.byte	0
 1819 0005 00       		.byte	0
 1820 0006 08       		.byte	8
 1821 0007 00000000 		.ascii	"\000\000\000\000\000\000\000\000"
 1821      00000000 
 1822 000f 00       		.space	1
 1823              		.text
 1824              	.Letext0:
 1825              		.file 2 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/lib/gcc/arm-none-eabi/10.2.1/include/stddef
 1826              		.file 3 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/machine/_default_type
 1827              		.file 4 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/sys/_stdint.h"
 1828              		.file 5 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/stdint.h"
 1829              		.file 6 "Middlewares/Third_Party/FreeRTOS/Source/include/task.h"
 1830              		.file 7 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 1831              		.file 8 "Middlewares/Third_Party/FreeRTOS/Source/include/semphr.h"
 1832              		.file 9 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 1833              		.file 10 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g431xx.h"
 1834              		.file 11 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g4xx.h"
 1835              		.file 12 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_def.h"
 1836              		.file 13 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_fdcan.h"
 1837              		.file 14 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/type_trai
 1838              		.file 15 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/arm-none-
 1839              		.file 16 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/debug/deb
 1840              		.file 17 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/cstdlib"
 1841              		.file 18 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/bits/algo
 1842              		.file 19 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/bits/exce
 1843              		.file 20 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/bits/std_
 1844              		.file 21 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/bits/stl_
 1845              		.file 22 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/functiona
 1846              		.file 23 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/cstring"
 1847              		.file 24 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/cwchar"
 1848              		.file 25 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/clocale"
 1849              		.file 26 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/cstdint"
 1850              		.file 27 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/string_vi
 1851              		.file 28 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/bits/basi
 1852              		.file 29 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/cstdio"
 1853              		.file 30 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/cmath"
 1854              		.file 31 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/bits/std_
ARM GAS  /tmp/cchSd3uo.s 			page 45


 1855              		.file 32 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/array"
 1856              		.file 33 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/bits/stl_
 1857              		.file 34 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/bits/pred
 1858              		.file 35 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/sys/_types.h"
 1859              		.file 36 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/bits/refw
 1860              		.file 37 "<built-in>"
 1861              		.file 38 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/sys/reent.h"
 1862              		.file 39 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/sys/lock.h"
 1863              		.file 40 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/stdlib.h"
 1864              		.file 41 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/pstl/exec
 1865              		.file 42 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/string.h"
 1866              		.file 43 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/lib/gcc/arm-none-eabi/10.2.1/include/stdar
 1867              		.file 44 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/wchar.h"
 1868              		.file 45 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/locale.h"
 1869              		.file 46 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/stdio.h"
 1870              		.file 47 "Inc/can_helpers.hpp"
 1871              		.file 48 "Inc/interfaces.hpp"
 1872              		.file 49 "Inc/interface_can.hpp"
 1873              		.file 50 "Inc/axis.hpp"
 1874              		.file 51 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/math.h"
 1875              		.file 52 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/c++/10.2.1/math.h"
 1876              		.file 53 "Inc/utils.hpp"
 1877              		.file 54 "Inc/can_encos.hpp"
 1878              		.file 55 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_ll_tim.h"
 1879              		.file 56 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_ll_usart.h"
 1880              		.file 57 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_ll_dma.h"
 1881              		.file 58 "Inc/task_timer.hpp"
 1882              		.file 59 "Inc/freertos_vars.h"
ARM GAS  /tmp/cchSd3uo.s 			page 46


DEFINED SYMBOLS
                            *ABS*:0000000000000000 interface_can.cpp
     /tmp/cchSd3uo.s:18     .text._ZN9ODriveCANC2ERNS_8Config_tEP19FDCAN_HandleTypeDef:0000000000000000 $t
     /tmp/cchSd3uo.s:27     .text._ZN9ODriveCANC2ERNS_8Config_tEP19FDCAN_HandleTypeDef:0000000000000000 _ZN9ODriveCANC2ERNS_8Config_tEP19FDCAN_HandleTypeDef
     /tmp/cchSd3uo.s:27     .text._ZN9ODriveCANC2ERNS_8Config_tEP19FDCAN_HandleTypeDef:0000000000000000 _ZN9ODriveCANC1ERNS_8Config_tEP19FDCAN_HandleTypeDef
     /tmp/cchSd3uo.s:66     .text._ZN9ODriveCAN17can_server_threadEv:0000000000000000 $t
     /tmp/cchSd3uo.s:74     .text._ZN9ODriveCAN17can_server_threadEv:0000000000000000 _ZN9ODriveCAN17can_server_threadEv
     /tmp/cchSd3uo.s:363    .text._ZN9ODriveCAN17can_server_threadEv:0000000000000104 $d
     /tmp/cchSd3uo.s:372    .text._ZL25can_server_thread_wrapperPv:0000000000000000 $t
     /tmp/cchSd3uo.s:379    .text._ZL25can_server_thread_wrapperPv:0000000000000000 _ZL25can_server_thread_wrapperPv
     /tmp/cchSd3uo.s:402    .rodata._ZN9ODriveCAN16start_can_serverEv.str1.4:0000000000000000 $d
     /tmp/cchSd3uo.s:406    .text._ZN9ODriveCAN16start_can_serverEv:0000000000000000 $t
     /tmp/cchSd3uo.s:414    .text._ZN9ODriveCAN16start_can_serverEv:0000000000000000 _ZN9ODriveCAN16start_can_serverEv
     /tmp/cchSd3uo.s:734    .text._ZN9ODriveCAN16start_can_serverEv:00000000000000fc $d
     /tmp/cchSd3uo.s:747    .text._ZN9ODriveCAN5writeER13can_Message_t:0000000000000000 $t
     /tmp/cchSd3uo.s:755    .text._ZN9ODriveCAN5writeER13can_Message_t:0000000000000000 _ZN9ODriveCAN5writeER13can_Message_t
     /tmp/cchSd3uo.s:901    .text._ZN9ODriveCAN9availableEv:0000000000000000 $t
     /tmp/cchSd3uo.s:909    .text._ZN9ODriveCAN9availableEv:0000000000000000 _ZN9ODriveCAN9availableEv
     /tmp/cchSd3uo.s:952    .text._ZN9ODriveCAN4readER13can_Message_t:0000000000000000 $t
     /tmp/cchSd3uo.s:960    .text._ZN9ODriveCAN4readER13can_Message_t:0000000000000000 _ZN9ODriveCAN4readER13can_Message_t
     /tmp/cchSd3uo.s:1085   .text._ZN9ODriveCAN13set_baud_rateEm:0000000000000000 $t
     /tmp/cchSd3uo.s:1093   .text._ZN9ODriveCAN13set_baud_rateEm:0000000000000000 _ZN9ODriveCAN13set_baud_rateEm
     /tmp/cchSd3uo.s:1322   .text._ZN9ODriveCAN13set_baud_rateEm:00000000000000a0 $d
     /tmp/cchSd3uo.s:1331   .text._ZN9ODriveCAN10reinit_canEv:0000000000000000 $t
     /tmp/cchSd3uo.s:1339   .text._ZN9ODriveCAN10reinit_canEv:0000000000000000 _ZN9ODriveCAN10reinit_canEv
     /tmp/cchSd3uo.s:1456   .text._ZN9ODriveCAN10reinit_canEv:0000000000000054 $d
     /tmp/cchSd3uo.s:1463   .text._ZN9ODriveCAN9set_errorEN10ODriveIntf7CanIntf5ErrorE:0000000000000000 $t
     /tmp/cchSd3uo.s:1471   .text._ZN9ODriveCAN9set_errorEN10ODriveIntf7CanIntf5ErrorE:0000000000000000 _ZN9ODriveCAN9set_errorEN10ODriveIntf7CanIntf5ErrorE
     /tmp/cchSd3uo.s:1488   .text._ZN9ODriveCAN14send_heartbeatEP4Axis:0000000000000000 $t
     /tmp/cchSd3uo.s:1496   .text._ZN9ODriveCAN14send_heartbeatEP4Axis:0000000000000000 _ZN9ODriveCAN14send_heartbeatEP4Axis
     /tmp/cchSd3uo.s:1551   .text.HAL_FDCAN_TxFifoEmptyCallback:0000000000000000 $t
     /tmp/cchSd3uo.s:1559   .text.HAL_FDCAN_TxFifoEmptyCallback:0000000000000000 HAL_FDCAN_TxFifoEmptyCallback
     /tmp/cchSd3uo.s:1573   .text._Z34HAL_FDCAN_TxBufferCompleteCallbackP19FDCAN_HandleTypeDef:0000000000000000 $t
     /tmp/cchSd3uo.s:1581   .text._Z34HAL_FDCAN_TxBufferCompleteCallbackP19FDCAN_HandleTypeDef:0000000000000000 _Z34HAL_FDCAN_TxBufferCompleteCallbackP19FDCAN_HandleTypeDef
     /tmp/cchSd3uo.s:1592   .text._Z31HAL_FDCAN_TxBufferAbortCallbackP19FDCAN_HandleTypeDef:0000000000000000 $t
     /tmp/cchSd3uo.s:1600   .text._Z31HAL_FDCAN_TxBufferAbortCallbackP19FDCAN_HandleTypeDef:0000000000000000 _Z31HAL_FDCAN_TxBufferAbortCallbackP19FDCAN_HandleTypeDef
     /tmp/cchSd3uo.s:1611   .text._Z25HAL_FDCAN_RxFifo0CallbackP19FDCAN_HandleTypeDef:0000000000000000 $t
     /tmp/cchSd3uo.s:1619   .text._Z25HAL_FDCAN_RxFifo0CallbackP19FDCAN_HandleTypeDef:0000000000000000 _Z25HAL_FDCAN_RxFifo0CallbackP19FDCAN_HandleTypeDef
     /tmp/cchSd3uo.s:1653   .text._Z25HAL_FDCAN_RxFifo0CallbackP19FDCAN_HandleTypeDef:0000000000000014 $d
     /tmp/cchSd3uo.s:1658   .text._Z29HAL_FDCAN_RxFifo0FullCallbackP19FDCAN_HandleTypeDef:0000000000000000 $t
     /tmp/cchSd3uo.s:1666   .text._Z29HAL_FDCAN_RxFifo0FullCallbackP19FDCAN_HandleTypeDef:0000000000000000 _Z29HAL_FDCAN_RxFifo0FullCallbackP19FDCAN_HandleTypeDef
     /tmp/cchSd3uo.s:1677   .text._Z27HAL_CAN_RxFifo0FullCallbackP19FDCAN_HandleTypeDef:0000000000000000 $t
     /tmp/cchSd3uo.s:1685   .text._Z27HAL_CAN_RxFifo0FullCallbackP19FDCAN_HandleTypeDef:0000000000000000 _Z27HAL_CAN_RxFifo0FullCallbackP19FDCAN_HandleTypeDef
     /tmp/cchSd3uo.s:1696   .text._Z25HAL_FDCAN_RxFifo1CallbackP19FDCAN_HandleTypeDef:0000000000000000 $t
     /tmp/cchSd3uo.s:1704   .text._Z25HAL_FDCAN_RxFifo1CallbackP19FDCAN_HandleTypeDef:0000000000000000 _Z25HAL_FDCAN_RxFifo1CallbackP19FDCAN_HandleTypeDef
     /tmp/cchSd3uo.s:1715   .text._Z29HAL_FDCAN_RxFifo1FullCallbackP19FDCAN_HandleTypeDef:0000000000000000 $t
     /tmp/cchSd3uo.s:1723   .text._Z29HAL_FDCAN_RxFifo1FullCallbackP19FDCAN_HandleTypeDef:0000000000000000 _Z29HAL_FDCAN_RxFifo1FullCallbackP19FDCAN_HandleTypeDef
     /tmp/cchSd3uo.s:1734   .text._Z23HAL_FDCAN_SleepCallbackP19FDCAN_HandleTypeDef:0000000000000000 $t
     /tmp/cchSd3uo.s:1742   .text._Z23HAL_FDCAN_SleepCallbackP19FDCAN_HandleTypeDef:0000000000000000 _Z23HAL_FDCAN_SleepCallbackP19FDCAN_HandleTypeDef
     /tmp/cchSd3uo.s:1753   .text._Z33HAL_FDCAN_WakeUpFromRxMsgCallbackP19FDCAN_HandleTypeDef:0000000000000000 $t
     /tmp/cchSd3uo.s:1761   .text._Z33HAL_FDCAN_WakeUpFromRxMsgCallbackP19FDCAN_HandleTypeDef:0000000000000000 _Z33HAL_FDCAN_WakeUpFromRxMsgCallbackP19FDCAN_HandleTypeDef
     /tmp/cchSd3uo.s:1772   .text.HAL_FDCAN_ErrorCallback:0000000000000000 $t
     /tmp/cchSd3uo.s:1780   .text.HAL_FDCAN_ErrorCallback:0000000000000000 HAL_FDCAN_ErrorCallback
     /tmp/cchSd3uo.s:1814   .rodata:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_FDCAN_GetError
ARM GAS  /tmp/cchSd3uo.s 			page 47


osSemaphoreWait
HAL_FDCAN_GetRxFifoFillLevel
HAL_FDCAN_GetRxMessage
_ZN8CANEncos18handle_can_messageER13can_Message_t
HAL_FDCAN_ActivateNotification
HAL_FDCAN_Stop
HAL_FDCAN_Start
sem_can
HAL_FDCAN_Init
HAL_FDCAN_ConfigGlobalFilter
osThreadCreate
HAL_FDCAN_GetTxFifoFreeLevel
HAL_FDCAN_AddMessageToTxFifoQ
osKernelSysTick
HAL_FDCAN_DeactivateNotification
osSemaphoreRelease
HAL_FDCAN_ConfigRamWatchdog
