ARM GAS  /tmp/ccj5OPZX.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 2
  13              		.file	"spi.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.MX_SPI1_Init,"ax",%progbits
  18              		.align	1
  19              		.global	MX_SPI1_Init
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	MX_SPI1_Init:
  27              	.LFB1988:
  28              		.file 1 "Src/spi.c"
   1:Src/spi.c     **** /**
   2:Src/spi.c     ****   ******************************************************************************
   3:Src/spi.c     ****   * File Name          : SPI.c
   4:Src/spi.c     ****   * Description        : This file provides code for the configuration
   5:Src/spi.c     ****   *                      of the SPI instances.
   6:Src/spi.c     ****   ******************************************************************************
   7:Src/spi.c     ****   * This notice applies to any and all portions of this file
   8:Src/spi.c     ****   * that are not between comment pairs USER CODE BEGIN and
   9:Src/spi.c     ****   * USER CODE END. Other portions of this file, whether 
  10:Src/spi.c     ****   * inserted by the user or by software development tools
  11:Src/spi.c     ****   * are owned by their respective copyright owners.
  12:Src/spi.c     ****   *
  13:Src/spi.c     ****   * Copyright (c) 2018 STMicroelectronics International N.V. 
  14:Src/spi.c     ****   * All rights reserved.
  15:Src/spi.c     ****   *
  16:Src/spi.c     ****   * Redistribution and use in source and binary forms, with or without 
  17:Src/spi.c     ****   * modification, are permitted, provided that the following conditions are met:
  18:Src/spi.c     ****   *
  19:Src/spi.c     ****   * 1. Redistribution of source code must retain the above copyright notice, 
  20:Src/spi.c     ****   *    this list of conditions and the following disclaimer.
  21:Src/spi.c     ****   * 2. Redistributions in binary form must reproduce the above copyright notice,
  22:Src/spi.c     ****   *    this list of conditions and the following disclaimer in the documentation
  23:Src/spi.c     ****   *    and/or other materials provided with the distribution.
  24:Src/spi.c     ****   * 3. Neither the name of STMicroelectronics nor the names of other 
  25:Src/spi.c     ****   *    contributors to this software may be used to endorse or promote products 
  26:Src/spi.c     ****   *    derived from this software without specific written permission.
  27:Src/spi.c     ****   * 4. This software, including modifications and/or derivative works of this 
  28:Src/spi.c     ****   *    software, must execute solely and exclusively on microcontroller or
  29:Src/spi.c     ****   *    microprocessor devices manufactured by or for STMicroelectronics.
  30:Src/spi.c     ****   * 5. Redistribution and use of this software other than as permitted under 
ARM GAS  /tmp/ccj5OPZX.s 			page 2


  31:Src/spi.c     ****   *    this license is void and will automatically terminate your rights under 
  32:Src/spi.c     ****   *    this license. 
  33:Src/spi.c     ****   *
  34:Src/spi.c     ****   * THIS SOFTWARE IS PROVIDED BY STMICROELECTRONICS AND CONTRIBUTORS "AS IS" 
  35:Src/spi.c     ****   * AND ANY EXPRESS, IMPLIED OR STATUTORY WARRANTIES, INCLUDING, BUT NOT 
  36:Src/spi.c     ****   * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A 
  37:Src/spi.c     ****   * PARTICULAR PURPOSE AND NON-INFRINGEMENT OF THIRD PARTY INTELLECTUAL PROPERTY
  38:Src/spi.c     ****   * RIGHTS ARE DISCLAIMED TO THE FULLEST EXTENT PERMITTED BY LAW. IN NO EVENT 
  39:Src/spi.c     ****   * SHALL STMICROELECTRONICS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
  40:Src/spi.c     ****   * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
  41:Src/spi.c     ****   * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, 
  42:Src/spi.c     ****   * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF 
  43:Src/spi.c     ****   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING 
  44:Src/spi.c     ****   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
  45:Src/spi.c     ****   * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  46:Src/spi.c     ****   *
  47:Src/spi.c     ****   ******************************************************************************
  48:Src/spi.c     ****   */
  49:Src/spi.c     **** 
  50:Src/spi.c     **** /* Includes ------------------------------------------------------------------*/
  51:Src/spi.c     **** #include "spi.h"
  52:Src/spi.c     **** 
  53:Src/spi.c     **** #include "gpio.h"
  54:Src/spi.c     **** #include "dma.h"
  55:Src/spi.c     **** 
  56:Src/spi.c     **** /* USER CODE BEGIN 0 */
  57:Src/spi.c     **** 
  58:Src/spi.c     **** /* USER CODE END 0 */
  59:Src/spi.c     **** 
  60:Src/spi.c     **** SPI_HandleTypeDef hspi3;
  61:Src/spi.c     **** DMA_HandleTypeDef hdma_spi3_tx;
  62:Src/spi.c     **** DMA_HandleTypeDef hdma_spi3_rx;
  63:Src/spi.c     **** 
  64:Src/spi.c     **** SPI_HandleTypeDef hspi1;
  65:Src/spi.c     **** DMA_HandleTypeDef hdma_spi1_rx;
  66:Src/spi.c     **** DMA_HandleTypeDef hdma_spi1_tx;
  67:Src/spi.c     **** 
  68:Src/spi.c     **** 
  69:Src/spi.c     **** 
  70:Src/spi.c     **** void MX_SPI1_Init(void)
  71:Src/spi.c     **** {
  29              		.loc 1 71 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 08B5     		push	{r3, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 3, -8
  37              		.cfi_offset 14, -4
  72:Src/spi.c     **** 
  73:Src/spi.c     ****   /* USER CODE BEGIN SPI1_Init 0 */
  74:Src/spi.c     **** 
  75:Src/spi.c     ****   /* USER CODE END SPI1_Init 0 */
  76:Src/spi.c     **** 
  77:Src/spi.c     ****   /* USER CODE BEGIN SPI1_Init 1 */
  78:Src/spi.c     **** 
ARM GAS  /tmp/ccj5OPZX.s 			page 3


  79:Src/spi.c     ****   /* USER CODE END SPI1_Init 1 */
  80:Src/spi.c     ****   /* SPI1 parameter configuration*/
  81:Src/spi.c     ****   hspi1.Instance = SPI1;
  38              		.loc 1 81 3 view .LVU1
  39              		.loc 1 81 18 is_stmt 0 view .LVU2
  40 0002 0F48     		ldr	r0, .L5
  41 0004 0F4B     		ldr	r3, .L5+4
  42 0006 0360     		str	r3, [r0]
  82:Src/spi.c     ****   hspi1.Init.Mode = SPI_MODE_MASTER;
  43              		.loc 1 82 3 is_stmt 1 view .LVU3
  44              		.loc 1 82 19 is_stmt 0 view .LVU4
  45 0008 4FF48273 		mov	r3, #260
  46 000c 4360     		str	r3, [r0, #4]
  83:Src/spi.c     ****   hspi1.Init.Direction = SPI_DIRECTION_2LINES;
  47              		.loc 1 83 3 is_stmt 1 view .LVU5
  48              		.loc 1 83 24 is_stmt 0 view .LVU6
  49 000e 0023     		movs	r3, #0
  50 0010 8360     		str	r3, [r0, #8]
  84:Src/spi.c     ****   hspi1.Init.DataSize = SPI_DATASIZE_8BIT;
  51              		.loc 1 84 3 is_stmt 1 view .LVU7
  52              		.loc 1 84 23 is_stmt 0 view .LVU8
  53 0012 4FF4E062 		mov	r2, #1792
  54 0016 C260     		str	r2, [r0, #12]
  85:Src/spi.c     ****   hspi1.Init.CLKPolarity = SPI_POLARITY_LOW;
  55              		.loc 1 85 3 is_stmt 1 view .LVU9
  56              		.loc 1 85 26 is_stmt 0 view .LVU10
  57 0018 0361     		str	r3, [r0, #16]
  86:Src/spi.c     ****   hspi1.Init.CLKPhase = SPI_PHASE_2EDGE;
  58              		.loc 1 86 3 is_stmt 1 view .LVU11
  59              		.loc 1 86 23 is_stmt 0 view .LVU12
  60 001a 0122     		movs	r2, #1
  61 001c 4261     		str	r2, [r0, #20]
  87:Src/spi.c     ****   hspi1.Init.NSS = SPI_NSS_SOFT;
  62              		.loc 1 87 3 is_stmt 1 view .LVU13
  63              		.loc 1 87 18 is_stmt 0 view .LVU14
  64 001e 4FF40072 		mov	r2, #512
  65 0022 8261     		str	r2, [r0, #24]
  88:Src/spi.c     ****   hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_16;
  66              		.loc 1 88 3 is_stmt 1 view .LVU15
  67              		.loc 1 88 32 is_stmt 0 view .LVU16
  68 0024 1822     		movs	r2, #24
  69 0026 C261     		str	r2, [r0, #28]
  89:Src/spi.c     ****   hspi1.Init.FirstBit = SPI_FIRSTBIT_MSB;
  70              		.loc 1 89 3 is_stmt 1 view .LVU17
  71              		.loc 1 89 23 is_stmt 0 view .LVU18
  72 0028 0362     		str	r3, [r0, #32]
  90:Src/spi.c     ****   hspi1.Init.TIMode = SPI_TIMODE_DISABLE;
  73              		.loc 1 90 3 is_stmt 1 view .LVU19
  74              		.loc 1 90 21 is_stmt 0 view .LVU20
  75 002a 4362     		str	r3, [r0, #36]
  91:Src/spi.c     ****   hspi1.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
  76              		.loc 1 91 3 is_stmt 1 view .LVU21
  77              		.loc 1 91 29 is_stmt 0 view .LVU22
  78 002c 8362     		str	r3, [r0, #40]
  92:Src/spi.c     ****   hspi1.Init.CRCPolynomial = 10;
  79              		.loc 1 92 3 is_stmt 1 view .LVU23
  80              		.loc 1 92 28 is_stmt 0 view .LVU24
ARM GAS  /tmp/ccj5OPZX.s 			page 4


  81 002e 0A23     		movs	r3, #10
  82 0030 C362     		str	r3, [r0, #44]
  93:Src/spi.c     ****   if (HAL_SPI_Init(&hspi1) != HAL_OK)
  83              		.loc 1 93 3 is_stmt 1 view .LVU25
  84              		.loc 1 93 7 is_stmt 0 view .LVU26
  85 0032 FFF7FEFF 		bl	HAL_SPI_Init
  86              	.LVL0:
  87              		.loc 1 93 6 view .LVU27
  88 0036 00B9     		cbnz	r0, .L4
  89              	.L1:
  94:Src/spi.c     ****   {
  95:Src/spi.c     ****     Error_Handler();
  96:Src/spi.c     ****   }
  97:Src/spi.c     ****   /* USER CODE BEGIN SPI1_Init 2 */
  98:Src/spi.c     **** 
  99:Src/spi.c     ****   /* USER CODE END SPI1_Init 2 */
 100:Src/spi.c     **** 
 101:Src/spi.c     **** }
  90              		.loc 1 101 1 view .LVU28
  91 0038 08BD     		pop	{r3, pc}
  92              	.L4:
  95:Src/spi.c     ****   }
  93              		.loc 1 95 5 is_stmt 1 view .LVU29
  94 003a FFF7FEFF 		bl	Error_Handler
  95              	.LVL1:
  96              		.loc 1 101 1 is_stmt 0 view .LVU30
  97 003e FBE7     		b	.L1
  98              	.L6:
  99              		.align	2
 100              	.L5:
 101 0040 00000000 		.word	.LANCHOR0
 102 0044 00300140 		.word	1073819648
 103              		.cfi_endproc
 104              	.LFE1988:
 106              		.section	.text.MX_SPI3_Init,"ax",%progbits
 107              		.align	1
 108              		.global	MX_SPI3_Init
 109              		.syntax unified
 110              		.thumb
 111              		.thumb_func
 112              		.fpu fpv4-sp-d16
 114              	MX_SPI3_Init:
 115              	.LFB1989:
 102:Src/spi.c     **** 
 103:Src/spi.c     **** 
 104:Src/spi.c     **** /* SPI3 init function */
 105:Src/spi.c     **** void MX_SPI3_Init(void)
 106:Src/spi.c     **** {
 116              		.loc 1 106 1 is_stmt 1 view -0
 117              		.cfi_startproc
 118              		@ args = 0, pretend = 0, frame = 0
 119              		@ frame_needed = 0, uses_anonymous_args = 0
 120 0000 08B5     		push	{r3, lr}
 121              	.LCFI1:
 122              		.cfi_def_cfa_offset 8
 123              		.cfi_offset 3, -8
 124              		.cfi_offset 14, -4
ARM GAS  /tmp/ccj5OPZX.s 			page 5


 107:Src/spi.c     **** 
 108:Src/spi.c     ****   hspi3.Instance = SPI3;
 125              		.loc 1 108 3 view .LVU32
 126              		.loc 1 108 18 is_stmt 0 view .LVU33
 127 0002 0F48     		ldr	r0, .L11
 128 0004 0F4B     		ldr	r3, .L11+4
 129 0006 0360     		str	r3, [r0]
 109:Src/spi.c     ****   hspi3.Init.Mode = SPI_MODE_MASTER;
 130              		.loc 1 109 3 is_stmt 1 view .LVU34
 131              		.loc 1 109 19 is_stmt 0 view .LVU35
 132 0008 4FF48273 		mov	r3, #260
 133 000c 4360     		str	r3, [r0, #4]
 110:Src/spi.c     ****   hspi3.Init.Direction = SPI_DIRECTION_2LINES;
 134              		.loc 1 110 3 is_stmt 1 view .LVU36
 135              		.loc 1 110 24 is_stmt 0 view .LVU37
 136 000e 0023     		movs	r3, #0
 137 0010 8360     		str	r3, [r0, #8]
 111:Src/spi.c     ****   hspi3.Init.DataSize = SPI_DATASIZE_16BIT;
 138              		.loc 1 111 3 is_stmt 1 view .LVU38
 139              		.loc 1 111 23 is_stmt 0 view .LVU39
 140 0012 4FF47062 		mov	r2, #3840
 141 0016 C260     		str	r2, [r0, #12]
 112:Src/spi.c     ****   hspi3.Init.CLKPolarity = SPI_POLARITY_LOW;
 142              		.loc 1 112 3 is_stmt 1 view .LVU40
 143              		.loc 1 112 26 is_stmt 0 view .LVU41
 144 0018 0361     		str	r3, [r0, #16]
 113:Src/spi.c     ****   hspi3.Init.CLKPhase = SPI_PHASE_2EDGE;
 145              		.loc 1 113 3 is_stmt 1 view .LVU42
 146              		.loc 1 113 23 is_stmt 0 view .LVU43
 147 001a 0122     		movs	r2, #1
 148 001c 4261     		str	r2, [r0, #20]
 114:Src/spi.c     ****   hspi3.Init.NSS = SPI_NSS_SOFT;
 149              		.loc 1 114 3 is_stmt 1 view .LVU44
 150              		.loc 1 114 18 is_stmt 0 view .LVU45
 151 001e 4FF40072 		mov	r2, #512
 152 0022 8261     		str	r2, [r0, #24]
 115:Src/spi.c     ****   hspi3.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_16;
 153              		.loc 1 115 3 is_stmt 1 view .LVU46
 154              		.loc 1 115 32 is_stmt 0 view .LVU47
 155 0024 1822     		movs	r2, #24
 156 0026 C261     		str	r2, [r0, #28]
 116:Src/spi.c     ****   hspi3.Init.FirstBit = SPI_FIRSTBIT_MSB;
 157              		.loc 1 116 3 is_stmt 1 view .LVU48
 158              		.loc 1 116 23 is_stmt 0 view .LVU49
 159 0028 0362     		str	r3, [r0, #32]
 117:Src/spi.c     ****   hspi3.Init.TIMode = SPI_TIMODE_DISABLE;
 160              		.loc 1 117 3 is_stmt 1 view .LVU50
 161              		.loc 1 117 21 is_stmt 0 view .LVU51
 162 002a 4362     		str	r3, [r0, #36]
 118:Src/spi.c     ****   hspi3.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
 163              		.loc 1 118 3 is_stmt 1 view .LVU52
 164              		.loc 1 118 29 is_stmt 0 view .LVU53
 165 002c 8362     		str	r3, [r0, #40]
 119:Src/spi.c     ****   hspi3.Init.CRCPolynomial = 10;
 166              		.loc 1 119 3 is_stmt 1 view .LVU54
 167              		.loc 1 119 28 is_stmt 0 view .LVU55
 168 002e 0A23     		movs	r3, #10
ARM GAS  /tmp/ccj5OPZX.s 			page 6


 169 0030 C362     		str	r3, [r0, #44]
 120:Src/spi.c     ****   if (HAL_SPI_Init(&hspi3) != HAL_OK)
 170              		.loc 1 120 3 is_stmt 1 view .LVU56
 171              		.loc 1 120 7 is_stmt 0 view .LVU57
 172 0032 FFF7FEFF 		bl	HAL_SPI_Init
 173              	.LVL2:
 174              		.loc 1 120 6 view .LVU58
 175 0036 00B9     		cbnz	r0, .L10
 176              	.L7:
 121:Src/spi.c     ****   {
 122:Src/spi.c     ****     Error_Handler();
 123:Src/spi.c     ****   }
 124:Src/spi.c     **** 
 125:Src/spi.c     **** }
 177              		.loc 1 125 1 view .LVU59
 178 0038 08BD     		pop	{r3, pc}
 179              	.L10:
 122:Src/spi.c     ****   }
 180              		.loc 1 122 5 is_stmt 1 view .LVU60
 181 003a FFF7FEFF 		bl	Error_Handler
 182              	.LVL3:
 183              		.loc 1 125 1 is_stmt 0 view .LVU61
 184 003e FBE7     		b	.L7
 185              	.L12:
 186              		.align	2
 187              	.L11:
 188 0040 00000000 		.word	.LANCHOR1
 189 0044 003C0040 		.word	1073757184
 190              		.cfi_endproc
 191              	.LFE1989:
 193              		.section	.text.HAL_SPI_MspInit,"ax",%progbits
 194              		.align	1
 195              		.global	HAL_SPI_MspInit
 196              		.syntax unified
 197              		.thumb
 198              		.thumb_func
 199              		.fpu fpv4-sp-d16
 201              	HAL_SPI_MspInit:
 202              	.LVL4:
 203              	.LFB1990:
 126:Src/spi.c     **** 
 127:Src/spi.c     **** 
 128:Src/spi.c     **** 
 129:Src/spi.c     **** 
 130:Src/spi.c     **** void HAL_SPI_MspInit(SPI_HandleTypeDef* spiHandle)
 131:Src/spi.c     **** {
 204              		.loc 1 131 1 is_stmt 1 view -0
 205              		.cfi_startproc
 206              		@ args = 0, pretend = 0, frame = 48
 207              		@ frame_needed = 0, uses_anonymous_args = 0
 208              		.loc 1 131 1 is_stmt 0 view .LVU63
 209 0000 10B5     		push	{r4, lr}
 210              	.LCFI2:
 211              		.cfi_def_cfa_offset 8
 212              		.cfi_offset 4, -8
 213              		.cfi_offset 14, -4
 214 0002 8CB0     		sub	sp, sp, #48
ARM GAS  /tmp/ccj5OPZX.s 			page 7


 215              	.LCFI3:
 216              		.cfi_def_cfa_offset 56
 217 0004 0446     		mov	r4, r0
 132:Src/spi.c     ****     GPIO_InitTypeDef GPIO_InitStruct = {0};
 218              		.loc 1 132 5 is_stmt 1 view .LVU64
 219              		.loc 1 132 22 is_stmt 0 view .LVU65
 220 0006 0023     		movs	r3, #0
 221 0008 0793     		str	r3, [sp, #28]
 222 000a 0893     		str	r3, [sp, #32]
 223 000c 0993     		str	r3, [sp, #36]
 224 000e 0A93     		str	r3, [sp, #40]
 225 0010 0B93     		str	r3, [sp, #44]
 133:Src/spi.c     ****     if(spiHandle->Instance == SPI1)
 226              		.loc 1 133 5 is_stmt 1 view .LVU66
 227              		.loc 1 133 17 is_stmt 0 view .LVU67
 228 0012 0368     		ldr	r3, [r0]
 229              		.loc 1 133 7 view .LVU68
 230 0014 914A     		ldr	r2, .L33
 231 0016 9342     		cmp	r3, r2
 232 0018 04D0     		beq	.L25
 134:Src/spi.c     ****     {
 135:Src/spi.c     ****         /* Enable clocks */
 136:Src/spi.c     ****         __HAL_RCC_SPI1_CLK_ENABLE();
 137:Src/spi.c     ****         __HAL_RCC_GPIOB_CLK_ENABLE();
 138:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 139:Src/spi.c     **** 
 140:Src/spi.c     ****         /* Configure SPI1 GPIO */
 141:Src/spi.c     ****         GPIO_InitStruct.Pin = GPIO_PIN_3|GPIO_PIN_4|GPIO_PIN_5;
 142:Src/spi.c     ****         GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 143:Src/spi.c     ****         GPIO_InitStruct.Pull = GPIO_NOPULL;
 144:Src/spi.c     ****         GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 145:Src/spi.c     ****         GPIO_InitStruct.Alternate = GPIO_AF5_SPI1;
 146:Src/spi.c     ****         HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);
 147:Src/spi.c     **** 
 148:Src/spi.c     ****         /* SPI1 DMA Init */
 149:Src/spi.c     ****         /* SPI1_RX Init */
 150:Src/spi.c     ****         hdma_spi1_rx.Instance = DMA1_Channel1;
 151:Src/spi.c     ****         hdma_spi1_rx.Init.Request = DMA_REQUEST_SPI1_RX;
 152:Src/spi.c     ****         hdma_spi1_rx.Init.Direction = DMA_PERIPH_TO_MEMORY;
 153:Src/spi.c     ****         hdma_spi1_rx.Init.PeriphInc = DMA_PINC_DISABLE;
 154:Src/spi.c     ****         hdma_spi1_rx.Init.MemInc = DMA_MINC_ENABLE;
 155:Src/spi.c     ****         hdma_spi1_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 156:Src/spi.c     ****         hdma_spi1_rx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 157:Src/spi.c     ****         hdma_spi1_rx.Init.Mode = DMA_NORMAL;
 158:Src/spi.c     ****         hdma_spi1_rx.Init.Priority = DMA_PRIORITY_MEDIUM;
 159:Src/spi.c     ****         
 160:Src/spi.c     ****         if (HAL_DMA_Init(&hdma_spi1_rx) != HAL_OK)
 161:Src/spi.c     ****         {
 162:Src/spi.c     ****             Error_Handler();
 163:Src/spi.c     ****         }
 164:Src/spi.c     ****         __HAL_LINKDMA(spiHandle, hdmarx, hdma_spi1_rx);
 165:Src/spi.c     **** 
 166:Src/spi.c     ****         /* SPI1_TX Init */
 167:Src/spi.c     ****         hdma_spi1_tx.Instance = DMA1_Channel2;
 168:Src/spi.c     ****         hdma_spi1_tx.Init.Request = DMA_REQUEST_SPI1_TX;
 169:Src/spi.c     ****         hdma_spi1_tx.Init.Direction = DMA_MEMORY_TO_PERIPH;
 170:Src/spi.c     ****         hdma_spi1_tx.Init.PeriphInc = DMA_PINC_DISABLE;
ARM GAS  /tmp/ccj5OPZX.s 			page 8


 171:Src/spi.c     ****         hdma_spi1_tx.Init.MemInc = DMA_MINC_ENABLE;
 172:Src/spi.c     ****         hdma_spi1_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 173:Src/spi.c     ****         hdma_spi1_tx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 174:Src/spi.c     ****         hdma_spi1_tx.Init.Mode = DMA_NORMAL;
 175:Src/spi.c     ****         hdma_spi1_tx.Init.Priority = DMA_PRIORITY_MEDIUM;
 176:Src/spi.c     ****         
 177:Src/spi.c     ****         if (HAL_DMA_Init(&hdma_spi1_tx) != HAL_OK)
 178:Src/spi.c     ****         {
 179:Src/spi.c     ****             Error_Handler();
 180:Src/spi.c     ****         }
 181:Src/spi.c     ****         __HAL_LINKDMA(spiHandle, hdmatx, hdma_spi1_tx);
 182:Src/spi.c     **** 
 183:Src/spi.c     ****         /* Enable DMA interrupts */
 184:Src/spi.c     ****         HAL_NVIC_SetPriority(DMA1_Channel1_IRQn, 1, 0);
 185:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel1_IRQn);
 186:Src/spi.c     ****         HAL_NVIC_SetPriority(DMA1_Channel2_IRQn, 1, 0);
 187:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel2_IRQn);
 188:Src/spi.c     **** 
 189:Src/spi.c     ****         /* Enable DMA requests */
 190:Src/spi.c     ****         SET_BIT(spiHandle->Instance->CR2, SPI_CR2_RXDMAEN);
 191:Src/spi.c     ****         SET_BIT(spiHandle->Instance->CR2, SPI_CR2_TXDMAEN);
 192:Src/spi.c     **** 
 193:Src/spi.c     ****         /* Enable SPI */
 194:Src/spi.c     ****         __HAL_SPI_ENABLE(spiHandle);
 195:Src/spi.c     ****     }
 196:Src/spi.c     ****     else if(spiHandle->Instance == SPI3)
 233              		.loc 1 196 10 is_stmt 1 view .LVU69
 234              		.loc 1 196 12 is_stmt 0 view .LVU70
 235 001a 914A     		ldr	r2, .L33+4
 236 001c 9342     		cmp	r3, r2
 237 001e 7DD0     		beq	.L26
 238              	.LVL5:
 239              	.L13:
 197:Src/spi.c     ****     {
 198:Src/spi.c     ****         /* Enable clocks */
 199:Src/spi.c     ****         __HAL_RCC_SPI3_CLK_ENABLE();
 200:Src/spi.c     ****         __HAL_RCC_GPIOC_CLK_ENABLE();
 201:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 202:Src/spi.c     **** 
 203:Src/spi.c     ****         /* Configure SPI3 GPIO */
 204:Src/spi.c     ****         GPIO_InitStruct.Pin = GPIO_PIN_10|GPIO_PIN_11|GPIO_PIN_12;
 205:Src/spi.c     ****         GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 206:Src/spi.c     ****         GPIO_InitStruct.Pull = GPIO_PULLUP;
 207:Src/spi.c     ****         GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 208:Src/spi.c     ****         GPIO_InitStruct.Alternate = GPIO_AF6_SPI3;
 209:Src/spi.c     ****         HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);
 210:Src/spi.c     **** 
 211:Src/spi.c     ****         /* SPI3 DMA Init */
 212:Src/spi.c     ****         /* SPI3_RX Init */
 213:Src/spi.c     ****         hdma_spi3_rx.Instance = DMA1_Channel3;
 214:Src/spi.c     ****         hdma_spi3_rx.Init.Request = DMA_REQUEST_SPI3_RX;
 215:Src/spi.c     ****         hdma_spi3_rx.Init.Direction = DMA_PERIPH_TO_MEMORY;
 216:Src/spi.c     ****         hdma_spi3_rx.Init.PeriphInc = DMA_PINC_DISABLE;
 217:Src/spi.c     ****         hdma_spi3_rx.Init.MemInc = DMA_MINC_ENABLE;
 218:Src/spi.c     ****         
 219:Src/spi.c     ****         if(spiHandle->Init.DataSize == SPI_DATASIZE_8BIT) {
 220:Src/spi.c     ****             hdma_spi3_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
ARM GAS  /tmp/ccj5OPZX.s 			page 9


 221:Src/spi.c     ****             hdma_spi3_rx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 222:Src/spi.c     ****         } else {
 223:Src/spi.c     ****             hdma_spi3_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_HALFWORD;
 224:Src/spi.c     ****             hdma_spi3_rx.Init.MemDataAlignment = DMA_MDATAALIGN_HALFWORD;
 225:Src/spi.c     ****         }
 226:Src/spi.c     ****         
 227:Src/spi.c     ****         hdma_spi3_rx.Init.Mode = DMA_NORMAL;
 228:Src/spi.c     ****         hdma_spi3_rx.Init.Priority = DMA_PRIORITY_MEDIUM;
 229:Src/spi.c     ****         
 230:Src/spi.c     ****         if (HAL_DMA_Init(&hdma_spi3_rx) != HAL_OK)
 231:Src/spi.c     ****         {
 232:Src/spi.c     ****             Error_Handler();
 233:Src/spi.c     ****         }
 234:Src/spi.c     ****         __HAL_LINKDMA(spiHandle, hdmarx, hdma_spi3_rx);
 235:Src/spi.c     **** 
 236:Src/spi.c     ****         /* SPI3_TX Init */
 237:Src/spi.c     ****         hdma_spi3_tx.Instance = DMA1_Channel4;
 238:Src/spi.c     ****         hdma_spi3_tx.Init.Request = DMA_REQUEST_SPI3_TX;
 239:Src/spi.c     ****         hdma_spi3_tx.Init.Direction = DMA_MEMORY_TO_PERIPH;
 240:Src/spi.c     ****         hdma_spi3_tx.Init.PeriphInc = DMA_PINC_DISABLE;
 241:Src/spi.c     ****         hdma_spi3_tx.Init.MemInc = DMA_MINC_ENABLE;
 242:Src/spi.c     ****         
 243:Src/spi.c     ****         if(spiHandle->Init.DataSize == SPI_DATASIZE_8BIT) {
 244:Src/spi.c     ****             hdma_spi3_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 245:Src/spi.c     ****             hdma_spi3_tx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 246:Src/spi.c     ****         } else {
 247:Src/spi.c     ****             hdma_spi3_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_HALFWORD;
 248:Src/spi.c     ****             hdma_spi3_tx.Init.MemDataAlignment = DMA_MDATAALIGN_HALFWORD;
 249:Src/spi.c     ****         }
 250:Src/spi.c     ****         
 251:Src/spi.c     ****         hdma_spi3_tx.Init.Mode = DMA_NORMAL;
 252:Src/spi.c     ****         hdma_spi3_tx.Init.Priority = DMA_PRIORITY_MEDIUM;
 253:Src/spi.c     ****         
 254:Src/spi.c     ****         if (HAL_DMA_Init(&hdma_spi3_tx) != HAL_OK)
 255:Src/spi.c     ****         {
 256:Src/spi.c     ****             Error_Handler();
 257:Src/spi.c     ****         }
 258:Src/spi.c     ****         __HAL_LINKDMA(spiHandle, hdmatx, hdma_spi3_tx);
 259:Src/spi.c     **** 
 260:Src/spi.c     ****         /* Enable DMA interrupts */
 261:Src/spi.c     ****         HAL_NVIC_SetPriority(DMA1_Channel3_IRQn, 1, 0);
 262:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel3_IRQn);
 263:Src/spi.c     ****         HAL_NVIC_SetPriority(DMA1_Channel4_IRQn, 1, 0);
 264:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel4_IRQn);
 265:Src/spi.c     **** 
 266:Src/spi.c     ****         /* Enable DMA requests */
 267:Src/spi.c     ****         SET_BIT(spiHandle->Instance->CR2, SPI_CR2_RXDMAEN);
 268:Src/spi.c     ****         SET_BIT(spiHandle->Instance->CR2, SPI_CR2_TXDMAEN);
 269:Src/spi.c     **** 
 270:Src/spi.c     ****         /* Enable SPI */
 271:Src/spi.c     ****         __HAL_SPI_ENABLE(spiHandle);
 272:Src/spi.c     ****     }
 273:Src/spi.c     **** }
 240              		.loc 1 273 1 view .LVU71
 241 0020 0CB0     		add	sp, sp, #48
 242              	.LCFI4:
 243              		.cfi_remember_state
ARM GAS  /tmp/ccj5OPZX.s 			page 10


 244              		.cfi_def_cfa_offset 8
 245              		@ sp needed
 246 0022 10BD     		pop	{r4, pc}
 247              	.LVL6:
 248              	.L25:
 249              	.LCFI5:
 250              		.cfi_restore_state
 136:Src/spi.c     ****         __HAL_RCC_GPIOB_CLK_ENABLE();
 251              		.loc 1 136 9 is_stmt 1 view .LVU72
 252              	.LBB2:
 136:Src/spi.c     ****         __HAL_RCC_GPIOB_CLK_ENABLE();
 253              		.loc 1 136 9 view .LVU73
 136:Src/spi.c     ****         __HAL_RCC_GPIOB_CLK_ENABLE();
 254              		.loc 1 136 9 view .LVU74
 255 0024 8F4B     		ldr	r3, .L33+8
 256 0026 1A6E     		ldr	r2, [r3, #96]
 257 0028 42F48052 		orr	r2, r2, #4096
 258 002c 1A66     		str	r2, [r3, #96]
 136:Src/spi.c     ****         __HAL_RCC_GPIOB_CLK_ENABLE();
 259              		.loc 1 136 9 view .LVU75
 260 002e 1A6E     		ldr	r2, [r3, #96]
 261 0030 02F48052 		and	r2, r2, #4096
 262 0034 0192     		str	r2, [sp, #4]
 136:Src/spi.c     ****         __HAL_RCC_GPIOB_CLK_ENABLE();
 263              		.loc 1 136 9 view .LVU76
 264 0036 019A     		ldr	r2, [sp, #4]
 265              	.LBE2:
 136:Src/spi.c     ****         __HAL_RCC_GPIOB_CLK_ENABLE();
 266              		.loc 1 136 9 view .LVU77
 137:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 267              		.loc 1 137 9 view .LVU78
 268              	.LBB3:
 137:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 269              		.loc 1 137 9 view .LVU79
 137:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 270              		.loc 1 137 9 view .LVU80
 271 0038 DA6C     		ldr	r2, [r3, #76]
 272 003a 42F00202 		orr	r2, r2, #2
 273 003e DA64     		str	r2, [r3, #76]
 137:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 274              		.loc 1 137 9 view .LVU81
 275 0040 DA6C     		ldr	r2, [r3, #76]
 276 0042 02F00202 		and	r2, r2, #2
 277 0046 0292     		str	r2, [sp, #8]
 137:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 278              		.loc 1 137 9 view .LVU82
 279 0048 029A     		ldr	r2, [sp, #8]
 280              	.LBE3:
 137:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 281              		.loc 1 137 9 view .LVU83
 138:Src/spi.c     **** 
 282              		.loc 1 138 9 view .LVU84
 283              	.LBB4:
 138:Src/spi.c     **** 
 284              		.loc 1 138 9 view .LVU85
 138:Src/spi.c     **** 
 285              		.loc 1 138 9 view .LVU86
ARM GAS  /tmp/ccj5OPZX.s 			page 11


 286 004a 9A6C     		ldr	r2, [r3, #72]
 287 004c 42F00102 		orr	r2, r2, #1
 288 0050 9A64     		str	r2, [r3, #72]
 138:Src/spi.c     **** 
 289              		.loc 1 138 9 view .LVU87
 290 0052 9B6C     		ldr	r3, [r3, #72]
 291 0054 03F00103 		and	r3, r3, #1
 292 0058 0393     		str	r3, [sp, #12]
 138:Src/spi.c     **** 
 293              		.loc 1 138 9 view .LVU88
 294 005a 039B     		ldr	r3, [sp, #12]
 295              	.LBE4:
 138:Src/spi.c     **** 
 296              		.loc 1 138 9 view .LVU89
 141:Src/spi.c     ****         GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 297              		.loc 1 141 9 view .LVU90
 141:Src/spi.c     ****         GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 298              		.loc 1 141 29 is_stmt 0 view .LVU91
 299 005c 3823     		movs	r3, #56
 300 005e 0793     		str	r3, [sp, #28]
 142:Src/spi.c     ****         GPIO_InitStruct.Pull = GPIO_NOPULL;
 301              		.loc 1 142 9 is_stmt 1 view .LVU92
 142:Src/spi.c     ****         GPIO_InitStruct.Pull = GPIO_NOPULL;
 302              		.loc 1 142 30 is_stmt 0 view .LVU93
 303 0060 0223     		movs	r3, #2
 304 0062 0893     		str	r3, [sp, #32]
 143:Src/spi.c     ****         GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 305              		.loc 1 143 9 is_stmt 1 view .LVU94
 144:Src/spi.c     ****         GPIO_InitStruct.Alternate = GPIO_AF5_SPI1;
 306              		.loc 1 144 9 view .LVU95
 144:Src/spi.c     ****         GPIO_InitStruct.Alternate = GPIO_AF5_SPI1;
 307              		.loc 1 144 31 is_stmt 0 view .LVU96
 308 0064 0323     		movs	r3, #3
 309 0066 0A93     		str	r3, [sp, #40]
 145:Src/spi.c     ****         HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);
 310              		.loc 1 145 9 is_stmt 1 view .LVU97
 145:Src/spi.c     ****         HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);
 311              		.loc 1 145 35 is_stmt 0 view .LVU98
 312 0068 0523     		movs	r3, #5
 313 006a 0B93     		str	r3, [sp, #44]
 146:Src/spi.c     **** 
 314              		.loc 1 146 9 is_stmt 1 view .LVU99
 315 006c 07A9     		add	r1, sp, #28
 316 006e 7E48     		ldr	r0, .L33+12
 317              	.LVL7:
 146:Src/spi.c     **** 
 318              		.loc 1 146 9 is_stmt 0 view .LVU100
 319 0070 FFF7FEFF 		bl	HAL_GPIO_Init
 320              	.LVL8:
 150:Src/spi.c     ****         hdma_spi1_rx.Init.Request = DMA_REQUEST_SPI1_RX;
 321              		.loc 1 150 9 is_stmt 1 view .LVU101
 150:Src/spi.c     ****         hdma_spi1_rx.Init.Request = DMA_REQUEST_SPI1_RX;
 322              		.loc 1 150 31 is_stmt 0 view .LVU102
 323 0074 7D48     		ldr	r0, .L33+16
 324 0076 7E4B     		ldr	r3, .L33+20
 325 0078 0360     		str	r3, [r0]
 151:Src/spi.c     ****         hdma_spi1_rx.Init.Direction = DMA_PERIPH_TO_MEMORY;
ARM GAS  /tmp/ccj5OPZX.s 			page 12


 326              		.loc 1 151 9 is_stmt 1 view .LVU103
 151:Src/spi.c     ****         hdma_spi1_rx.Init.Direction = DMA_PERIPH_TO_MEMORY;
 327              		.loc 1 151 35 is_stmt 0 view .LVU104
 328 007a 0A23     		movs	r3, #10
 329 007c 4360     		str	r3, [r0, #4]
 152:Src/spi.c     ****         hdma_spi1_rx.Init.PeriphInc = DMA_PINC_DISABLE;
 330              		.loc 1 152 9 is_stmt 1 view .LVU105
 152:Src/spi.c     ****         hdma_spi1_rx.Init.PeriphInc = DMA_PINC_DISABLE;
 331              		.loc 1 152 37 is_stmt 0 view .LVU106
 332 007e 0023     		movs	r3, #0
 333 0080 8360     		str	r3, [r0, #8]
 153:Src/spi.c     ****         hdma_spi1_rx.Init.MemInc = DMA_MINC_ENABLE;
 334              		.loc 1 153 9 is_stmt 1 view .LVU107
 153:Src/spi.c     ****         hdma_spi1_rx.Init.MemInc = DMA_MINC_ENABLE;
 335              		.loc 1 153 37 is_stmt 0 view .LVU108
 336 0082 C360     		str	r3, [r0, #12]
 154:Src/spi.c     ****         hdma_spi1_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 337              		.loc 1 154 9 is_stmt 1 view .LVU109
 154:Src/spi.c     ****         hdma_spi1_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 338              		.loc 1 154 34 is_stmt 0 view .LVU110
 339 0084 8022     		movs	r2, #128
 340 0086 0261     		str	r2, [r0, #16]
 155:Src/spi.c     ****         hdma_spi1_rx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 341              		.loc 1 155 9 is_stmt 1 view .LVU111
 155:Src/spi.c     ****         hdma_spi1_rx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 342              		.loc 1 155 47 is_stmt 0 view .LVU112
 343 0088 4361     		str	r3, [r0, #20]
 156:Src/spi.c     ****         hdma_spi1_rx.Init.Mode = DMA_NORMAL;
 344              		.loc 1 156 9 is_stmt 1 view .LVU113
 156:Src/spi.c     ****         hdma_spi1_rx.Init.Mode = DMA_NORMAL;
 345              		.loc 1 156 44 is_stmt 0 view .LVU114
 346 008a 8361     		str	r3, [r0, #24]
 157:Src/spi.c     ****         hdma_spi1_rx.Init.Priority = DMA_PRIORITY_MEDIUM;
 347              		.loc 1 157 9 is_stmt 1 view .LVU115
 157:Src/spi.c     ****         hdma_spi1_rx.Init.Priority = DMA_PRIORITY_MEDIUM;
 348              		.loc 1 157 32 is_stmt 0 view .LVU116
 349 008c C361     		str	r3, [r0, #28]
 158:Src/spi.c     ****         
 350              		.loc 1 158 9 is_stmt 1 view .LVU117
 158:Src/spi.c     ****         
 351              		.loc 1 158 36 is_stmt 0 view .LVU118
 352 008e 4FF48053 		mov	r3, #4096
 353 0092 0362     		str	r3, [r0, #32]
 160:Src/spi.c     ****         {
 354              		.loc 1 160 9 is_stmt 1 view .LVU119
 160:Src/spi.c     ****         {
 355              		.loc 1 160 13 is_stmt 0 view .LVU120
 356 0094 FFF7FEFF 		bl	HAL_DMA_Init
 357              	.LVL9:
 160:Src/spi.c     ****         {
 358              		.loc 1 160 12 view .LVU121
 359 0098 0028     		cmp	r0, #0
 360 009a 39D1     		bne	.L27
 361              	.L15:
 164:Src/spi.c     **** 
 362              		.loc 1 164 9 is_stmt 1 view .LVU122
 164:Src/spi.c     **** 
ARM GAS  /tmp/ccj5OPZX.s 			page 13


 363              		.loc 1 164 9 view .LVU123
 364 009c 734B     		ldr	r3, .L33+16
 365 009e A365     		str	r3, [r4, #88]
 164:Src/spi.c     **** 
 366              		.loc 1 164 9 view .LVU124
 367 00a0 9C62     		str	r4, [r3, #40]
 164:Src/spi.c     **** 
 368              		.loc 1 164 9 view .LVU125
 167:Src/spi.c     ****         hdma_spi1_tx.Init.Request = DMA_REQUEST_SPI1_TX;
 369              		.loc 1 167 9 view .LVU126
 167:Src/spi.c     ****         hdma_spi1_tx.Init.Request = DMA_REQUEST_SPI1_TX;
 370              		.loc 1 167 31 is_stmt 0 view .LVU127
 371 00a2 7448     		ldr	r0, .L33+24
 372 00a4 744B     		ldr	r3, .L33+28
 373 00a6 0360     		str	r3, [r0]
 168:Src/spi.c     ****         hdma_spi1_tx.Init.Direction = DMA_MEMORY_TO_PERIPH;
 374              		.loc 1 168 9 is_stmt 1 view .LVU128
 168:Src/spi.c     ****         hdma_spi1_tx.Init.Direction = DMA_MEMORY_TO_PERIPH;
 375              		.loc 1 168 35 is_stmt 0 view .LVU129
 376 00a8 0B23     		movs	r3, #11
 377 00aa 4360     		str	r3, [r0, #4]
 169:Src/spi.c     ****         hdma_spi1_tx.Init.PeriphInc = DMA_PINC_DISABLE;
 378              		.loc 1 169 9 is_stmt 1 view .LVU130
 169:Src/spi.c     ****         hdma_spi1_tx.Init.PeriphInc = DMA_PINC_DISABLE;
 379              		.loc 1 169 37 is_stmt 0 view .LVU131
 380 00ac 1023     		movs	r3, #16
 381 00ae 8360     		str	r3, [r0, #8]
 170:Src/spi.c     ****         hdma_spi1_tx.Init.MemInc = DMA_MINC_ENABLE;
 382              		.loc 1 170 9 is_stmt 1 view .LVU132
 170:Src/spi.c     ****         hdma_spi1_tx.Init.MemInc = DMA_MINC_ENABLE;
 383              		.loc 1 170 37 is_stmt 0 view .LVU133
 384 00b0 0023     		movs	r3, #0
 385 00b2 C360     		str	r3, [r0, #12]
 171:Src/spi.c     ****         hdma_spi1_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 386              		.loc 1 171 9 is_stmt 1 view .LVU134
 171:Src/spi.c     ****         hdma_spi1_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 387              		.loc 1 171 34 is_stmt 0 view .LVU135
 388 00b4 8022     		movs	r2, #128
 389 00b6 0261     		str	r2, [r0, #16]
 172:Src/spi.c     ****         hdma_spi1_tx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 390              		.loc 1 172 9 is_stmt 1 view .LVU136
 172:Src/spi.c     ****         hdma_spi1_tx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 391              		.loc 1 172 47 is_stmt 0 view .LVU137
 392 00b8 4361     		str	r3, [r0, #20]
 173:Src/spi.c     ****         hdma_spi1_tx.Init.Mode = DMA_NORMAL;
 393              		.loc 1 173 9 is_stmt 1 view .LVU138
 173:Src/spi.c     ****         hdma_spi1_tx.Init.Mode = DMA_NORMAL;
 394              		.loc 1 173 44 is_stmt 0 view .LVU139
 395 00ba 8361     		str	r3, [r0, #24]
 174:Src/spi.c     ****         hdma_spi1_tx.Init.Priority = DMA_PRIORITY_MEDIUM;
 396              		.loc 1 174 9 is_stmt 1 view .LVU140
 174:Src/spi.c     ****         hdma_spi1_tx.Init.Priority = DMA_PRIORITY_MEDIUM;
 397              		.loc 1 174 32 is_stmt 0 view .LVU141
 398 00bc C361     		str	r3, [r0, #28]
 175:Src/spi.c     ****         
 399              		.loc 1 175 9 is_stmt 1 view .LVU142
 175:Src/spi.c     ****         
ARM GAS  /tmp/ccj5OPZX.s 			page 14


 400              		.loc 1 175 36 is_stmt 0 view .LVU143
 401 00be 4FF48053 		mov	r3, #4096
 402 00c2 0362     		str	r3, [r0, #32]
 177:Src/spi.c     ****         {
 403              		.loc 1 177 9 is_stmt 1 view .LVU144
 177:Src/spi.c     ****         {
 404              		.loc 1 177 13 is_stmt 0 view .LVU145
 405 00c4 FFF7FEFF 		bl	HAL_DMA_Init
 406              	.LVL10:
 177:Src/spi.c     ****         {
 407              		.loc 1 177 12 view .LVU146
 408 00c8 28BB     		cbnz	r0, .L28
 409              	.L16:
 181:Src/spi.c     **** 
 410              		.loc 1 181 9 is_stmt 1 view .LVU147
 181:Src/spi.c     **** 
 411              		.loc 1 181 9 view .LVU148
 412 00ca 6A4B     		ldr	r3, .L33+24
 413 00cc 6365     		str	r3, [r4, #84]
 181:Src/spi.c     **** 
 414              		.loc 1 181 9 view .LVU149
 415 00ce 9C62     		str	r4, [r3, #40]
 181:Src/spi.c     **** 
 416              		.loc 1 181 9 view .LVU150
 184:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel1_IRQn);
 417              		.loc 1 184 9 view .LVU151
 418 00d0 0022     		movs	r2, #0
 419 00d2 0121     		movs	r1, #1
 420 00d4 0B20     		movs	r0, #11
 421 00d6 FFF7FEFF 		bl	HAL_NVIC_SetPriority
 422              	.LVL11:
 185:Src/spi.c     ****         HAL_NVIC_SetPriority(DMA1_Channel2_IRQn, 1, 0);
 423              		.loc 1 185 9 view .LVU152
 424 00da 0B20     		movs	r0, #11
 425 00dc FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 426              	.LVL12:
 186:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel2_IRQn);
 427              		.loc 1 186 9 view .LVU153
 428 00e0 0022     		movs	r2, #0
 429 00e2 0121     		movs	r1, #1
 430 00e4 0C20     		movs	r0, #12
 431 00e6 FFF7FEFF 		bl	HAL_NVIC_SetPriority
 432              	.LVL13:
 187:Src/spi.c     **** 
 433              		.loc 1 187 9 view .LVU154
 434 00ea 0C20     		movs	r0, #12
 435 00ec FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 436              	.LVL14:
 190:Src/spi.c     ****         SET_BIT(spiHandle->Instance->CR2, SPI_CR2_TXDMAEN);
 437              		.loc 1 190 9 view .LVU155
 438 00f0 2268     		ldr	r2, [r4]
 439 00f2 5368     		ldr	r3, [r2, #4]
 440 00f4 43F00103 		orr	r3, r3, #1
 441 00f8 5360     		str	r3, [r2, #4]
 191:Src/spi.c     **** 
 442              		.loc 1 191 9 view .LVU156
 443 00fa 2268     		ldr	r2, [r4]
ARM GAS  /tmp/ccj5OPZX.s 			page 15


 444 00fc 5368     		ldr	r3, [r2, #4]
 445 00fe 43F00203 		orr	r3, r3, #2
 446 0102 5360     		str	r3, [r2, #4]
 194:Src/spi.c     ****     }
 447              		.loc 1 194 9 view .LVU157
 448 0104 2268     		ldr	r2, [r4]
 449 0106 1368     		ldr	r3, [r2]
 450 0108 43F04003 		orr	r3, r3, #64
 451 010c 1360     		str	r3, [r2]
 452 010e 87E7     		b	.L13
 453              	.L27:
 162:Src/spi.c     ****         }
 454              		.loc 1 162 13 view .LVU158
 455 0110 FFF7FEFF 		bl	Error_Handler
 456              	.LVL15:
 457 0114 C2E7     		b	.L15
 458              	.L28:
 179:Src/spi.c     ****         }
 459              		.loc 1 179 13 view .LVU159
 460 0116 FFF7FEFF 		bl	Error_Handler
 461              	.LVL16:
 462 011a D6E7     		b	.L16
 463              	.LVL17:
 464              	.L26:
 199:Src/spi.c     ****         __HAL_RCC_GPIOC_CLK_ENABLE();
 465              		.loc 1 199 9 view .LVU160
 466              	.LBB5:
 199:Src/spi.c     ****         __HAL_RCC_GPIOC_CLK_ENABLE();
 467              		.loc 1 199 9 view .LVU161
 199:Src/spi.c     ****         __HAL_RCC_GPIOC_CLK_ENABLE();
 468              		.loc 1 199 9 view .LVU162
 469 011c 514B     		ldr	r3, .L33+8
 470 011e 9A6D     		ldr	r2, [r3, #88]
 471 0120 42F40042 		orr	r2, r2, #32768
 472 0124 9A65     		str	r2, [r3, #88]
 199:Src/spi.c     ****         __HAL_RCC_GPIOC_CLK_ENABLE();
 473              		.loc 1 199 9 view .LVU163
 474 0126 9A6D     		ldr	r2, [r3, #88]
 475 0128 02F40042 		and	r2, r2, #32768
 476 012c 0492     		str	r2, [sp, #16]
 199:Src/spi.c     ****         __HAL_RCC_GPIOC_CLK_ENABLE();
 477              		.loc 1 199 9 view .LVU164
 478 012e 049A     		ldr	r2, [sp, #16]
 479              	.LBE5:
 199:Src/spi.c     ****         __HAL_RCC_GPIOC_CLK_ENABLE();
 480              		.loc 1 199 9 view .LVU165
 200:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 481              		.loc 1 200 9 view .LVU166
 482              	.LBB6:
 200:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 483              		.loc 1 200 9 view .LVU167
 200:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 484              		.loc 1 200 9 view .LVU168
 485 0130 DA6C     		ldr	r2, [r3, #76]
 486 0132 42F00402 		orr	r2, r2, #4
 487 0136 DA64     		str	r2, [r3, #76]
 200:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
ARM GAS  /tmp/ccj5OPZX.s 			page 16


 488              		.loc 1 200 9 view .LVU169
 489 0138 DA6C     		ldr	r2, [r3, #76]
 490 013a 02F00402 		and	r2, r2, #4
 491 013e 0592     		str	r2, [sp, #20]
 200:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 492              		.loc 1 200 9 view .LVU170
 493 0140 059A     		ldr	r2, [sp, #20]
 494              	.LBE6:
 200:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 495              		.loc 1 200 9 view .LVU171
 201:Src/spi.c     **** 
 496              		.loc 1 201 9 view .LVU172
 497              	.LBB7:
 201:Src/spi.c     **** 
 498              		.loc 1 201 9 view .LVU173
 201:Src/spi.c     **** 
 499              		.loc 1 201 9 view .LVU174
 500 0142 9A6C     		ldr	r2, [r3, #72]
 501 0144 42F00102 		orr	r2, r2, #1
 502 0148 9A64     		str	r2, [r3, #72]
 201:Src/spi.c     **** 
 503              		.loc 1 201 9 view .LVU175
 504 014a 9B6C     		ldr	r3, [r3, #72]
 505 014c 03F00103 		and	r3, r3, #1
 506 0150 0693     		str	r3, [sp, #24]
 201:Src/spi.c     **** 
 507              		.loc 1 201 9 view .LVU176
 508 0152 069B     		ldr	r3, [sp, #24]
 509              	.LBE7:
 201:Src/spi.c     **** 
 510              		.loc 1 201 9 view .LVU177
 204:Src/spi.c     ****         GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 511              		.loc 1 204 9 view .LVU178
 204:Src/spi.c     ****         GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 512              		.loc 1 204 29 is_stmt 0 view .LVU179
 513 0154 4FF4E053 		mov	r3, #7168
 514 0158 0793     		str	r3, [sp, #28]
 205:Src/spi.c     ****         GPIO_InitStruct.Pull = GPIO_PULLUP;
 515              		.loc 1 205 9 is_stmt 1 view .LVU180
 205:Src/spi.c     ****         GPIO_InitStruct.Pull = GPIO_PULLUP;
 516              		.loc 1 205 30 is_stmt 0 view .LVU181
 517 015a 0223     		movs	r3, #2
 518 015c 0893     		str	r3, [sp, #32]
 206:Src/spi.c     ****         GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 519              		.loc 1 206 9 is_stmt 1 view .LVU182
 206:Src/spi.c     ****         GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 520              		.loc 1 206 30 is_stmt 0 view .LVU183
 521 015e 0123     		movs	r3, #1
 522 0160 0993     		str	r3, [sp, #36]
 207:Src/spi.c     ****         GPIO_InitStruct.Alternate = GPIO_AF6_SPI3;
 523              		.loc 1 207 9 is_stmt 1 view .LVU184
 207:Src/spi.c     ****         GPIO_InitStruct.Alternate = GPIO_AF6_SPI3;
 524              		.loc 1 207 31 is_stmt 0 view .LVU185
 525 0162 0323     		movs	r3, #3
 526 0164 0A93     		str	r3, [sp, #40]
 208:Src/spi.c     ****         HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);
 527              		.loc 1 208 9 is_stmt 1 view .LVU186
ARM GAS  /tmp/ccj5OPZX.s 			page 17


 208:Src/spi.c     ****         HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);
 528              		.loc 1 208 35 is_stmt 0 view .LVU187
 529 0166 0623     		movs	r3, #6
 530 0168 0B93     		str	r3, [sp, #44]
 209:Src/spi.c     **** 
 531              		.loc 1 209 9 is_stmt 1 view .LVU188
 532 016a 07A9     		add	r1, sp, #28
 533 016c 4348     		ldr	r0, .L33+32
 534              	.LVL18:
 209:Src/spi.c     **** 
 535              		.loc 1 209 9 is_stmt 0 view .LVU189
 536 016e FFF7FEFF 		bl	HAL_GPIO_Init
 537              	.LVL19:
 213:Src/spi.c     ****         hdma_spi3_rx.Init.Request = DMA_REQUEST_SPI3_RX;
 538              		.loc 1 213 9 is_stmt 1 view .LVU190
 213:Src/spi.c     ****         hdma_spi3_rx.Init.Request = DMA_REQUEST_SPI3_RX;
 539              		.loc 1 213 31 is_stmt 0 view .LVU191
 540 0172 434B     		ldr	r3, .L33+36
 541 0174 434A     		ldr	r2, .L33+40
 542 0176 1A60     		str	r2, [r3]
 214:Src/spi.c     ****         hdma_spi3_rx.Init.Direction = DMA_PERIPH_TO_MEMORY;
 543              		.loc 1 214 9 is_stmt 1 view .LVU192
 214:Src/spi.c     ****         hdma_spi3_rx.Init.Direction = DMA_PERIPH_TO_MEMORY;
 544              		.loc 1 214 35 is_stmt 0 view .LVU193
 545 0178 0E22     		movs	r2, #14
 546 017a 5A60     		str	r2, [r3, #4]
 215:Src/spi.c     ****         hdma_spi3_rx.Init.PeriphInc = DMA_PINC_DISABLE;
 547              		.loc 1 215 9 is_stmt 1 view .LVU194
 215:Src/spi.c     ****         hdma_spi3_rx.Init.PeriphInc = DMA_PINC_DISABLE;
 548              		.loc 1 215 37 is_stmt 0 view .LVU195
 549 017c 0022     		movs	r2, #0
 550 017e 9A60     		str	r2, [r3, #8]
 216:Src/spi.c     ****         hdma_spi3_rx.Init.MemInc = DMA_MINC_ENABLE;
 551              		.loc 1 216 9 is_stmt 1 view .LVU196
 216:Src/spi.c     ****         hdma_spi3_rx.Init.MemInc = DMA_MINC_ENABLE;
 552              		.loc 1 216 37 is_stmt 0 view .LVU197
 553 0180 DA60     		str	r2, [r3, #12]
 217:Src/spi.c     ****         
 554              		.loc 1 217 9 is_stmt 1 view .LVU198
 217:Src/spi.c     ****         
 555              		.loc 1 217 34 is_stmt 0 view .LVU199
 556 0182 8022     		movs	r2, #128
 557 0184 1A61     		str	r2, [r3, #16]
 219:Src/spi.c     ****             hdma_spi3_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 558              		.loc 1 219 9 is_stmt 1 view .LVU200
 219:Src/spi.c     ****             hdma_spi3_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 559              		.loc 1 219 11 is_stmt 0 view .LVU201
 560 0186 E368     		ldr	r3, [r4, #12]
 561 0188 B3F5E06F 		cmp	r3, #1792
 562 018c 56D0     		beq	.L29
 223:Src/spi.c     ****             hdma_spi3_rx.Init.MemDataAlignment = DMA_MDATAALIGN_HALFWORD;
 563              		.loc 1 223 13 is_stmt 1 view .LVU202
 223:Src/spi.c     ****             hdma_spi3_rx.Init.MemDataAlignment = DMA_MDATAALIGN_HALFWORD;
 564              		.loc 1 223 51 is_stmt 0 view .LVU203
 565 018e 3C4B     		ldr	r3, .L33+36
 566 0190 4FF48072 		mov	r2, #256
 567 0194 5A61     		str	r2, [r3, #20]
ARM GAS  /tmp/ccj5OPZX.s 			page 18


 224:Src/spi.c     ****         }
 568              		.loc 1 224 13 is_stmt 1 view .LVU204
 224:Src/spi.c     ****         }
 569              		.loc 1 224 48 is_stmt 0 view .LVU205
 570 0196 4FF48062 		mov	r2, #1024
 571 019a 9A61     		str	r2, [r3, #24]
 572              	.L19:
 227:Src/spi.c     ****         hdma_spi3_rx.Init.Priority = DMA_PRIORITY_MEDIUM;
 573              		.loc 1 227 9 is_stmt 1 view .LVU206
 227:Src/spi.c     ****         hdma_spi3_rx.Init.Priority = DMA_PRIORITY_MEDIUM;
 574              		.loc 1 227 32 is_stmt 0 view .LVU207
 575 019c 3848     		ldr	r0, .L33+36
 576 019e 0023     		movs	r3, #0
 577 01a0 C361     		str	r3, [r0, #28]
 228:Src/spi.c     ****         
 578              		.loc 1 228 9 is_stmt 1 view .LVU208
 228:Src/spi.c     ****         
 579              		.loc 1 228 36 is_stmt 0 view .LVU209
 580 01a2 4FF48053 		mov	r3, #4096
 581 01a6 0362     		str	r3, [r0, #32]
 230:Src/spi.c     ****         {
 582              		.loc 1 230 9 is_stmt 1 view .LVU210
 230:Src/spi.c     ****         {
 583              		.loc 1 230 13 is_stmt 0 view .LVU211
 584 01a8 FFF7FEFF 		bl	HAL_DMA_Init
 585              	.LVL20:
 230:Src/spi.c     ****         {
 586              		.loc 1 230 12 view .LVU212
 587 01ac 0028     		cmp	r0, #0
 588 01ae 4AD1     		bne	.L30
 589              	.L20:
 234:Src/spi.c     **** 
 590              		.loc 1 234 9 is_stmt 1 view .LVU213
 234:Src/spi.c     **** 
 591              		.loc 1 234 9 view .LVU214
 592 01b0 334B     		ldr	r3, .L33+36
 593 01b2 A365     		str	r3, [r4, #88]
 234:Src/spi.c     **** 
 594              		.loc 1 234 9 view .LVU215
 595 01b4 9C62     		str	r4, [r3, #40]
 234:Src/spi.c     **** 
 596              		.loc 1 234 9 view .LVU216
 237:Src/spi.c     ****         hdma_spi3_tx.Init.Request = DMA_REQUEST_SPI3_TX;
 597              		.loc 1 237 9 view .LVU217
 237:Src/spi.c     ****         hdma_spi3_tx.Init.Request = DMA_REQUEST_SPI3_TX;
 598              		.loc 1 237 31 is_stmt 0 view .LVU218
 599 01b6 344B     		ldr	r3, .L33+44
 600 01b8 344A     		ldr	r2, .L33+48
 601 01ba 1A60     		str	r2, [r3]
 238:Src/spi.c     ****         hdma_spi3_tx.Init.Direction = DMA_MEMORY_TO_PERIPH;
 602              		.loc 1 238 9 is_stmt 1 view .LVU219
 238:Src/spi.c     ****         hdma_spi3_tx.Init.Direction = DMA_MEMORY_TO_PERIPH;
 603              		.loc 1 238 35 is_stmt 0 view .LVU220
 604 01bc 0F22     		movs	r2, #15
 605 01be 5A60     		str	r2, [r3, #4]
 239:Src/spi.c     ****         hdma_spi3_tx.Init.PeriphInc = DMA_PINC_DISABLE;
 606              		.loc 1 239 9 is_stmt 1 view .LVU221
ARM GAS  /tmp/ccj5OPZX.s 			page 19


 239:Src/spi.c     ****         hdma_spi3_tx.Init.PeriphInc = DMA_PINC_DISABLE;
 607              		.loc 1 239 37 is_stmt 0 view .LVU222
 608 01c0 1022     		movs	r2, #16
 609 01c2 9A60     		str	r2, [r3, #8]
 240:Src/spi.c     ****         hdma_spi3_tx.Init.MemInc = DMA_MINC_ENABLE;
 610              		.loc 1 240 9 is_stmt 1 view .LVU223
 240:Src/spi.c     ****         hdma_spi3_tx.Init.MemInc = DMA_MINC_ENABLE;
 611              		.loc 1 240 37 is_stmt 0 view .LVU224
 612 01c4 0022     		movs	r2, #0
 613 01c6 DA60     		str	r2, [r3, #12]
 241:Src/spi.c     ****         
 614              		.loc 1 241 9 is_stmt 1 view .LVU225
 241:Src/spi.c     ****         
 615              		.loc 1 241 34 is_stmt 0 view .LVU226
 616 01c8 8022     		movs	r2, #128
 617 01ca 1A61     		str	r2, [r3, #16]
 243:Src/spi.c     ****             hdma_spi3_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 618              		.loc 1 243 9 is_stmt 1 view .LVU227
 243:Src/spi.c     ****             hdma_spi3_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 619              		.loc 1 243 11 is_stmt 0 view .LVU228
 620 01cc E368     		ldr	r3, [r4, #12]
 621 01ce B3F5E06F 		cmp	r3, #1792
 622 01d2 3BD0     		beq	.L31
 247:Src/spi.c     ****             hdma_spi3_tx.Init.MemDataAlignment = DMA_MDATAALIGN_HALFWORD;
 623              		.loc 1 247 13 is_stmt 1 view .LVU229
 247:Src/spi.c     ****             hdma_spi3_tx.Init.MemDataAlignment = DMA_MDATAALIGN_HALFWORD;
 624              		.loc 1 247 51 is_stmt 0 view .LVU230
 625 01d4 2C4B     		ldr	r3, .L33+44
 626 01d6 4FF48072 		mov	r2, #256
 627 01da 5A61     		str	r2, [r3, #20]
 248:Src/spi.c     ****         }
 628              		.loc 1 248 13 is_stmt 1 view .LVU231
 248:Src/spi.c     ****         }
 629              		.loc 1 248 48 is_stmt 0 view .LVU232
 630 01dc 4FF48062 		mov	r2, #1024
 631 01e0 9A61     		str	r2, [r3, #24]
 632              	.L22:
 251:Src/spi.c     ****         hdma_spi3_tx.Init.Priority = DMA_PRIORITY_MEDIUM;
 633              		.loc 1 251 9 is_stmt 1 view .LVU233
 251:Src/spi.c     ****         hdma_spi3_tx.Init.Priority = DMA_PRIORITY_MEDIUM;
 634              		.loc 1 251 32 is_stmt 0 view .LVU234
 635 01e2 2948     		ldr	r0, .L33+44
 636 01e4 0023     		movs	r3, #0
 637 01e6 C361     		str	r3, [r0, #28]
 252:Src/spi.c     ****         
 638              		.loc 1 252 9 is_stmt 1 view .LVU235
 252:Src/spi.c     ****         
 639              		.loc 1 252 36 is_stmt 0 view .LVU236
 640 01e8 4FF48053 		mov	r3, #4096
 641 01ec 0362     		str	r3, [r0, #32]
 254:Src/spi.c     ****         {
 642              		.loc 1 254 9 is_stmt 1 view .LVU237
 254:Src/spi.c     ****         {
 643              		.loc 1 254 13 is_stmt 0 view .LVU238
 644 01ee FFF7FEFF 		bl	HAL_DMA_Init
 645              	.LVL21:
 254:Src/spi.c     ****         {
ARM GAS  /tmp/ccj5OPZX.s 			page 20


 646              		.loc 1 254 12 view .LVU239
 647 01f2 0028     		cmp	r0, #0
 648 01f4 2FD1     		bne	.L32
 649              	.L23:
 258:Src/spi.c     **** 
 650              		.loc 1 258 9 is_stmt 1 view .LVU240
 258:Src/spi.c     **** 
 651              		.loc 1 258 9 view .LVU241
 652 01f6 244B     		ldr	r3, .L33+44
 653 01f8 6365     		str	r3, [r4, #84]
 258:Src/spi.c     **** 
 654              		.loc 1 258 9 view .LVU242
 655 01fa 9C62     		str	r4, [r3, #40]
 258:Src/spi.c     **** 
 656              		.loc 1 258 9 view .LVU243
 261:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel3_IRQn);
 657              		.loc 1 261 9 view .LVU244
 658 01fc 0022     		movs	r2, #0
 659 01fe 0121     		movs	r1, #1
 660 0200 0D20     		movs	r0, #13
 661 0202 FFF7FEFF 		bl	HAL_NVIC_SetPriority
 662              	.LVL22:
 262:Src/spi.c     ****         HAL_NVIC_SetPriority(DMA1_Channel4_IRQn, 1, 0);
 663              		.loc 1 262 9 view .LVU245
 664 0206 0D20     		movs	r0, #13
 665 0208 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 666              	.LVL23:
 263:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel4_IRQn);
 667              		.loc 1 263 9 view .LVU246
 668 020c 0022     		movs	r2, #0
 669 020e 0121     		movs	r1, #1
 670 0210 0E20     		movs	r0, #14
 671 0212 FFF7FEFF 		bl	HAL_NVIC_SetPriority
 672              	.LVL24:
 264:Src/spi.c     **** 
 673              		.loc 1 264 9 view .LVU247
 674 0216 0E20     		movs	r0, #14
 675 0218 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 676              	.LVL25:
 267:Src/spi.c     ****         SET_BIT(spiHandle->Instance->CR2, SPI_CR2_TXDMAEN);
 677              		.loc 1 267 9 view .LVU248
 678 021c 2268     		ldr	r2, [r4]
 679 021e 5368     		ldr	r3, [r2, #4]
 680 0220 43F00103 		orr	r3, r3, #1
 681 0224 5360     		str	r3, [r2, #4]
 268:Src/spi.c     **** 
 682              		.loc 1 268 9 view .LVU249
 683 0226 2268     		ldr	r2, [r4]
 684 0228 5368     		ldr	r3, [r2, #4]
 685 022a 43F00203 		orr	r3, r3, #2
 686 022e 5360     		str	r3, [r2, #4]
 271:Src/spi.c     ****     }
 687              		.loc 1 271 9 view .LVU250
 688 0230 2268     		ldr	r2, [r4]
 689 0232 1368     		ldr	r3, [r2]
 690 0234 43F04003 		orr	r3, r3, #64
 691 0238 1360     		str	r3, [r2]
ARM GAS  /tmp/ccj5OPZX.s 			page 21


 692              		.loc 1 273 1 is_stmt 0 view .LVU251
 693 023a F1E6     		b	.L13
 694              	.L29:
 220:Src/spi.c     ****             hdma_spi3_rx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 695              		.loc 1 220 13 is_stmt 1 view .LVU252
 220:Src/spi.c     ****             hdma_spi3_rx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 696              		.loc 1 220 51 is_stmt 0 view .LVU253
 697 023c 104B     		ldr	r3, .L33+36
 698 023e 0022     		movs	r2, #0
 699 0240 5A61     		str	r2, [r3, #20]
 221:Src/spi.c     ****         } else {
 700              		.loc 1 221 13 is_stmt 1 view .LVU254
 221:Src/spi.c     ****         } else {
 701              		.loc 1 221 48 is_stmt 0 view .LVU255
 702 0242 9A61     		str	r2, [r3, #24]
 703 0244 AAE7     		b	.L19
 704              	.L30:
 232:Src/spi.c     ****         }
 705              		.loc 1 232 13 is_stmt 1 view .LVU256
 706 0246 FFF7FEFF 		bl	Error_Handler
 707              	.LVL26:
 708 024a B1E7     		b	.L20
 709              	.L31:
 244:Src/spi.c     ****             hdma_spi3_tx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 710              		.loc 1 244 13 view .LVU257
 244:Src/spi.c     ****             hdma_spi3_tx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 711              		.loc 1 244 51 is_stmt 0 view .LVU258
 712 024c 0E4B     		ldr	r3, .L33+44
 713 024e 0022     		movs	r2, #0
 714 0250 5A61     		str	r2, [r3, #20]
 245:Src/spi.c     ****         } else {
 715              		.loc 1 245 13 is_stmt 1 view .LVU259
 245:Src/spi.c     ****         } else {
 716              		.loc 1 245 48 is_stmt 0 view .LVU260
 717 0252 9A61     		str	r2, [r3, #24]
 718 0254 C5E7     		b	.L22
 719              	.L32:
 256:Src/spi.c     ****         }
 720              		.loc 1 256 13 is_stmt 1 view .LVU261
 721 0256 FFF7FEFF 		bl	Error_Handler
 722              	.LVL27:
 723 025a CCE7     		b	.L23
 724              	.L34:
 725              		.align	2
 726              	.L33:
 727 025c 00300140 		.word	1073819648
 728 0260 003C0040 		.word	1073757184
 729 0264 00100240 		.word	1073876992
 730 0268 00040048 		.word	1207960576
 731 026c 00000000 		.word	.LANCHOR2
 732 0270 08000240 		.word	1073872904
 733 0274 00000000 		.word	.LANCHOR3
 734 0278 1C000240 		.word	1073872924
 735 027c 00080048 		.word	1207961600
 736 0280 00000000 		.word	.LANCHOR4
 737 0284 30000240 		.word	1073872944
 738 0288 00000000 		.word	.LANCHOR5
ARM GAS  /tmp/ccj5OPZX.s 			page 22


 739 028c 44000240 		.word	1073872964
 740              		.cfi_endproc
 741              	.LFE1990:
 743              		.section	.text.transmit_spi,"ax",%progbits
 744              		.align	1
 745              		.global	transmit_spi
 746              		.syntax unified
 747              		.thumb
 748              		.thumb_func
 749              		.fpu fpv4-sp-d16
 751              	transmit_spi:
 752              	.LVL28:
 753              	.LFB1992:
 274:Src/spi.c     **** 
 275:Src/spi.c     **** 
 276:Src/spi.c     **** static void DMA_SetConfig(DMA_HandleTypeDef *hdma, uint32_t SrcAddress, uint32_t DstAddress, uint32
 277:Src/spi.c     **** {
 278:Src/spi.c     ****     /* Clear DBM bit - not needed for G4 series */
 279:Src/spi.c     ****     
 280:Src/spi.c     ****     /* Configure DMA Channel data length */
 281:Src/spi.c     ****     hdma->Instance->CNDTR = DataLength;
 282:Src/spi.c     **** 
 283:Src/spi.c     ****     /* Memory to Peripheral */
 284:Src/spi.c     ****     if((hdma->Init.Direction) == DMA_MEMORY_TO_PERIPH)
 285:Src/spi.c     ****     {
 286:Src/spi.c     ****         /* Configure DMA Channel destination address */
 287:Src/spi.c     ****         hdma->Instance->CPAR = DstAddress;
 288:Src/spi.c     **** 
 289:Src/spi.c     ****         /* Configure DMA Channel source address */
 290:Src/spi.c     ****         hdma->Instance->CMAR = SrcAddress;
 291:Src/spi.c     ****     }
 292:Src/spi.c     ****     /* Peripheral to Memory */
 293:Src/spi.c     ****     else
 294:Src/spi.c     ****     {
 295:Src/spi.c     ****         /* Configure DMA Channel source address */
 296:Src/spi.c     ****         hdma->Instance->CPAR = SrcAddress;
 297:Src/spi.c     **** 
 298:Src/spi.c     ****         /* Configure DMA Channel destination address */
 299:Src/spi.c     ****         hdma->Instance->CMAR = DstAddress;
 300:Src/spi.c     ****     }
 301:Src/spi.c     **** }
 302:Src/spi.c     **** 
 303:Src/spi.c     **** void transmit_spi(SPI_HandleTypeDef* spiHandle, uint8_t *tx_buf, uint8_t *rx_buf, uint16_t len)
 304:Src/spi.c     **** {
 754              		.loc 1 304 1 view -0
 755              		.cfi_startproc
 756              		@ args = 0, pretend = 0, frame = 0
 757              		@ frame_needed = 0, uses_anonymous_args = 0
 758              		@ link register save eliminated.
 759              		.loc 1 304 1 is_stmt 0 view .LVU263
 760 0000 70B4     		push	{r4, r5, r6}
 761              	.LCFI6:
 762              		.cfi_def_cfa_offset 12
 763              		.cfi_offset 4, -12
 764              		.cfi_offset 5, -8
 765              		.cfi_offset 6, -4
 305:Src/spi.c     ****     // Disable DMA
ARM GAS  /tmp/ccj5OPZX.s 			page 23


 306:Src/spi.c     ****     // Disable DMA
 307:Src/spi.c     ****     __HAL_DMA_DISABLE(spiHandle->hdmatx);
 766              		.loc 1 307 5 is_stmt 1 view .LVU264
 767 0002 446D     		ldr	r4, [r0, #84]
 768 0004 2568     		ldr	r5, [r4]
 769 0006 2C68     		ldr	r4, [r5]
 770 0008 24F00104 		bic	r4, r4, #1
 771 000c 2C60     		str	r4, [r5]
 308:Src/spi.c     ****     __HAL_DMA_DISABLE(spiHandle->hdmarx);
 772              		.loc 1 308 5 view .LVU265
 773 000e 846D     		ldr	r4, [r0, #88]
 774 0010 2568     		ldr	r5, [r4]
 775 0012 2C68     		ldr	r4, [r5]
 776 0014 24F00104 		bic	r4, r4, #1
 777 0018 2C60     		str	r4, [r5]
 309:Src/spi.c     **** 
 310:Src/spi.c     ****     // Clear TX DMA flags - using correct G4 flags
 311:Src/spi.c     ****     __HAL_DMA_CLEAR_FLAG(spiHandle->hdmatx, 
 778              		.loc 1 311 5 view .LVU266
 779 001a 446D     		ldr	r4, [r0, #84]
 780 001c 2568     		ldr	r5, [r4]
 781 001e 274C     		ldr	r4, .L47
 782 0020 A542     		cmp	r5, r4
 783 0022 8CBF     		ite	hi
 784 0024 04F56574 		addhi	r4, r4, #916
 785 0028 254C     		ldrls	r4, .L47+4
 786 002a 4FF46045 		mov	r5, #57344
 787 002e 6560     		str	r5, [r4, #4]
 312:Src/spi.c     ****         (DMA_FLAG_TC4 | DMA_FLAG_HT4 | DMA_FLAG_TE4));
 313:Src/spi.c     **** 
 314:Src/spi.c     ****     // Clear RX DMA flags - using correct G4 flags  
 315:Src/spi.c     ****     __HAL_DMA_CLEAR_FLAG(spiHandle->hdmarx,
 788              		.loc 1 315 5 view .LVU267
 789 0030 846D     		ldr	r4, [r0, #88]
 790 0032 2568     		ldr	r5, [r4]
 791 0034 214C     		ldr	r4, .L47
 792 0036 A542     		cmp	r5, r4
 793 0038 8CBF     		ite	hi
 794 003a 04F56574 		addhi	r4, r4, #916
 795 003e 204C     		ldrls	r4, .L47+4
 796 0040 4FF46045 		mov	r5, #57344
 797 0044 6560     		str	r5, [r4, #4]
 316:Src/spi.c     ****         (DMA_FLAG_TC4 | DMA_FLAG_HT4 | DMA_FLAG_TE4));
 317:Src/spi.c     **** 
 318:Src/spi.c     **** 
 319:Src/spi.c     ****     // Enable DMA requests for SPI
 320:Src/spi.c     ****     SET_BIT(spiHandle->Instance->CR2, SPI_CR2_RXDMAEN);
 798              		.loc 1 320 5 view .LVU268
 799 0046 0568     		ldr	r5, [r0]
 800 0048 6C68     		ldr	r4, [r5, #4]
 801 004a 44F00104 		orr	r4, r4, #1
 802 004e 6C60     		str	r4, [r5, #4]
 321:Src/spi.c     ****     SET_BIT(spiHandle->Instance->CR2, SPI_CR2_TXDMAEN);
 803              		.loc 1 321 5 view .LVU269
 804 0050 0568     		ldr	r5, [r0]
 805 0052 6C68     		ldr	r4, [r5, #4]
 806 0054 44F00204 		orr	r4, r4, #2
ARM GAS  /tmp/ccj5OPZX.s 			page 24


 807 0058 6C60     		str	r4, [r5, #4]
 322:Src/spi.c     **** 
 323:Src/spi.c     ****     // Configure DMA channels
 324:Src/spi.c     ****     DMA_SetConfig(spiHandle->hdmatx, (uint32_t)tx_buf, (uint32_t)&spiHandle->Instance->DR, len);
 808              		.loc 1 324 5 view .LVU270
 809 005a 446D     		ldr	r4, [r0, #84]
 810              		.loc 1 324 66 is_stmt 0 view .LVU271
 811 005c 0568     		ldr	r5, [r0]
 812 005e 0C35     		adds	r5, r5, #12
 813              	.LVL29:
 814              	.LBB12:
 815              	.LBI12:
 276:Src/spi.c     **** {
 816              		.loc 1 276 13 is_stmt 1 view .LVU272
 817              	.LBB13:
 281:Src/spi.c     **** 
 818              		.loc 1 281 5 view .LVU273
 281:Src/spi.c     **** 
 819              		.loc 1 281 27 is_stmt 0 view .LVU274
 820 0060 2668     		ldr	r6, [r4]
 821 0062 7360     		str	r3, [r6, #4]
 284:Src/spi.c     ****     {
 822              		.loc 1 284 5 is_stmt 1 view .LVU275
 284:Src/spi.c     ****     {
 823              		.loc 1 284 7 is_stmt 0 view .LVU276
 824 0064 A668     		ldr	r6, [r4, #8]
 825 0066 102E     		cmp	r6, #16
 826 0068 1DD0     		beq	.L45
 296:Src/spi.c     **** 
 827              		.loc 1 296 9 is_stmt 1 view .LVU277
 296:Src/spi.c     **** 
 828              		.loc 1 296 30 is_stmt 0 view .LVU278
 829 006a 2668     		ldr	r6, [r4]
 830 006c B160     		str	r1, [r6, #8]
 299:Src/spi.c     ****     }
 831              		.loc 1 299 9 is_stmt 1 view .LVU279
 299:Src/spi.c     ****     }
 832              		.loc 1 299 13 is_stmt 0 view .LVU280
 833 006e 2168     		ldr	r1, [r4]
 834              	.LVL30:
 299:Src/spi.c     ****     }
 835              		.loc 1 299 30 view .LVU281
 836 0070 CD60     		str	r5, [r1, #12]
 837              	.LVL31:
 838              	.L41:
 299:Src/spi.c     ****     }
 839              		.loc 1 299 30 view .LVU282
 840              	.LBE13:
 841              	.LBE12:
 325:Src/spi.c     ****     DMA_SetConfig(spiHandle->hdmarx, (uint32_t)&spiHandle->Instance->DR, (uint32_t)rx_buf, len);
 842              		.loc 1 325 5 is_stmt 1 view .LVU283
 843 0072 816D     		ldr	r1, [r0, #88]
 844              		.loc 1 325 48 is_stmt 0 view .LVU284
 845 0074 0468     		ldr	r4, [r0]
 846 0076 0C34     		adds	r4, r4, #12
 847              	.LVL32:
 848              	.LBB15:
ARM GAS  /tmp/ccj5OPZX.s 			page 25


 849              	.LBI15:
 276:Src/spi.c     **** {
 850              		.loc 1 276 13 is_stmt 1 view .LVU285
 851              	.LBB16:
 281:Src/spi.c     **** 
 852              		.loc 1 281 5 view .LVU286
 281:Src/spi.c     **** 
 853              		.loc 1 281 9 is_stmt 0 view .LVU287
 854 0078 0D68     		ldr	r5, [r1]
 281:Src/spi.c     **** 
 855              		.loc 1 281 27 view .LVU288
 856 007a 6B60     		str	r3, [r5, #4]
 284:Src/spi.c     ****     {
 857              		.loc 1 284 5 is_stmt 1 view .LVU289
 284:Src/spi.c     ****     {
 858              		.loc 1 284 7 is_stmt 0 view .LVU290
 859 007c 8B68     		ldr	r3, [r1, #8]
 860              	.LVL33:
 284:Src/spi.c     ****     {
 861              		.loc 1 284 7 view .LVU291
 862 007e 102B     		cmp	r3, #16
 863 0080 16D0     		beq	.L46
 296:Src/spi.c     **** 
 864              		.loc 1 296 9 is_stmt 1 view .LVU292
 296:Src/spi.c     **** 
 865              		.loc 1 296 13 is_stmt 0 view .LVU293
 866 0082 0B68     		ldr	r3, [r1]
 296:Src/spi.c     **** 
 867              		.loc 1 296 30 view .LVU294
 868 0084 9C60     		str	r4, [r3, #8]
 869              	.LVL34:
 299:Src/spi.c     ****     }
 870              		.loc 1 299 9 is_stmt 1 view .LVU295
 299:Src/spi.c     ****     }
 871              		.loc 1 299 13 is_stmt 0 view .LVU296
 872 0086 0B68     		ldr	r3, [r1]
 299:Src/spi.c     ****     }
 873              		.loc 1 299 30 view .LVU297
 874 0088 DA60     		str	r2, [r3, #12]
 875              	.L43:
 876              	.LVL35:
 299:Src/spi.c     ****     }
 877              		.loc 1 299 30 view .LVU298
 878              	.LBE16:
 879              	.LBE15:
 326:Src/spi.c     **** 
 327:Src/spi.c     ****     // Enable DMA
 328:Src/spi.c     ****     __HAL_DMA_ENABLE(spiHandle->hdmarx);
 880              		.loc 1 328 5 is_stmt 1 view .LVU299
 881 008a 836D     		ldr	r3, [r0, #88]
 882 008c 1A68     		ldr	r2, [r3]
 883              	.LVL36:
 884              		.loc 1 328 5 is_stmt 0 view .LVU300
 885 008e 1368     		ldr	r3, [r2]
 886 0090 43F00103 		orr	r3, r3, #1
 887 0094 1360     		str	r3, [r2]
 329:Src/spi.c     ****     __HAL_DMA_ENABLE(spiHandle->hdmatx);
ARM GAS  /tmp/ccj5OPZX.s 			page 26


 888              		.loc 1 329 5 is_stmt 1 view .LVU301
 889 0096 436D     		ldr	r3, [r0, #84]
 890 0098 1A68     		ldr	r2, [r3]
 891 009a 1368     		ldr	r3, [r2]
 892 009c 43F00103 		orr	r3, r3, #1
 893 00a0 1360     		str	r3, [r2]
 330:Src/spi.c     **** }
 894              		.loc 1 330 1 is_stmt 0 view .LVU302
 895 00a2 70BC     		pop	{r4, r5, r6}
 896              	.LCFI7:
 897              		.cfi_remember_state
 898              		.cfi_restore 6
 899              		.cfi_restore 5
 900              		.cfi_restore 4
 901              		.cfi_def_cfa_offset 0
 902 00a4 7047     		bx	lr
 903              	.LVL37:
 904              	.L45:
 905              	.LCFI8:
 906              		.cfi_restore_state
 907              	.LBB18:
 908              	.LBB14:
 287:Src/spi.c     **** 
 909              		.loc 1 287 9 is_stmt 1 view .LVU303
 287:Src/spi.c     **** 
 910              		.loc 1 287 30 is_stmt 0 view .LVU304
 911 00a6 2668     		ldr	r6, [r4]
 912 00a8 B560     		str	r5, [r6, #8]
 290:Src/spi.c     ****     }
 913              		.loc 1 290 9 is_stmt 1 view .LVU305
 290:Src/spi.c     ****     }
 914              		.loc 1 290 13 is_stmt 0 view .LVU306
 915 00aa 2468     		ldr	r4, [r4]
 916              	.LVL38:
 290:Src/spi.c     ****     }
 917              		.loc 1 290 30 view .LVU307
 918 00ac E160     		str	r1, [r4, #12]
 919 00ae E0E7     		b	.L41
 920              	.LVL39:
 921              	.L46:
 290:Src/spi.c     ****     }
 922              		.loc 1 290 30 view .LVU308
 923              	.LBE14:
 924              	.LBE18:
 925              	.LBB19:
 926              	.LBB17:
 287:Src/spi.c     **** 
 927              		.loc 1 287 9 is_stmt 1 view .LVU309
 287:Src/spi.c     **** 
 928              		.loc 1 287 13 is_stmt 0 view .LVU310
 929 00b0 0B68     		ldr	r3, [r1]
 287:Src/spi.c     **** 
 930              		.loc 1 287 30 view .LVU311
 931 00b2 9A60     		str	r2, [r3, #8]
 932              	.LVL40:
 290:Src/spi.c     ****     }
 933              		.loc 1 290 9 is_stmt 1 view .LVU312
ARM GAS  /tmp/ccj5OPZX.s 			page 27


 290:Src/spi.c     ****     }
 934              		.loc 1 290 13 is_stmt 0 view .LVU313
 935 00b4 0B68     		ldr	r3, [r1]
 290:Src/spi.c     ****     }
 936              		.loc 1 290 30 view .LVU314
 937 00b6 DC60     		str	r4, [r3, #12]
 938 00b8 E7E7     		b	.L43
 939              	.L48:
 940 00ba 00BF     		.align	2
 941              	.L47:
 942 00bc 6C000240 		.word	1073873004
 943 00c0 00000240 		.word	1073872896
 944              	.LBE17:
 945              	.LBE19:
 946              		.cfi_endproc
 947              	.LFE1992:
 949              		.section	.text.HAL_SPI_MspDeInit,"ax",%progbits
 950              		.align	1
 951              		.global	HAL_SPI_MspDeInit
 952              		.syntax unified
 953              		.thumb
 954              		.thumb_func
 955              		.fpu fpv4-sp-d16
 957              	HAL_SPI_MspDeInit:
 958              	.LVL41:
 959              	.LFB1993:
 331:Src/spi.c     **** 
 332:Src/spi.c     **** 
 333:Src/spi.c     **** void HAL_SPI_MspDeInit(SPI_HandleTypeDef* spiHandle)
 334:Src/spi.c     **** {
 960              		.loc 1 334 1 is_stmt 1 view -0
 961              		.cfi_startproc
 962              		@ args = 0, pretend = 0, frame = 0
 963              		@ frame_needed = 0, uses_anonymous_args = 0
 964              		.loc 1 334 1 is_stmt 0 view .LVU316
 965 0000 10B5     		push	{r4, lr}
 966              	.LCFI9:
 967              		.cfi_def_cfa_offset 8
 968              		.cfi_offset 4, -8
 969              		.cfi_offset 14, -4
 970 0002 0446     		mov	r4, r0
 335:Src/spi.c     **** 
 336:Src/spi.c     ****   if(spiHandle->Instance==SPI3)
 971              		.loc 1 336 3 is_stmt 1 view .LVU317
 972              		.loc 1 336 15 is_stmt 0 view .LVU318
 973 0004 0368     		ldr	r3, [r0]
 974              		.loc 1 336 5 view .LVU319
 975 0006 184A     		ldr	r2, .L55
 976 0008 9342     		cmp	r3, r2
 977 000a 03D0     		beq	.L53
 337:Src/spi.c     ****   {
 338:Src/spi.c     ****   /* USER CODE BEGIN SPI3_MspDeInit 0 */
 339:Src/spi.c     **** 
 340:Src/spi.c     ****   /* USER CODE END SPI3_MspDeInit 0 */
 341:Src/spi.c     ****     /* Peripheral clock disable */
 342:Src/spi.c     ****     __HAL_RCC_SPI3_CLK_DISABLE();
 343:Src/spi.c     ****   
ARM GAS  /tmp/ccj5OPZX.s 			page 28


 344:Src/spi.c     ****     /**SPI3 GPIO Configuration    
 345:Src/spi.c     ****     PC10     ------> SPI3_SCK
 346:Src/spi.c     ****     PC11     ------> SPI3_MISO
 347:Src/spi.c     ****     PC12     ------> SPI3_MOSI 
 348:Src/spi.c     ****     */
 349:Src/spi.c     ****     HAL_GPIO_DeInit(GPIOC, GPIO_PIN_10|GPIO_PIN_11|GPIO_PIN_12);
 350:Src/spi.c     **** 
 351:Src/spi.c     ****     /* SPI3 DMA DeInit */
 352:Src/spi.c     ****     HAL_DMA_DeInit(spiHandle->hdmatx);
 353:Src/spi.c     ****     HAL_DMA_DeInit(spiHandle->hdmarx);
 354:Src/spi.c     **** 
 355:Src/spi.c     ****     /* SPI3 interrupt Deinit */
 356:Src/spi.c     ****     HAL_NVIC_DisableIRQ(SPI3_IRQn);
 357:Src/spi.c     ****   /* USER CODE BEGIN SPI3_MspDeInit 1 */
 358:Src/spi.c     **** 
 359:Src/spi.c     ****   /* USER CODE END SPI3_MspDeInit 1 */
 360:Src/spi.c     ****   }
 361:Src/spi.c     ****   else if(spiHandle->Instance==SPI1)
 978              		.loc 1 361 8 is_stmt 1 view .LVU320
 979              		.loc 1 361 10 is_stmt 0 view .LVU321
 980 000c 174A     		ldr	r2, .L55+4
 981 000e 9342     		cmp	r3, r2
 982 0010 15D0     		beq	.L54
 983              	.LVL42:
 984              	.L49:
 362:Src/spi.c     ****   {
 363:Src/spi.c     ****   /* USER CODE BEGIN SPI1_MspDeInit 0 */
 364:Src/spi.c     **** 
 365:Src/spi.c     ****   /* USER CODE END SPI1_MspDeInit 0 */
 366:Src/spi.c     ****     /* Peripheral clock disable */
 367:Src/spi.c     ****     __HAL_RCC_SPI1_CLK_DISABLE();
 368:Src/spi.c     **** 
 369:Src/spi.c     ****     /**SPI1 GPIO Configuration
 370:Src/spi.c     ****     PA5     ------> SPI1_SCK
 371:Src/spi.c     ****     PA6     ------> SPI1_MISO
 372:Src/spi.c     ****     PA7     ------> SPI1_MOSI
 373:Src/spi.c     ****     */
 374:Src/spi.c     ****     HAL_GPIO_DeInit(GPIOB, GPIO_PIN_3|GPIO_PIN_4|GPIO_PIN_5);
 375:Src/spi.c     **** 
 376:Src/spi.c     ****     /* SPI1 DMA DeInit */
 377:Src/spi.c     ****     HAL_DMA_DeInit(spiHandle->hdmarx);
 378:Src/spi.c     ****     HAL_DMA_DeInit(spiHandle->hdmatx);
 379:Src/spi.c     ****     HAL_NVIC_DisableIRQ(SPI1_IRQn);
 380:Src/spi.c     ****   /* USER CODE BEGIN SPI1_MspDeInit 1 */
 381:Src/spi.c     **** 
 382:Src/spi.c     ****   /* USER CODE END SPI1_MspDeInit 1 */
 383:Src/spi.c     ****   }
 384:Src/spi.c     **** } 
 985              		.loc 1 384 1 view .LVU322
 986 0012 10BD     		pop	{r4, pc}
 987              	.LVL43:
 988              	.L53:
 342:Src/spi.c     ****   
 989              		.loc 1 342 5 is_stmt 1 view .LVU323
 990 0014 02F5EA32 		add	r2, r2, #119808
 991 0018 936D     		ldr	r3, [r2, #88]
 992 001a 23F40043 		bic	r3, r3, #32768
ARM GAS  /tmp/ccj5OPZX.s 			page 29


 993 001e 9365     		str	r3, [r2, #88]
 349:Src/spi.c     **** 
 994              		.loc 1 349 5 view .LVU324
 995 0020 4FF4E051 		mov	r1, #7168
 996 0024 1248     		ldr	r0, .L55+8
 997              	.LVL44:
 349:Src/spi.c     **** 
 998              		.loc 1 349 5 is_stmt 0 view .LVU325
 999 0026 FFF7FEFF 		bl	HAL_GPIO_DeInit
 1000              	.LVL45:
 352:Src/spi.c     ****     HAL_DMA_DeInit(spiHandle->hdmarx);
 1001              		.loc 1 352 5 is_stmt 1 view .LVU326
 1002 002a 606D     		ldr	r0, [r4, #84]
 1003 002c FFF7FEFF 		bl	HAL_DMA_DeInit
 1004              	.LVL46:
 353:Src/spi.c     **** 
 1005              		.loc 1 353 5 view .LVU327
 1006 0030 A06D     		ldr	r0, [r4, #88]
 1007 0032 FFF7FEFF 		bl	HAL_DMA_DeInit
 1008              	.LVL47:
 356:Src/spi.c     ****   /* USER CODE BEGIN SPI3_MspDeInit 1 */
 1009              		.loc 1 356 5 view .LVU328
 1010 0036 3320     		movs	r0, #51
 1011 0038 FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
 1012              	.LVL48:
 1013 003c E9E7     		b	.L49
 1014              	.LVL49:
 1015              	.L54:
 367:Src/spi.c     **** 
 1016              		.loc 1 367 5 view .LVU329
 1017 003e 02F56042 		add	r2, r2, #57344
 1018 0042 136E     		ldr	r3, [r2, #96]
 1019 0044 23F48053 		bic	r3, r3, #4096
 1020 0048 1366     		str	r3, [r2, #96]
 374:Src/spi.c     **** 
 1021              		.loc 1 374 5 view .LVU330
 1022 004a 3821     		movs	r1, #56
 1023 004c 0948     		ldr	r0, .L55+12
 1024              	.LVL50:
 374:Src/spi.c     **** 
 1025              		.loc 1 374 5 is_stmt 0 view .LVU331
 1026 004e FFF7FEFF 		bl	HAL_GPIO_DeInit
 1027              	.LVL51:
 377:Src/spi.c     ****     HAL_DMA_DeInit(spiHandle->hdmatx);
 1028              		.loc 1 377 5 is_stmt 1 view .LVU332
 1029 0052 A06D     		ldr	r0, [r4, #88]
 1030 0054 FFF7FEFF 		bl	HAL_DMA_DeInit
 1031              	.LVL52:
 378:Src/spi.c     ****     HAL_NVIC_DisableIRQ(SPI1_IRQn);
 1032              		.loc 1 378 5 view .LVU333
 1033 0058 606D     		ldr	r0, [r4, #84]
 1034 005a FFF7FEFF 		bl	HAL_DMA_DeInit
 1035              	.LVL53:
 379:Src/spi.c     ****   /* USER CODE BEGIN SPI1_MspDeInit 1 */
 1036              		.loc 1 379 5 view .LVU334
 1037 005e 2320     		movs	r0, #35
 1038 0060 FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
ARM GAS  /tmp/ccj5OPZX.s 			page 30


 1039              	.LVL54:
 1040              		.loc 1 384 1 is_stmt 0 view .LVU335
 1041 0064 D5E7     		b	.L49
 1042              	.L56:
 1043 0066 00BF     		.align	2
 1044              	.L55:
 1045 0068 003C0040 		.word	1073757184
 1046 006c 00300140 		.word	1073819648
 1047 0070 00080048 		.word	1207961600
 1048 0074 00040048 		.word	1207960576
 1049              		.cfi_endproc
 1050              	.LFE1993:
 1052              		.global	hdma_spi1_tx
 1053              		.global	hdma_spi1_rx
 1054              		.global	hspi1
 1055              		.global	hdma_spi3_rx
 1056              		.global	hdma_spi3_tx
 1057              		.global	hspi3
 1058              		.section	.bss.hdma_spi1_rx,"aw",%nobits
 1059              		.align	2
 1060              		.set	.LANCHOR2,. + 0
 1063              	hdma_spi1_rx:
 1064 0000 00000000 		.space	96
 1064      00000000 
 1064      00000000 
 1064      00000000 
 1064      00000000 
 1065              		.section	.bss.hdma_spi1_tx,"aw",%nobits
 1066              		.align	2
 1067              		.set	.LANCHOR3,. + 0
 1070              	hdma_spi1_tx:
 1071 0000 00000000 		.space	96
 1071      00000000 
 1071      00000000 
 1071      00000000 
 1071      00000000 
 1072              		.section	.bss.hdma_spi3_rx,"aw",%nobits
 1073              		.align	2
 1074              		.set	.LANCHOR4,. + 0
 1077              	hdma_spi3_rx:
 1078 0000 00000000 		.space	96
 1078      00000000 
 1078      00000000 
 1078      00000000 
 1078      00000000 
 1079              		.section	.bss.hdma_spi3_tx,"aw",%nobits
 1080              		.align	2
 1081              		.set	.LANCHOR5,. + 0
 1084              	hdma_spi3_tx:
 1085 0000 00000000 		.space	96
 1085      00000000 
 1085      00000000 
 1085      00000000 
 1085      00000000 
 1086              		.section	.bss.hspi1,"aw",%nobits
 1087              		.align	2
 1088              		.set	.LANCHOR0,. + 0
ARM GAS  /tmp/ccj5OPZX.s 			page 31


 1091              	hspi1:
 1092 0000 00000000 		.space	100
 1092      00000000 
 1092      00000000 
 1092      00000000 
 1092      00000000 
 1093              		.section	.bss.hspi3,"aw",%nobits
 1094              		.align	2
 1095              		.set	.LANCHOR1,. + 0
 1098              	hspi3:
 1099 0000 00000000 		.space	100
 1099      00000000 
 1099      00000000 
 1099      00000000 
 1099      00000000 
 1100              		.text
 1101              	.Letext0:
 1102              		.file 2 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/machine/_default_type
 1103              		.file 3 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/sys/_stdint.h"
 1104              		.file 4 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g431xx.h"
 1105              		.file 5 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_def.h"
 1106              		.file 6 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_gpio.h"
 1107              		.file 7 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dma.h"
 1108              		.file 8 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_spi.h"
 1109              		.file 9 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_ll_tim.h"
 1110              		.file 10 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_ll_usart.h"
 1111              		.file 11 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_ll_dma.h"
 1112              		.file 12 "Inc/spi.h"
 1113              		.file 13 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_cortex.h"
 1114              		.file 14 "Inc/main.h"
ARM GAS  /tmp/ccj5OPZX.s 			page 32


DEFINED SYMBOLS
                            *ABS*:0000000000000000 spi.c
     /tmp/ccj5OPZX.s:18     .text.MX_SPI1_Init:0000000000000000 $t
     /tmp/ccj5OPZX.s:26     .text.MX_SPI1_Init:0000000000000000 MX_SPI1_Init
     /tmp/ccj5OPZX.s:101    .text.MX_SPI1_Init:0000000000000040 $d
     /tmp/ccj5OPZX.s:107    .text.MX_SPI3_Init:0000000000000000 $t
     /tmp/ccj5OPZX.s:114    .text.MX_SPI3_Init:0000000000000000 MX_SPI3_Init
     /tmp/ccj5OPZX.s:188    .text.MX_SPI3_Init:0000000000000040 $d
     /tmp/ccj5OPZX.s:194    .text.HAL_SPI_MspInit:0000000000000000 $t
     /tmp/ccj5OPZX.s:201    .text.HAL_SPI_MspInit:0000000000000000 HAL_SPI_MspInit
     /tmp/ccj5OPZX.s:727    .text.HAL_SPI_MspInit:000000000000025c $d
     /tmp/ccj5OPZX.s:744    .text.transmit_spi:0000000000000000 $t
     /tmp/ccj5OPZX.s:751    .text.transmit_spi:0000000000000000 transmit_spi
     /tmp/ccj5OPZX.s:942    .text.transmit_spi:00000000000000bc $d
     /tmp/ccj5OPZX.s:950    .text.HAL_SPI_MspDeInit:0000000000000000 $t
     /tmp/ccj5OPZX.s:957    .text.HAL_SPI_MspDeInit:0000000000000000 HAL_SPI_MspDeInit
     /tmp/ccj5OPZX.s:1045   .text.HAL_SPI_MspDeInit:0000000000000068 $d
     /tmp/ccj5OPZX.s:1070   .bss.hdma_spi1_tx:0000000000000000 hdma_spi1_tx
     /tmp/ccj5OPZX.s:1063   .bss.hdma_spi1_rx:0000000000000000 hdma_spi1_rx
     /tmp/ccj5OPZX.s:1091   .bss.hspi1:0000000000000000 hspi1
     /tmp/ccj5OPZX.s:1077   .bss.hdma_spi3_rx:0000000000000000 hdma_spi3_rx
     /tmp/ccj5OPZX.s:1084   .bss.hdma_spi3_tx:0000000000000000 hdma_spi3_tx
     /tmp/ccj5OPZX.s:1098   .bss.hspi3:0000000000000000 hspi3
     /tmp/ccj5OPZX.s:1059   .bss.hdma_spi1_rx:0000000000000000 $d
     /tmp/ccj5OPZX.s:1066   .bss.hdma_spi1_tx:0000000000000000 $d
     /tmp/ccj5OPZX.s:1073   .bss.hdma_spi3_rx:0000000000000000 $d
     /tmp/ccj5OPZX.s:1080   .bss.hdma_spi3_tx:0000000000000000 $d
     /tmp/ccj5OPZX.s:1087   .bss.hspi1:0000000000000000 $d
     /tmp/ccj5OPZX.s:1094   .bss.hspi3:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_SPI_Init
Error_Handler
HAL_GPIO_Init
HAL_DMA_Init
HAL_NVIC_SetPriority
HAL_NVIC_EnableIRQ
HAL_GPIO_DeInit
HAL_DMA_DeInit
HAL_NVIC_DisableIRQ
