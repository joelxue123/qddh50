ARM GAS  /tmp/ccNhFRu0.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 2
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 2
  13              		.file	"spi.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.MX_SPI1_Init,"ax",%progbits
  18              		.align	1
  19              		.p2align 2,,3
  20              		.global	MX_SPI1_Init
  21              		.arch armv7e-m
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  25              		.fpu fpv4-sp-d16
  27              	MX_SPI1_Init:
  28              	.LFB1867:
  29              		.file 1 "Src/spi.c"
   1:Src/spi.c     **** /**
   2:Src/spi.c     ****   ******************************************************************************
   3:Src/spi.c     ****   * File Name          : SPI.c
   4:Src/spi.c     ****   * Description        : This file provides code for the configuration
   5:Src/spi.c     ****   *                      of the SPI instances.
   6:Src/spi.c     ****   ******************************************************************************
   7:Src/spi.c     ****   * This notice applies to any and all portions of this file
   8:Src/spi.c     ****   * that are not between comment pairs USER CODE BEGIN and
   9:Src/spi.c     ****   * USER CODE END. Other portions of this file, whether 
  10:Src/spi.c     ****   * inserted by the user or by software development tools
  11:Src/spi.c     ****   * are owned by their respective copyright owners.
  12:Src/spi.c     ****   *
  13:Src/spi.c     ****   * Copyright (c) 2018 STMicroelectronics International N.V. 
  14:Src/spi.c     ****   * All rights reserved.
  15:Src/spi.c     ****   *
  16:Src/spi.c     ****   * Redistribution and use in source and binary forms, with or without 
  17:Src/spi.c     ****   * modification, are permitted, provided that the following conditions are met:
  18:Src/spi.c     ****   *
  19:Src/spi.c     ****   * 1. Redistribution of source code must retain the above copyright notice, 
  20:Src/spi.c     ****   *    this list of conditions and the following disclaimer.
  21:Src/spi.c     ****   * 2. Redistributions in binary form must reproduce the above copyright notice,
  22:Src/spi.c     ****   *    this list of conditions and the following disclaimer in the documentation
  23:Src/spi.c     ****   *    and/or other materials provided with the distribution.
  24:Src/spi.c     ****   * 3. Neither the name of STMicroelectronics nor the names of other 
  25:Src/spi.c     ****   *    contributors to this software may be used to endorse or promote products 
  26:Src/spi.c     ****   *    derived from this software without specific written permission.
  27:Src/spi.c     ****   * 4. This software, including modifications and/or derivative works of this 
  28:Src/spi.c     ****   *    software, must execute solely and exclusively on microcontroller or
  29:Src/spi.c     ****   *    microprocessor devices manufactured by or for STMicroelectronics.
ARM GAS  /tmp/ccNhFRu0.s 			page 2


  30:Src/spi.c     ****   * 5. Redistribution and use of this software other than as permitted under 
  31:Src/spi.c     ****   *    this license is void and will automatically terminate your rights under 
  32:Src/spi.c     ****   *    this license. 
  33:Src/spi.c     ****   *
  34:Src/spi.c     ****   * THIS SOFTWARE IS PROVIDED BY STMICROELECTRONICS AND CONTRIBUTORS "AS IS" 
  35:Src/spi.c     ****   * AND ANY EXPRESS, IMPLIED OR STATUTORY WARRANTIES, INCLUDING, BUT NOT 
  36:Src/spi.c     ****   * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A 
  37:Src/spi.c     ****   * PARTICULAR PURPOSE AND NON-INFRINGEMENT OF THIRD PARTY INTELLECTUAL PROPERTY
  38:Src/spi.c     ****   * RIGHTS ARE DISCLAIMED TO THE FULLEST EXTENT PERMITTED BY LAW. IN NO EVENT 
  39:Src/spi.c     ****   * SHALL STMICROELECTRONICS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
  40:Src/spi.c     ****   * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
  41:Src/spi.c     ****   * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, 
  42:Src/spi.c     ****   * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF 
  43:Src/spi.c     ****   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING 
  44:Src/spi.c     ****   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
  45:Src/spi.c     ****   * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  46:Src/spi.c     ****   *
  47:Src/spi.c     ****   ******************************************************************************
  48:Src/spi.c     ****   */
  49:Src/spi.c     **** 
  50:Src/spi.c     **** /* Includes ------------------------------------------------------------------*/
  51:Src/spi.c     **** #include "spi.h"
  52:Src/spi.c     **** 
  53:Src/spi.c     **** #include "gpio.h"
  54:Src/spi.c     **** #include "dma.h"
  55:Src/spi.c     **** 
  56:Src/spi.c     **** /* USER CODE BEGIN 0 */
  57:Src/spi.c     **** 
  58:Src/spi.c     **** /* USER CODE END 0 */
  59:Src/spi.c     **** 
  60:Src/spi.c     **** SPI_HandleTypeDef hspi3;
  61:Src/spi.c     **** DMA_HandleTypeDef hdma_spi3_tx;
  62:Src/spi.c     **** DMA_HandleTypeDef hdma_spi3_rx;
  63:Src/spi.c     **** 
  64:Src/spi.c     **** SPI_HandleTypeDef hspi1;
  65:Src/spi.c     **** DMA_HandleTypeDef hdma_spi1_rx;
  66:Src/spi.c     **** DMA_HandleTypeDef hdma_spi1_tx;
  67:Src/spi.c     **** 
  68:Src/spi.c     **** 
  69:Src/spi.c     **** 
  70:Src/spi.c     **** void MX_SPI1_Init(void)
  71:Src/spi.c     **** {
  30              		.loc 1 71 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  72:Src/spi.c     **** 
  73:Src/spi.c     ****   /* USER CODE BEGIN SPI1_Init 0 */
  74:Src/spi.c     **** 
  75:Src/spi.c     ****   /* USER CODE END SPI1_Init 0 */
  76:Src/spi.c     **** 
  77:Src/spi.c     ****   /* USER CODE BEGIN SPI1_Init 1 */
  78:Src/spi.c     **** 
  79:Src/spi.c     ****   /* USER CODE END SPI1_Init 1 */
  80:Src/spi.c     ****   /* SPI1 parameter configuration*/
  81:Src/spi.c     ****   hspi1.Instance = SPI1;
  34              		.loc 1 81 3 view .LVU1
ARM GAS  /tmp/ccNhFRu0.s 			page 3


  71:Src/spi.c     **** 
  35              		.loc 1 71 1 is_stmt 0 view .LVU2
  36 0000 10B5     		push	{r4, lr}
  37              	.LCFI0:
  38              		.cfi_def_cfa_offset 8
  39              		.cfi_offset 4, -8
  40              		.cfi_offset 14, -4
  41              		.loc 1 81 18 view .LVU3
  42 0002 1048     		ldr	r0, .L6
  43 0004 104C     		ldr	r4, .L6+4
  82:Src/spi.c     ****   hspi1.Init.Mode = SPI_MODE_MASTER;
  44              		.loc 1 82 19 view .LVU4
  45 0006 4FF48272 		mov	r2, #260
  83:Src/spi.c     ****   hspi1.Init.Direction = SPI_DIRECTION_2LINES;
  46              		.loc 1 83 24 view .LVU5
  47 000a 0023     		movs	r3, #0
  82:Src/spi.c     ****   hspi1.Init.Mode = SPI_MODE_MASTER;
  48              		.loc 1 82 19 view .LVU6
  49 000c C0E90042 		strd	r4, r2, [r0]
  50              		.loc 1 83 3 is_stmt 1 view .LVU7
  84:Src/spi.c     ****   hspi1.Init.DataSize = SPI_DATASIZE_8BIT;
  51              		.loc 1 84 23 is_stmt 0 view .LVU8
  52 0010 4FF4E061 		mov	r1, #1792
  85:Src/spi.c     ****   hspi1.Init.CLKPolarity = SPI_POLARITY_LOW;
  86:Src/spi.c     ****   hspi1.Init.CLKPhase = SPI_PHASE_2EDGE;
  53              		.loc 1 86 23 view .LVU9
  54 0014 0122     		movs	r2, #1
  84:Src/spi.c     ****   hspi1.Init.DataSize = SPI_DATASIZE_8BIT;
  55              		.loc 1 84 23 view .LVU10
  56 0016 C0E90231 		strd	r3, r1, [r0, #8]
  85:Src/spi.c     ****   hspi1.Init.CLKPolarity = SPI_POLARITY_LOW;
  57              		.loc 1 85 3 is_stmt 1 view .LVU11
  58              		.loc 1 86 23 is_stmt 0 view .LVU12
  59 001a C0E90432 		strd	r3, r2, [r0, #16]
  87:Src/spi.c     ****   hspi1.Init.NSS = SPI_NSS_SOFT;
  60              		.loc 1 87 3 is_stmt 1 view .LVU13
  61              		.loc 1 87 18 is_stmt 0 view .LVU14
  62 001e 4FF40074 		mov	r4, #512
  88:Src/spi.c     ****   hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_16;
  63              		.loc 1 88 32 view .LVU15
  64 0022 1821     		movs	r1, #24
  89:Src/spi.c     ****   hspi1.Init.FirstBit = SPI_FIRSTBIT_MSB;
  90:Src/spi.c     ****   hspi1.Init.TIMode = SPI_TIMODE_DISABLE;
  91:Src/spi.c     ****   hspi1.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
  92:Src/spi.c     ****   hspi1.Init.CRCPolynomial = 10;
  65              		.loc 1 92 28 view .LVU16
  66 0024 0A22     		movs	r2, #10
  88:Src/spi.c     ****   hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_16;
  67              		.loc 1 88 32 view .LVU17
  68 0026 C0E90641 		strd	r4, r1, [r0, #24]
  89:Src/spi.c     ****   hspi1.Init.FirstBit = SPI_FIRSTBIT_MSB;
  69              		.loc 1 89 3 is_stmt 1 view .LVU18
  90:Src/spi.c     ****   hspi1.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
  70              		.loc 1 90 21 is_stmt 0 view .LVU19
  71 002a C0E90833 		strd	r3, r3, [r0, #32]
  91:Src/spi.c     ****   hspi1.Init.CRCPolynomial = 10;
  72              		.loc 1 91 3 is_stmt 1 view .LVU20
ARM GAS  /tmp/ccNhFRu0.s 			page 4


  73              		.loc 1 92 28 is_stmt 0 view .LVU21
  74 002e C0E90A32 		strd	r3, r2, [r0, #40]
  93:Src/spi.c     ****   if (HAL_SPI_Init(&hspi1) != HAL_OK)
  75              		.loc 1 93 3 is_stmt 1 view .LVU22
  76              		.loc 1 93 7 is_stmt 0 view .LVU23
  77 0032 FFF7FEFF 		bl	HAL_SPI_Init
  78              	.LVL0:
  79              		.loc 1 93 6 view .LVU24
  80 0036 00B9     		cbnz	r0, .L5
  94:Src/spi.c     ****   {
  95:Src/spi.c     ****     Error_Handler();
  96:Src/spi.c     ****   }
  97:Src/spi.c     ****   /* USER CODE BEGIN SPI1_Init 2 */
  98:Src/spi.c     **** 
  99:Src/spi.c     ****   /* USER CODE END SPI1_Init 2 */
 100:Src/spi.c     **** 
 101:Src/spi.c     **** }
  81              		.loc 1 101 1 view .LVU25
  82 0038 10BD     		pop	{r4, pc}
  83              	.L5:
  95:Src/spi.c     ****   }
  84              		.loc 1 95 5 is_stmt 1 view .LVU26
  85              		.loc 1 101 1 is_stmt 0 view .LVU27
  86 003a BDE81040 		pop	{r4, lr}
  87              	.LCFI1:
  88              		.cfi_restore 14
  89              		.cfi_restore 4
  90              		.cfi_def_cfa_offset 0
  95:Src/spi.c     ****   }
  91              		.loc 1 95 5 view .LVU28
  92 003e FFF7FEBF 		b	Error_Handler
  93              	.LVL1:
  94              	.L7:
  95 0042 00BF     		.align	2
  96              	.L6:
  97 0044 00000000 		.word	.LANCHOR0
  98 0048 00300140 		.word	1073819648
  99              		.cfi_endproc
 100              	.LFE1867:
 102              		.section	.text.MX_SPI3_Init,"ax",%progbits
 103              		.align	1
 104              		.p2align 2,,3
 105              		.global	MX_SPI3_Init
 106              		.syntax unified
 107              		.thumb
 108              		.thumb_func
 109              		.fpu fpv4-sp-d16
 111              	MX_SPI3_Init:
 112              	.LFB1868:
 102:Src/spi.c     **** 
 103:Src/spi.c     **** 
 104:Src/spi.c     **** /* SPI3 init function */
 105:Src/spi.c     **** void MX_SPI3_Init(void)
 106:Src/spi.c     **** {
 113              		.loc 1 106 1 is_stmt 1 view -0
 114              		.cfi_startproc
 115              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccNhFRu0.s 			page 5


 116              		@ frame_needed = 0, uses_anonymous_args = 0
 107:Src/spi.c     **** 
 108:Src/spi.c     ****   hspi3.Instance = SPI3;
 117              		.loc 1 108 3 view .LVU30
 106:Src/spi.c     **** 
 118              		.loc 1 106 1 is_stmt 0 view .LVU31
 119 0000 10B5     		push	{r4, lr}
 120              	.LCFI2:
 121              		.cfi_def_cfa_offset 8
 122              		.cfi_offset 4, -8
 123              		.cfi_offset 14, -4
 124              		.loc 1 108 18 view .LVU32
 125 0002 1048     		ldr	r0, .L12
 126 0004 104C     		ldr	r4, .L12+4
 109:Src/spi.c     ****   hspi3.Init.Mode = SPI_MODE_MASTER;
 127              		.loc 1 109 19 view .LVU33
 128 0006 4FF48272 		mov	r2, #260
 110:Src/spi.c     ****   hspi3.Init.Direction = SPI_DIRECTION_2LINES;
 129              		.loc 1 110 24 view .LVU34
 130 000a 0023     		movs	r3, #0
 109:Src/spi.c     ****   hspi3.Init.Mode = SPI_MODE_MASTER;
 131              		.loc 1 109 19 view .LVU35
 132 000c C0E90042 		strd	r4, r2, [r0]
 133              		.loc 1 110 3 is_stmt 1 view .LVU36
 111:Src/spi.c     ****   hspi3.Init.DataSize = SPI_DATASIZE_16BIT;
 134              		.loc 1 111 23 is_stmt 0 view .LVU37
 135 0010 4FF47061 		mov	r1, #3840
 112:Src/spi.c     ****   hspi3.Init.CLKPolarity = SPI_POLARITY_LOW;
 113:Src/spi.c     ****   hspi3.Init.CLKPhase = SPI_PHASE_2EDGE;
 136              		.loc 1 113 23 view .LVU38
 137 0014 0122     		movs	r2, #1
 111:Src/spi.c     ****   hspi3.Init.DataSize = SPI_DATASIZE_16BIT;
 138              		.loc 1 111 23 view .LVU39
 139 0016 C0E90231 		strd	r3, r1, [r0, #8]
 112:Src/spi.c     ****   hspi3.Init.CLKPolarity = SPI_POLARITY_LOW;
 140              		.loc 1 112 3 is_stmt 1 view .LVU40
 141              		.loc 1 113 23 is_stmt 0 view .LVU41
 142 001a C0E90432 		strd	r3, r2, [r0, #16]
 114:Src/spi.c     ****   hspi3.Init.NSS = SPI_NSS_SOFT;
 143              		.loc 1 114 3 is_stmt 1 view .LVU42
 144              		.loc 1 114 18 is_stmt 0 view .LVU43
 145 001e 4FF40074 		mov	r4, #512
 115:Src/spi.c     ****   hspi3.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_16;
 146              		.loc 1 115 32 view .LVU44
 147 0022 1821     		movs	r1, #24
 116:Src/spi.c     ****   hspi3.Init.FirstBit = SPI_FIRSTBIT_MSB;
 117:Src/spi.c     ****   hspi3.Init.TIMode = SPI_TIMODE_DISABLE;
 118:Src/spi.c     ****   hspi3.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
 119:Src/spi.c     ****   hspi3.Init.CRCPolynomial = 10;
 148              		.loc 1 119 28 view .LVU45
 149 0024 0A22     		movs	r2, #10
 115:Src/spi.c     ****   hspi3.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_16;
 150              		.loc 1 115 32 view .LVU46
 151 0026 C0E90641 		strd	r4, r1, [r0, #24]
 116:Src/spi.c     ****   hspi3.Init.FirstBit = SPI_FIRSTBIT_MSB;
 152              		.loc 1 116 3 is_stmt 1 view .LVU47
 117:Src/spi.c     ****   hspi3.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
ARM GAS  /tmp/ccNhFRu0.s 			page 6


 153              		.loc 1 117 21 is_stmt 0 view .LVU48
 154 002a C0E90833 		strd	r3, r3, [r0, #32]
 118:Src/spi.c     ****   hspi3.Init.CRCPolynomial = 10;
 155              		.loc 1 118 3 is_stmt 1 view .LVU49
 156              		.loc 1 119 28 is_stmt 0 view .LVU50
 157 002e C0E90A32 		strd	r3, r2, [r0, #40]
 120:Src/spi.c     ****   if (HAL_SPI_Init(&hspi3) != HAL_OK)
 158              		.loc 1 120 3 is_stmt 1 view .LVU51
 159              		.loc 1 120 7 is_stmt 0 view .LVU52
 160 0032 FFF7FEFF 		bl	HAL_SPI_Init
 161              	.LVL2:
 162              		.loc 1 120 6 view .LVU53
 163 0036 00B9     		cbnz	r0, .L11
 121:Src/spi.c     ****   {
 122:Src/spi.c     ****     Error_Handler();
 123:Src/spi.c     ****   }
 124:Src/spi.c     **** 
 125:Src/spi.c     **** }
 164              		.loc 1 125 1 view .LVU54
 165 0038 10BD     		pop	{r4, pc}
 166              	.L11:
 122:Src/spi.c     ****   }
 167              		.loc 1 122 5 is_stmt 1 view .LVU55
 168              		.loc 1 125 1 is_stmt 0 view .LVU56
 169 003a BDE81040 		pop	{r4, lr}
 170              	.LCFI3:
 171              		.cfi_restore 14
 172              		.cfi_restore 4
 173              		.cfi_def_cfa_offset 0
 122:Src/spi.c     ****   }
 174              		.loc 1 122 5 view .LVU57
 175 003e FFF7FEBF 		b	Error_Handler
 176              	.LVL3:
 177              	.L13:
 178 0042 00BF     		.align	2
 179              	.L12:
 180 0044 00000000 		.word	.LANCHOR1
 181 0048 003C0040 		.word	1073757184
 182              		.cfi_endproc
 183              	.LFE1868:
 185              		.section	.text.HAL_SPI_MspInit,"ax",%progbits
 186              		.align	1
 187              		.p2align 2,,3
 188              		.global	HAL_SPI_MspInit
 189              		.syntax unified
 190              		.thumb
 191              		.thumb_func
 192              		.fpu fpv4-sp-d16
 194              	HAL_SPI_MspInit:
 195              	.LVL4:
 196              	.LFB1869:
 126:Src/spi.c     **** 
 127:Src/spi.c     **** 
 128:Src/spi.c     **** 
 129:Src/spi.c     **** 
 130:Src/spi.c     **** void HAL_SPI_MspInit(SPI_HandleTypeDef* spiHandle)
 131:Src/spi.c     **** {
ARM GAS  /tmp/ccNhFRu0.s 			page 7


 197              		.loc 1 131 1 is_stmt 1 view -0
 198              		.cfi_startproc
 199              		@ args = 0, pretend = 0, frame = 48
 200              		@ frame_needed = 0, uses_anonymous_args = 0
 132:Src/spi.c     ****     GPIO_InitTypeDef GPIO_InitStruct = {0};
 201              		.loc 1 132 5 view .LVU59
 131:Src/spi.c     ****     GPIO_InitTypeDef GPIO_InitStruct = {0};
 202              		.loc 1 131 1 is_stmt 0 view .LVU60
 203 0000 70B5     		push	{r4, r5, r6, lr}
 204              	.LCFI4:
 205              		.cfi_def_cfa_offset 16
 206              		.cfi_offset 4, -16
 207              		.cfi_offset 5, -12
 208              		.cfi_offset 6, -8
 209              		.cfi_offset 14, -4
 133:Src/spi.c     ****     if(spiHandle->Instance == SPI1)
 210              		.loc 1 133 17 view .LVU61
 211 0002 0368     		ldr	r3, [r0]
 212              		.loc 1 133 7 view .LVU62
 213 0004 894A     		ldr	r2, .L45
 131:Src/spi.c     ****     GPIO_InitTypeDef GPIO_InitStruct = {0};
 214              		.loc 1 131 1 view .LVU63
 215 0006 8CB0     		sub	sp, sp, #48
 216              	.LCFI5:
 217              		.cfi_def_cfa_offset 64
 132:Src/spi.c     ****     GPIO_InitTypeDef GPIO_InitStruct = {0};
 218              		.loc 1 132 22 view .LVU64
 219 0008 0024     		movs	r4, #0
 220              		.loc 1 133 7 view .LVU65
 221 000a 9342     		cmp	r3, r2
 132:Src/spi.c     ****     GPIO_InitTypeDef GPIO_InitStruct = {0};
 222              		.loc 1 132 22 view .LVU66
 223 000c CDE90644 		strd	r4, r4, [sp, #24]
 224 0010 CDE90844 		strd	r4, r4, [sp, #32]
 131:Src/spi.c     ****     GPIO_InitTypeDef GPIO_InitStruct = {0};
 225              		.loc 1 131 1 view .LVU67
 226 0014 0546     		mov	r5, r0
 132:Src/spi.c     ****     GPIO_InitTypeDef GPIO_InitStruct = {0};
 227              		.loc 1 132 22 view .LVU68
 228 0016 0A94     		str	r4, [sp, #40]
 229              		.loc 1 133 5 is_stmt 1 view .LVU69
 230              		.loc 1 133 7 is_stmt 0 view .LVU70
 231 0018 04D0     		beq	.L39
 134:Src/spi.c     ****     {
 135:Src/spi.c     ****         /* Enable clocks */
 136:Src/spi.c     ****         __HAL_RCC_SPI1_CLK_ENABLE();
 137:Src/spi.c     ****         __HAL_RCC_GPIOB_CLK_ENABLE();
 138:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 139:Src/spi.c     **** 
 140:Src/spi.c     ****         /* Configure SPI1 GPIO */
 141:Src/spi.c     ****         GPIO_InitStruct.Pin = GPIO_PIN_3|GPIO_PIN_4|GPIO_PIN_5;
 142:Src/spi.c     ****         GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 143:Src/spi.c     ****         GPIO_InitStruct.Pull = GPIO_NOPULL;
 144:Src/spi.c     ****         GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 145:Src/spi.c     ****         GPIO_InitStruct.Alternate = GPIO_AF5_SPI1;
 146:Src/spi.c     ****         HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);
 147:Src/spi.c     **** 
ARM GAS  /tmp/ccNhFRu0.s 			page 8


 148:Src/spi.c     ****         /* SPI1 DMA Init */
 149:Src/spi.c     ****         /* SPI1_RX Init */
 150:Src/spi.c     ****         hdma_spi1_rx.Instance = DMA1_Channel1;
 151:Src/spi.c     ****         hdma_spi1_rx.Init.Request = DMA_REQUEST_SPI1_RX;
 152:Src/spi.c     ****         hdma_spi1_rx.Init.Direction = DMA_PERIPH_TO_MEMORY;
 153:Src/spi.c     ****         hdma_spi1_rx.Init.PeriphInc = DMA_PINC_DISABLE;
 154:Src/spi.c     ****         hdma_spi1_rx.Init.MemInc = DMA_MINC_ENABLE;
 155:Src/spi.c     ****         hdma_spi1_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 156:Src/spi.c     ****         hdma_spi1_rx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 157:Src/spi.c     ****         hdma_spi1_rx.Init.Mode = DMA_NORMAL;
 158:Src/spi.c     ****         hdma_spi1_rx.Init.Priority = DMA_PRIORITY_MEDIUM;
 159:Src/spi.c     ****         
 160:Src/spi.c     ****         if (HAL_DMA_Init(&hdma_spi1_rx) != HAL_OK)
 161:Src/spi.c     ****         {
 162:Src/spi.c     ****             Error_Handler();
 163:Src/spi.c     ****         }
 164:Src/spi.c     ****         __HAL_LINKDMA(spiHandle, hdmarx, hdma_spi1_rx);
 165:Src/spi.c     **** 
 166:Src/spi.c     ****         /* SPI1_TX Init */
 167:Src/spi.c     ****         hdma_spi1_tx.Instance = DMA1_Channel2;
 168:Src/spi.c     ****         hdma_spi1_tx.Init.Request = DMA_REQUEST_SPI1_TX;
 169:Src/spi.c     ****         hdma_spi1_tx.Init.Direction = DMA_MEMORY_TO_PERIPH;
 170:Src/spi.c     ****         hdma_spi1_tx.Init.PeriphInc = DMA_PINC_DISABLE;
 171:Src/spi.c     ****         hdma_spi1_tx.Init.MemInc = DMA_MINC_ENABLE;
 172:Src/spi.c     ****         hdma_spi1_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 173:Src/spi.c     ****         hdma_spi1_tx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 174:Src/spi.c     ****         hdma_spi1_tx.Init.Mode = DMA_NORMAL;
 175:Src/spi.c     ****         hdma_spi1_tx.Init.Priority = DMA_PRIORITY_MEDIUM;
 176:Src/spi.c     ****         
 177:Src/spi.c     ****         if (HAL_DMA_Init(&hdma_spi1_tx) != HAL_OK)
 178:Src/spi.c     ****         {
 179:Src/spi.c     ****             Error_Handler();
 180:Src/spi.c     ****         }
 181:Src/spi.c     ****         __HAL_LINKDMA(spiHandle, hdmatx, hdma_spi1_tx);
 182:Src/spi.c     **** 
 183:Src/spi.c     ****         /* Enable DMA interrupts */
 184:Src/spi.c     ****         HAL_NVIC_SetPriority(DMA1_Channel1_IRQn, 1, 0);
 185:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel1_IRQn);
 186:Src/spi.c     ****         HAL_NVIC_SetPriority(DMA1_Channel2_IRQn, 1, 0);
 187:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel2_IRQn);
 188:Src/spi.c     **** 
 189:Src/spi.c     ****         /* Enable DMA requests */
 190:Src/spi.c     ****         SET_BIT(spiHandle->Instance->CR2, SPI_CR2_RXDMAEN);
 191:Src/spi.c     ****         SET_BIT(spiHandle->Instance->CR2, SPI_CR2_TXDMAEN);
 192:Src/spi.c     **** 
 193:Src/spi.c     ****         /* Enable SPI */
 194:Src/spi.c     ****         __HAL_SPI_ENABLE(spiHandle);
 195:Src/spi.c     ****     }
 196:Src/spi.c     ****     else if(spiHandle->Instance == SPI3)
 232              		.loc 1 196 10 is_stmt 1 view .LVU71
 233              		.loc 1 196 12 is_stmt 0 view .LVU72
 234 001a 854A     		ldr	r2, .L45+4
 235 001c 9342     		cmp	r3, r2
 236 001e 78D0     		beq	.L40
 197:Src/spi.c     ****     {
 198:Src/spi.c     ****         /* Enable clocks */
 199:Src/spi.c     ****         __HAL_RCC_SPI3_CLK_ENABLE();
ARM GAS  /tmp/ccNhFRu0.s 			page 9


 200:Src/spi.c     ****         __HAL_RCC_GPIOC_CLK_ENABLE();
 201:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 202:Src/spi.c     **** 
 203:Src/spi.c     ****         /* Configure SPI3 GPIO */
 204:Src/spi.c     ****         GPIO_InitStruct.Pin = GPIO_PIN_10|GPIO_PIN_11|GPIO_PIN_12;
 205:Src/spi.c     ****         GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 206:Src/spi.c     ****         GPIO_InitStruct.Pull = GPIO_PULLUP;
 207:Src/spi.c     ****         GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 208:Src/spi.c     ****         GPIO_InitStruct.Alternate = GPIO_AF6_SPI3;
 209:Src/spi.c     ****         HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);
 210:Src/spi.c     **** 
 211:Src/spi.c     ****         /* SPI3 DMA Init */
 212:Src/spi.c     ****         /* SPI3_RX Init */
 213:Src/spi.c     ****         hdma_spi3_rx.Instance = DMA1_Channel3;
 214:Src/spi.c     ****         hdma_spi3_rx.Init.Request = DMA_REQUEST_SPI3_RX;
 215:Src/spi.c     ****         hdma_spi3_rx.Init.Direction = DMA_PERIPH_TO_MEMORY;
 216:Src/spi.c     ****         hdma_spi3_rx.Init.PeriphInc = DMA_PINC_DISABLE;
 217:Src/spi.c     ****         hdma_spi3_rx.Init.MemInc = DMA_MINC_ENABLE;
 218:Src/spi.c     ****         
 219:Src/spi.c     ****         if(spiHandle->Init.DataSize == SPI_DATASIZE_8BIT) {
 220:Src/spi.c     ****             hdma_spi3_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 221:Src/spi.c     ****             hdma_spi3_rx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 222:Src/spi.c     ****         } else {
 223:Src/spi.c     ****             hdma_spi3_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_HALFWORD;
 224:Src/spi.c     ****             hdma_spi3_rx.Init.MemDataAlignment = DMA_MDATAALIGN_HALFWORD;
 225:Src/spi.c     ****         }
 226:Src/spi.c     ****         
 227:Src/spi.c     ****         hdma_spi3_rx.Init.Mode = DMA_NORMAL;
 228:Src/spi.c     ****         hdma_spi3_rx.Init.Priority = DMA_PRIORITY_MEDIUM;
 229:Src/spi.c     ****         
 230:Src/spi.c     ****         if (HAL_DMA_Init(&hdma_spi3_rx) != HAL_OK)
 231:Src/spi.c     ****         {
 232:Src/spi.c     ****             Error_Handler();
 233:Src/spi.c     ****         }
 234:Src/spi.c     ****         __HAL_LINKDMA(spiHandle, hdmarx, hdma_spi3_rx);
 235:Src/spi.c     **** 
 236:Src/spi.c     ****         /* SPI3_TX Init */
 237:Src/spi.c     ****         hdma_spi3_tx.Instance = DMA1_Channel4;
 238:Src/spi.c     ****         hdma_spi3_tx.Init.Request = DMA_REQUEST_SPI3_TX;
 239:Src/spi.c     ****         hdma_spi3_tx.Init.Direction = DMA_MEMORY_TO_PERIPH;
 240:Src/spi.c     ****         hdma_spi3_tx.Init.PeriphInc = DMA_PINC_DISABLE;
 241:Src/spi.c     ****         hdma_spi3_tx.Init.MemInc = DMA_MINC_ENABLE;
 242:Src/spi.c     ****         
 243:Src/spi.c     ****         if(spiHandle->Init.DataSize == SPI_DATASIZE_8BIT) {
 244:Src/spi.c     ****             hdma_spi3_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 245:Src/spi.c     ****             hdma_spi3_tx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 246:Src/spi.c     ****         } else {
 247:Src/spi.c     ****             hdma_spi3_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_HALFWORD;
 248:Src/spi.c     ****             hdma_spi3_tx.Init.MemDataAlignment = DMA_MDATAALIGN_HALFWORD;
 249:Src/spi.c     ****         }
 250:Src/spi.c     ****         
 251:Src/spi.c     ****         hdma_spi3_tx.Init.Mode = DMA_NORMAL;
 252:Src/spi.c     ****         hdma_spi3_tx.Init.Priority = DMA_PRIORITY_MEDIUM;
 253:Src/spi.c     ****         
 254:Src/spi.c     ****         if (HAL_DMA_Init(&hdma_spi3_tx) != HAL_OK)
 255:Src/spi.c     ****         {
 256:Src/spi.c     ****             Error_Handler();
ARM GAS  /tmp/ccNhFRu0.s 			page 10


 257:Src/spi.c     ****         }
 258:Src/spi.c     ****         __HAL_LINKDMA(spiHandle, hdmatx, hdma_spi3_tx);
 259:Src/spi.c     **** 
 260:Src/spi.c     ****         /* Enable DMA interrupts */
 261:Src/spi.c     ****         HAL_NVIC_SetPriority(DMA1_Channel3_IRQn, 1, 0);
 262:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel3_IRQn);
 263:Src/spi.c     ****         HAL_NVIC_SetPriority(DMA1_Channel4_IRQn, 1, 0);
 264:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel4_IRQn);
 265:Src/spi.c     **** 
 266:Src/spi.c     ****         /* Enable DMA requests */
 267:Src/spi.c     ****         SET_BIT(spiHandle->Instance->CR2, SPI_CR2_RXDMAEN);
 268:Src/spi.c     ****         SET_BIT(spiHandle->Instance->CR2, SPI_CR2_TXDMAEN);
 269:Src/spi.c     **** 
 270:Src/spi.c     ****         /* Enable SPI */
 271:Src/spi.c     ****         __HAL_SPI_ENABLE(spiHandle);
 272:Src/spi.c     ****     }
 273:Src/spi.c     **** }
 237              		.loc 1 273 1 view .LVU73
 238 0020 0CB0     		add	sp, sp, #48
 239              	.LCFI6:
 240              		.cfi_remember_state
 241              		.cfi_def_cfa_offset 16
 242              		@ sp needed
 243 0022 70BD     		pop	{r4, r5, r6, pc}
 244              	.L39:
 245              	.LCFI7:
 246              		.cfi_restore_state
 136:Src/spi.c     ****         __HAL_RCC_GPIOB_CLK_ENABLE();
 247              		.loc 1 136 9 is_stmt 1 view .LVU74
 248              	.LBB6:
 136:Src/spi.c     ****         __HAL_RCC_GPIOB_CLK_ENABLE();
 249              		.loc 1 136 9 view .LVU75
 136:Src/spi.c     ****         __HAL_RCC_GPIOB_CLK_ENABLE();
 250              		.loc 1 136 9 view .LVU76
 251 0024 834B     		ldr	r3, .L45+8
 252              	.LBE6:
 146:Src/spi.c     **** 
 253              		.loc 1 146 9 is_stmt 0 view .LVU77
 254 0026 8448     		ldr	r0, .L45+12
 255              	.LVL5:
 256              	.LBB7:
 136:Src/spi.c     ****         __HAL_RCC_GPIOB_CLK_ENABLE();
 257              		.loc 1 136 9 view .LVU78
 258 0028 1A6E     		ldr	r2, [r3, #96]
 259              	.LBE7:
 150:Src/spi.c     ****         hdma_spi1_rx.Init.Request = DMA_REQUEST_SPI1_RX;
 260              		.loc 1 150 31 view .LVU79
 261 002a 844E     		ldr	r6, .L45+16
 262              	.LBB8:
 136:Src/spi.c     ****         __HAL_RCC_GPIOB_CLK_ENABLE();
 263              		.loc 1 136 9 view .LVU80
 264 002c 42F48052 		orr	r2, r2, #4096
 265 0030 1A66     		str	r2, [r3, #96]
 136:Src/spi.c     ****         __HAL_RCC_GPIOB_CLK_ENABLE();
 266              		.loc 1 136 9 is_stmt 1 view .LVU81
 267 0032 1A6E     		ldr	r2, [r3, #96]
 268 0034 02F48052 		and	r2, r2, #4096
ARM GAS  /tmp/ccNhFRu0.s 			page 11


 269 0038 0092     		str	r2, [sp]
 136:Src/spi.c     ****         __HAL_RCC_GPIOB_CLK_ENABLE();
 270              		.loc 1 136 9 view .LVU82
 271 003a 009A     		ldr	r2, [sp]
 272              	.LBE8:
 136:Src/spi.c     ****         __HAL_RCC_GPIOB_CLK_ENABLE();
 273              		.loc 1 136 9 view .LVU83
 137:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 274              		.loc 1 137 9 view .LVU84
 275              	.LBB9:
 137:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 276              		.loc 1 137 9 view .LVU85
 137:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 277              		.loc 1 137 9 view .LVU86
 278 003c DA6C     		ldr	r2, [r3, #76]
 279 003e 42F00202 		orr	r2, r2, #2
 280 0042 DA64     		str	r2, [r3, #76]
 137:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 281              		.loc 1 137 9 view .LVU87
 282 0044 DA6C     		ldr	r2, [r3, #76]
 283 0046 02F00202 		and	r2, r2, #2
 284 004a 0192     		str	r2, [sp, #4]
 137:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 285              		.loc 1 137 9 view .LVU88
 286 004c 019A     		ldr	r2, [sp, #4]
 287              	.LBE9:
 137:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 288              		.loc 1 137 9 view .LVU89
 138:Src/spi.c     **** 
 289              		.loc 1 138 9 view .LVU90
 290              	.LBB10:
 138:Src/spi.c     **** 
 291              		.loc 1 138 9 view .LVU91
 138:Src/spi.c     **** 
 292              		.loc 1 138 9 view .LVU92
 293 004e 9A6C     		ldr	r2, [r3, #72]
 294 0050 42F00102 		orr	r2, r2, #1
 295 0054 9A64     		str	r2, [r3, #72]
 138:Src/spi.c     **** 
 296              		.loc 1 138 9 view .LVU93
 297 0056 9B6C     		ldr	r3, [r3, #72]
 298 0058 03F00103 		and	r3, r3, #1
 299 005c 0293     		str	r3, [sp, #8]
 138:Src/spi.c     **** 
 300              		.loc 1 138 9 view .LVU94
 301              	.LBE10:
 141:Src/spi.c     ****         GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 302              		.loc 1 141 29 is_stmt 0 view .LVU95
 303 005e 3822     		movs	r2, #56
 304 0060 0223     		movs	r3, #2
 305 0062 CDE90623 		strd	r2, [sp, #24]
 144:Src/spi.c     ****         GPIO_InitStruct.Alternate = GPIO_AF5_SPI1;
 306              		.loc 1 144 31 view .LVU96
 307 0066 0323     		movs	r3, #3
 308 0068 0993     		str	r3, [sp, #36]
 146:Src/spi.c     **** 
 309              		.loc 1 146 9 view .LVU97
ARM GAS  /tmp/ccNhFRu0.s 			page 12


 310 006a 06A9     		add	r1, sp, #24
 311              	.LBB11:
 138:Src/spi.c     **** 
 312              		.loc 1 138 9 view .LVU98
 313 006c 029B     		ldr	r3, [sp, #8]
 314              	.LBE11:
 138:Src/spi.c     **** 
 315              		.loc 1 138 9 is_stmt 1 view .LVU99
 141:Src/spi.c     ****         GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 316              		.loc 1 141 9 view .LVU100
 142:Src/spi.c     ****         GPIO_InitStruct.Pull = GPIO_NOPULL;
 317              		.loc 1 142 9 view .LVU101
 143:Src/spi.c     ****         GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 318              		.loc 1 143 9 view .LVU102
 144:Src/spi.c     ****         GPIO_InitStruct.Alternate = GPIO_AF5_SPI1;
 319              		.loc 1 144 9 view .LVU103
 145:Src/spi.c     ****         HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);
 320              		.loc 1 145 9 view .LVU104
 145:Src/spi.c     ****         HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);
 321              		.loc 1 145 35 is_stmt 0 view .LVU105
 322 006e 0523     		movs	r3, #5
 323 0070 0A93     		str	r3, [sp, #40]
 146:Src/spi.c     **** 
 324              		.loc 1 146 9 is_stmt 1 view .LVU106
 325 0072 FFF7FEFF 		bl	HAL_GPIO_Init
 326              	.LVL6:
 150:Src/spi.c     ****         hdma_spi1_rx.Init.Request = DMA_REQUEST_SPI1_RX;
 327              		.loc 1 150 9 view .LVU107
 151:Src/spi.c     ****         hdma_spi1_rx.Init.Direction = DMA_PERIPH_TO_MEMORY;
 328              		.loc 1 151 35 is_stmt 0 view .LVU108
 329 0076 724A     		ldr	r2, .L45+20
 330 0078 0A23     		movs	r3, #10
 331 007a C6E90023 		strd	r2, r3, [r6]
 152:Src/spi.c     ****         hdma_spi1_rx.Init.PeriphInc = DMA_PINC_DISABLE;
 332              		.loc 1 152 9 is_stmt 1 view .LVU109
 160:Src/spi.c     ****         {
 333              		.loc 1 160 13 is_stmt 0 view .LVU110
 334 007e 3046     		mov	r0, r6
 154:Src/spi.c     ****         hdma_spi1_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 335              		.loc 1 154 34 view .LVU111
 336 0080 8022     		movs	r2, #128
 158:Src/spi.c     ****         
 337              		.loc 1 158 36 view .LVU112
 338 0082 4FF48053 		mov	r3, #4096
 153:Src/spi.c     ****         hdma_spi1_rx.Init.MemInc = DMA_MINC_ENABLE;
 339              		.loc 1 153 37 view .LVU113
 340 0086 C6E90244 		strd	r4, r4, [r6, #8]
 154:Src/spi.c     ****         hdma_spi1_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 341              		.loc 1 154 9 is_stmt 1 view .LVU114
 155:Src/spi.c     ****         hdma_spi1_rx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 342              		.loc 1 155 47 is_stmt 0 view .LVU115
 343 008a C6E90424 		strd	r2, r4, [r6, #16]
 156:Src/spi.c     ****         hdma_spi1_rx.Init.Mode = DMA_NORMAL;
 344              		.loc 1 156 9 is_stmt 1 view .LVU116
 157:Src/spi.c     ****         hdma_spi1_rx.Init.Priority = DMA_PRIORITY_MEDIUM;
 345              		.loc 1 157 32 is_stmt 0 view .LVU117
 346 008e C6E90644 		strd	r4, r4, [r6, #24]
ARM GAS  /tmp/ccNhFRu0.s 			page 13


 158:Src/spi.c     ****         
 347              		.loc 1 158 9 is_stmt 1 view .LVU118
 158:Src/spi.c     ****         
 348              		.loc 1 158 36 is_stmt 0 view .LVU119
 349 0092 3362     		str	r3, [r6, #32]
 160:Src/spi.c     ****         {
 350              		.loc 1 160 9 is_stmt 1 view .LVU120
 160:Src/spi.c     ****         {
 351              		.loc 1 160 13 is_stmt 0 view .LVU121
 352 0094 FFF7FEFF 		bl	HAL_DMA_Init
 353              	.LVL7:
 160:Src/spi.c     ****         {
 354              		.loc 1 160 12 view .LVU122
 355 0098 0028     		cmp	r0, #0
 356 009a 40F0BE80 		bne	.L41
 357              	.L16:
 164:Src/spi.c     **** 
 358              		.loc 1 164 9 is_stmt 1 view .LVU123
 164:Src/spi.c     **** 
 359              		.loc 1 164 9 view .LVU124
 167:Src/spi.c     ****         hdma_spi1_tx.Init.Request = DMA_REQUEST_SPI1_TX;
 360              		.loc 1 167 31 is_stmt 0 view .LVU125
 361 009e 694C     		ldr	r4, .L45+24
 362 00a0 6949     		ldr	r1, .L45+28
 164:Src/spi.c     **** 
 363              		.loc 1 164 9 view .LVU126
 364 00a2 AE65     		str	r6, [r5, #88]
 164:Src/spi.c     **** 
 365              		.loc 1 164 9 is_stmt 1 view .LVU127
 168:Src/spi.c     ****         hdma_spi1_tx.Init.Direction = DMA_MEMORY_TO_PERIPH;
 366              		.loc 1 168 35 is_stmt 0 view .LVU128
 367 00a4 0B22     		movs	r2, #11
 368 00a6 C4E90012 		strd	r1, r2, [r4]
 171:Src/spi.c     ****         hdma_spi1_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 369              		.loc 1 171 34 view .LVU129
 370 00aa 8022     		movs	r2, #128
 170:Src/spi.c     ****         hdma_spi1_tx.Init.MemInc = DMA_MINC_ENABLE;
 371              		.loc 1 170 37 view .LVU130
 372 00ac 0023     		movs	r3, #0
 169:Src/spi.c     ****         hdma_spi1_tx.Init.PeriphInc = DMA_PINC_DISABLE;
 373              		.loc 1 169 37 view .LVU131
 374 00ae 1021     		movs	r1, #16
 171:Src/spi.c     ****         hdma_spi1_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 375              		.loc 1 171 34 view .LVU132
 376 00b0 2261     		str	r2, [r4, #16]
 177:Src/spi.c     ****         {
 377              		.loc 1 177 13 view .LVU133
 378 00b2 2046     		mov	r0, r4
 175:Src/spi.c     ****         
 379              		.loc 1 175 36 view .LVU134
 380 00b4 4FF48052 		mov	r2, #4096
 170:Src/spi.c     ****         hdma_spi1_tx.Init.MemInc = DMA_MINC_ENABLE;
 381              		.loc 1 170 37 view .LVU135
 382 00b8 C4E90213 		strd	r1, r3, [r4, #8]
 173:Src/spi.c     ****         hdma_spi1_tx.Init.Mode = DMA_NORMAL;
 383              		.loc 1 173 44 view .LVU136
 384 00bc C4E90533 		strd	r3, r3, [r4, #20]
ARM GAS  /tmp/ccNhFRu0.s 			page 14


 175:Src/spi.c     ****         
 385              		.loc 1 175 36 view .LVU137
 386 00c0 C4E90732 		strd	r3, r2, [r4, #28]
 164:Src/spi.c     **** 
 387              		.loc 1 164 9 view .LVU138
 388 00c4 B562     		str	r5, [r6, #40]
 164:Src/spi.c     **** 
 389              		.loc 1 164 9 is_stmt 1 view .LVU139
 167:Src/spi.c     ****         hdma_spi1_tx.Init.Request = DMA_REQUEST_SPI1_TX;
 390              		.loc 1 167 9 view .LVU140
 169:Src/spi.c     ****         hdma_spi1_tx.Init.PeriphInc = DMA_PINC_DISABLE;
 391              		.loc 1 169 9 view .LVU141
 171:Src/spi.c     ****         hdma_spi1_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 392              		.loc 1 171 9 view .LVU142
 172:Src/spi.c     ****         hdma_spi1_tx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 393              		.loc 1 172 9 view .LVU143
 174:Src/spi.c     ****         hdma_spi1_tx.Init.Priority = DMA_PRIORITY_MEDIUM;
 394              		.loc 1 174 9 view .LVU144
 177:Src/spi.c     ****         {
 395              		.loc 1 177 9 view .LVU145
 177:Src/spi.c     ****         {
 396              		.loc 1 177 13 is_stmt 0 view .LVU146
 397 00c6 FFF7FEFF 		bl	HAL_DMA_Init
 398              	.LVL8:
 177:Src/spi.c     ****         {
 399              		.loc 1 177 12 view .LVU147
 400 00ca 0028     		cmp	r0, #0
 401 00cc 40F0A280 		bne	.L42
 402              	.L17:
 181:Src/spi.c     **** 
 403              		.loc 1 181 9 is_stmt 1 view .LVU148
 181:Src/spi.c     **** 
 404              		.loc 1 181 9 view .LVU149
 184:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel1_IRQn);
 405              		.loc 1 184 9 is_stmt 0 view .LVU150
 406 00d0 0022     		movs	r2, #0
 407 00d2 0121     		movs	r1, #1
 408 00d4 0B20     		movs	r0, #11
 181:Src/spi.c     **** 
 409              		.loc 1 181 9 view .LVU151
 410 00d6 6C65     		str	r4, [r5, #84]
 181:Src/spi.c     **** 
 411              		.loc 1 181 9 is_stmt 1 view .LVU152
 412 00d8 A562     		str	r5, [r4, #40]
 181:Src/spi.c     **** 
 413              		.loc 1 181 9 view .LVU153
 184:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel1_IRQn);
 414              		.loc 1 184 9 view .LVU154
 415 00da FFF7FEFF 		bl	HAL_NVIC_SetPriority
 416              	.LVL9:
 185:Src/spi.c     ****         HAL_NVIC_SetPriority(DMA1_Channel2_IRQn, 1, 0);
 417              		.loc 1 185 9 view .LVU155
 418 00de 0B20     		movs	r0, #11
 419 00e0 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 420              	.LVL10:
 186:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel2_IRQn);
 421              		.loc 1 186 9 view .LVU156
ARM GAS  /tmp/ccNhFRu0.s 			page 15


 422 00e4 0C20     		movs	r0, #12
 423 00e6 0022     		movs	r2, #0
 424 00e8 0121     		movs	r1, #1
 425 00ea FFF7FEFF 		bl	HAL_NVIC_SetPriority
 426              	.LVL11:
 187:Src/spi.c     **** 
 427              		.loc 1 187 9 view .LVU157
 428 00ee 0C20     		movs	r0, #12
 429              	.L38:
 264:Src/spi.c     **** 
 430              		.loc 1 264 9 is_stmt 0 view .LVU158
 431 00f0 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 432              	.LVL12:
 267:Src/spi.c     ****         SET_BIT(spiHandle->Instance->CR2, SPI_CR2_TXDMAEN);
 433              		.loc 1 267 9 is_stmt 1 view .LVU159
 434 00f4 2B68     		ldr	r3, [r5]
 435 00f6 5A68     		ldr	r2, [r3, #4]
 436 00f8 42F00102 		orr	r2, r2, #1
 437 00fc 5A60     		str	r2, [r3, #4]
 268:Src/spi.c     **** 
 438              		.loc 1 268 9 view .LVU160
 439 00fe 5A68     		ldr	r2, [r3, #4]
 440 0100 42F00202 		orr	r2, r2, #2
 441 0104 5A60     		str	r2, [r3, #4]
 271:Src/spi.c     ****     }
 442              		.loc 1 271 9 view .LVU161
 443 0106 1A68     		ldr	r2, [r3]
 444 0108 42F04002 		orr	r2, r2, #64
 445 010c 1A60     		str	r2, [r3]
 446              		.loc 1 273 1 is_stmt 0 view .LVU162
 447 010e 0CB0     		add	sp, sp, #48
 448              	.LCFI8:
 449              		.cfi_remember_state
 450              		.cfi_def_cfa_offset 16
 451              		@ sp needed
 452 0110 70BD     		pop	{r4, r5, r6, pc}
 453              	.LVL13:
 454              	.L40:
 455              	.LCFI9:
 456              		.cfi_restore_state
 199:Src/spi.c     ****         __HAL_RCC_GPIOC_CLK_ENABLE();
 457              		.loc 1 199 9 is_stmt 1 view .LVU163
 458              	.LBB12:
 199:Src/spi.c     ****         __HAL_RCC_GPIOC_CLK_ENABLE();
 459              		.loc 1 199 9 view .LVU164
 199:Src/spi.c     ****         __HAL_RCC_GPIOC_CLK_ENABLE();
 460              		.loc 1 199 9 view .LVU165
 461 0112 484B     		ldr	r3, .L45+8
 462              	.LBE12:
 209:Src/spi.c     **** 
 463              		.loc 1 209 9 is_stmt 0 view .LVU166
 464 0114 4D48     		ldr	r0, .L45+32
 465              	.LVL14:
 466              	.LBB13:
 199:Src/spi.c     ****         __HAL_RCC_GPIOC_CLK_ENABLE();
 467              		.loc 1 199 9 view .LVU167
 468 0116 9A6D     		ldr	r2, [r3, #88]
ARM GAS  /tmp/ccNhFRu0.s 			page 16


 469              	.LBE13:
 213:Src/spi.c     ****         hdma_spi3_rx.Init.Request = DMA_REQUEST_SPI3_RX;
 470              		.loc 1 213 31 view .LVU168
 471 0118 4D4E     		ldr	r6, .L45+36
 472              	.LBB14:
 199:Src/spi.c     ****         __HAL_RCC_GPIOC_CLK_ENABLE();
 473              		.loc 1 199 9 view .LVU169
 474 011a 42F40042 		orr	r2, r2, #32768
 475 011e 9A65     		str	r2, [r3, #88]
 199:Src/spi.c     ****         __HAL_RCC_GPIOC_CLK_ENABLE();
 476              		.loc 1 199 9 is_stmt 1 view .LVU170
 477 0120 9A6D     		ldr	r2, [r3, #88]
 478 0122 02F40042 		and	r2, r2, #32768
 479 0126 0392     		str	r2, [sp, #12]
 199:Src/spi.c     ****         __HAL_RCC_GPIOC_CLK_ENABLE();
 480              		.loc 1 199 9 view .LVU171
 481 0128 039A     		ldr	r2, [sp, #12]
 482              	.LBE14:
 199:Src/spi.c     ****         __HAL_RCC_GPIOC_CLK_ENABLE();
 483              		.loc 1 199 9 view .LVU172
 200:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 484              		.loc 1 200 9 view .LVU173
 485              	.LBB15:
 200:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 486              		.loc 1 200 9 view .LVU174
 200:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 487              		.loc 1 200 9 view .LVU175
 488 012a DA6C     		ldr	r2, [r3, #76]
 489 012c 42F00402 		orr	r2, r2, #4
 490 0130 DA64     		str	r2, [r3, #76]
 200:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 491              		.loc 1 200 9 view .LVU176
 492 0132 DA6C     		ldr	r2, [r3, #76]
 493 0134 02F00402 		and	r2, r2, #4
 494 0138 0492     		str	r2, [sp, #16]
 200:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 495              		.loc 1 200 9 view .LVU177
 496 013a 049A     		ldr	r2, [sp, #16]
 497              	.LBE15:
 200:Src/spi.c     ****         __HAL_RCC_DMA1_CLK_ENABLE();
 498              		.loc 1 200 9 view .LVU178
 201:Src/spi.c     **** 
 499              		.loc 1 201 9 view .LVU179
 500              	.LBB16:
 201:Src/spi.c     **** 
 501              		.loc 1 201 9 view .LVU180
 201:Src/spi.c     **** 
 502              		.loc 1 201 9 view .LVU181
 503 013c 9A6C     		ldr	r2, [r3, #72]
 504 013e 42F00102 		orr	r2, r2, #1
 505 0142 9A64     		str	r2, [r3, #72]
 201:Src/spi.c     **** 
 506              		.loc 1 201 9 view .LVU182
 507 0144 9B6C     		ldr	r3, [r3, #72]
 508 0146 03F00103 		and	r3, r3, #1
 509 014a 0593     		str	r3, [sp, #20]
 201:Src/spi.c     **** 
ARM GAS  /tmp/ccNhFRu0.s 			page 17


 510              		.loc 1 201 9 view .LVU183
 511              	.LBE16:
 204:Src/spi.c     ****         GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 512              		.loc 1 204 29 is_stmt 0 view .LVU184
 513 014c 4FF4E052 		mov	r2, #7168
 514 0150 0223     		movs	r3, #2
 515 0152 CDE90623 		strd	r2, [sp, #24]
 516 0156 0122     		movs	r2, #1
 517 0158 0323     		movs	r3, #3
 518 015a CDE90823 		strd	r2, [sp, #32]
 209:Src/spi.c     **** 
 519              		.loc 1 209 9 view .LVU185
 520 015e 06A9     		add	r1, sp, #24
 208:Src/spi.c     ****         HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);
 521              		.loc 1 208 35 view .LVU186
 522 0160 0623     		movs	r3, #6
 523              	.LBB17:
 201:Src/spi.c     **** 
 524              		.loc 1 201 9 view .LVU187
 525 0162 059A     		ldr	r2, [sp, #20]
 526              	.LBE17:
 201:Src/spi.c     **** 
 527              		.loc 1 201 9 is_stmt 1 view .LVU188
 204:Src/spi.c     ****         GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 528              		.loc 1 204 9 view .LVU189
 205:Src/spi.c     ****         GPIO_InitStruct.Pull = GPIO_PULLUP;
 529              		.loc 1 205 9 view .LVU190
 206:Src/spi.c     ****         GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 530              		.loc 1 206 9 view .LVU191
 207:Src/spi.c     ****         GPIO_InitStruct.Alternate = GPIO_AF6_SPI3;
 531              		.loc 1 207 9 view .LVU192
 208:Src/spi.c     ****         HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);
 532              		.loc 1 208 9 view .LVU193
 208:Src/spi.c     ****         HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);
 533              		.loc 1 208 35 is_stmt 0 view .LVU194
 534 0164 0A93     		str	r3, [sp, #40]
 209:Src/spi.c     **** 
 535              		.loc 1 209 9 is_stmt 1 view .LVU195
 536 0166 FFF7FEFF 		bl	HAL_GPIO_Init
 537              	.LVL15:
 213:Src/spi.c     ****         hdma_spi3_rx.Init.Request = DMA_REQUEST_SPI3_RX;
 538              		.loc 1 213 9 view .LVU196
 219:Src/spi.c     ****             hdma_spi3_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 539              		.loc 1 219 11 is_stmt 0 view .LVU197
 540 016a EB68     		ldr	r3, [r5, #12]
 214:Src/spi.c     ****         hdma_spi3_rx.Init.Direction = DMA_PERIPH_TO_MEMORY;
 541              		.loc 1 214 35 view .LVU198
 542 016c 3949     		ldr	r1, .L45+40
 230:Src/spi.c     ****         {
 543              		.loc 1 230 13 view .LVU199
 544 016e 3848     		ldr	r0, .L45+36
 219:Src/spi.c     ****             hdma_spi3_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 545              		.loc 1 219 11 view .LVU200
 546 0170 B3F5E06F 		cmp	r3, #1792
 214:Src/spi.c     ****         hdma_spi3_rx.Init.Direction = DMA_PERIPH_TO_MEMORY;
 547              		.loc 1 214 35 view .LVU201
 548 0174 4FF00E02 		mov	r2, #14
ARM GAS  /tmp/ccNhFRu0.s 			page 18


 223:Src/spi.c     ****             hdma_spi3_rx.Init.MemDataAlignment = DMA_MDATAALIGN_HALFWORD;
 549              		.loc 1 223 51 view .LVU202
 550 0178 14BF     		ite	ne
 551 017a 4FF48073 		movne	r3, #256
 220:Src/spi.c     ****             hdma_spi3_rx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 552              		.loc 1 220 51 view .LVU203
 553 017e 2346     		moveq	r3, r4
 214:Src/spi.c     ****         hdma_spi3_rx.Init.Direction = DMA_PERIPH_TO_MEMORY;
 554              		.loc 1 214 35 view .LVU204
 555 0180 C6E90012 		strd	r1, r2, [r6]
 215:Src/spi.c     ****         hdma_spi3_rx.Init.PeriphInc = DMA_PINC_DISABLE;
 556              		.loc 1 215 9 is_stmt 1 view .LVU205
 217:Src/spi.c     ****         
 557              		.loc 1 217 34 is_stmt 0 view .LVU206
 558 0184 4FF08002 		mov	r2, #128
 216:Src/spi.c     ****         hdma_spi3_rx.Init.MemInc = DMA_MINC_ENABLE;
 559              		.loc 1 216 37 view .LVU207
 560 0188 C6E90244 		strd	r4, r4, [r6, #8]
 217:Src/spi.c     ****         
 561              		.loc 1 217 9 is_stmt 1 view .LVU208
 217:Src/spi.c     ****         
 562              		.loc 1 217 34 is_stmt 0 view .LVU209
 563 018c 3261     		str	r2, [r6, #16]
 219:Src/spi.c     ****             hdma_spi3_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 564              		.loc 1 219 9 is_stmt 1 view .LVU210
 224:Src/spi.c     ****         }
 565              		.loc 1 224 48 is_stmt 0 view .LVU211
 566 018e 18BF     		it	ne
 567 0190 4FF48064 		movne	r4, #1024
 227:Src/spi.c     ****         hdma_spi3_rx.Init.Priority = DMA_PRIORITY_MEDIUM;
 568              		.loc 1 227 32 view .LVU212
 569 0194 0022     		movs	r2, #0
 570 0196 7361     		str	r3, [r6, #20]
 227:Src/spi.c     ****         hdma_spi3_rx.Init.Priority = DMA_PRIORITY_MEDIUM;
 571              		.loc 1 227 9 is_stmt 1 view .LVU213
 228:Src/spi.c     ****         
 572              		.loc 1 228 9 view .LVU214
 228:Src/spi.c     ****         
 573              		.loc 1 228 36 is_stmt 0 view .LVU215
 574 0198 4FF48053 		mov	r3, #4096
 575 019c C6E90642 		strd	r4, r2, [r6, #24]
 576 01a0 3362     		str	r3, [r6, #32]
 230:Src/spi.c     ****         {
 577              		.loc 1 230 9 is_stmt 1 view .LVU216
 230:Src/spi.c     ****         {
 578              		.loc 1 230 13 is_stmt 0 view .LVU217
 579 01a2 FFF7FEFF 		bl	HAL_DMA_Init
 580              	.LVL16:
 230:Src/spi.c     ****         {
 581              		.loc 1 230 12 view .LVU218
 582 01a6 0028     		cmp	r0, #0
 583 01a8 3AD1     		bne	.L43
 584              	.L20:
 234:Src/spi.c     **** 
 585              		.loc 1 234 9 is_stmt 1 view .LVU219
 234:Src/spi.c     **** 
 586              		.loc 1 234 9 view .LVU220
ARM GAS  /tmp/ccNhFRu0.s 			page 19


 237:Src/spi.c     ****         hdma_spi3_tx.Init.Request = DMA_REQUEST_SPI3_TX;
 587              		.loc 1 237 31 is_stmt 0 view .LVU221
 588 01aa 2B4C     		ldr	r4, .L45+44
 589 01ac 2B4A     		ldr	r2, .L45+48
 590 01ae 2260     		str	r2, [r4]
 238:Src/spi.c     ****         hdma_spi3_tx.Init.Direction = DMA_MEMORY_TO_PERIPH;
 591              		.loc 1 238 35 view .LVU222
 592 01b0 0F23     		movs	r3, #15
 243:Src/spi.c     ****             hdma_spi3_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 593              		.loc 1 243 11 view .LVU223
 594 01b2 EA68     		ldr	r2, [r5, #12]
 238:Src/spi.c     ****         hdma_spi3_tx.Init.Direction = DMA_MEMORY_TO_PERIPH;
 595              		.loc 1 238 35 view .LVU224
 596 01b4 6360     		str	r3, [r4, #4]
 239:Src/spi.c     ****         hdma_spi3_tx.Init.PeriphInc = DMA_PINC_DISABLE;
 597              		.loc 1 239 37 view .LVU225
 598 01b6 1021     		movs	r1, #16
 240:Src/spi.c     ****         hdma_spi3_tx.Init.MemInc = DMA_MINC_ENABLE;
 599              		.loc 1 240 37 view .LVU226
 600 01b8 0023     		movs	r3, #0
 243:Src/spi.c     ****             hdma_spi3_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 601              		.loc 1 243 11 view .LVU227
 602 01ba B2F5E06F 		cmp	r2, #1792
 240:Src/spi.c     ****         hdma_spi3_tx.Init.MemInc = DMA_MINC_ENABLE;
 603              		.loc 1 240 37 view .LVU228
 604 01be C4E90213 		strd	r1, r3, [r4, #8]
 241:Src/spi.c     ****         
 605              		.loc 1 241 34 view .LVU229
 606 01c2 4FF08001 		mov	r1, #128
 248:Src/spi.c     ****         }
 607              		.loc 1 248 48 view .LVU230
 608 01c6 18BF     		it	ne
 609 01c8 4FF48063 		movne	r3, #1024
 241:Src/spi.c     ****         
 610              		.loc 1 241 34 view .LVU231
 611 01cc 2161     		str	r1, [r4, #16]
 251:Src/spi.c     ****         hdma_spi3_tx.Init.Priority = DMA_PRIORITY_MEDIUM;
 612              		.loc 1 251 32 view .LVU232
 613 01ce 4FF00001 		mov	r1, #0
 244:Src/spi.c     ****             hdma_spi3_tx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 614              		.loc 1 244 51 view .LVU233
 615 01d2 0CBF     		ite	eq
 616 01d4 1A46     		moveq	r2, r3
 247:Src/spi.c     ****             hdma_spi3_tx.Init.MemDataAlignment = DMA_MDATAALIGN_HALFWORD;
 617              		.loc 1 247 51 view .LVU234
 618 01d6 4FF48072 		movne	r2, #256
 619 01da C4E90631 		strd	r3, r1, [r4, #24]
 254:Src/spi.c     ****         {
 620              		.loc 1 254 13 view .LVU235
 621 01de 1E48     		ldr	r0, .L45+44
 234:Src/spi.c     **** 
 622              		.loc 1 234 9 view .LVU236
 623 01e0 AE65     		str	r6, [r5, #88]
 234:Src/spi.c     **** 
 624              		.loc 1 234 9 is_stmt 1 view .LVU237
 252:Src/spi.c     ****         
 625              		.loc 1 252 36 is_stmt 0 view .LVU238
ARM GAS  /tmp/ccNhFRu0.s 			page 20


 626 01e2 4FF48053 		mov	r3, #4096
 234:Src/spi.c     **** 
 627              		.loc 1 234 9 view .LVU239
 628 01e6 B562     		str	r5, [r6, #40]
 234:Src/spi.c     **** 
 629              		.loc 1 234 9 is_stmt 1 view .LVU240
 237:Src/spi.c     ****         hdma_spi3_tx.Init.Request = DMA_REQUEST_SPI3_TX;
 630              		.loc 1 237 9 view .LVU241
 238:Src/spi.c     ****         hdma_spi3_tx.Init.Direction = DMA_MEMORY_TO_PERIPH;
 631              		.loc 1 238 9 view .LVU242
 239:Src/spi.c     ****         hdma_spi3_tx.Init.PeriphInc = DMA_PINC_DISABLE;
 632              		.loc 1 239 9 view .LVU243
 241:Src/spi.c     ****         
 633              		.loc 1 241 9 view .LVU244
 243:Src/spi.c     ****             hdma_spi3_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 634              		.loc 1 243 9 view .LVU245
 635 01e8 6261     		str	r2, [r4, #20]
 251:Src/spi.c     ****         hdma_spi3_tx.Init.Priority = DMA_PRIORITY_MEDIUM;
 636              		.loc 1 251 9 view .LVU246
 252:Src/spi.c     ****         
 637              		.loc 1 252 9 view .LVU247
 252:Src/spi.c     ****         
 638              		.loc 1 252 36 is_stmt 0 view .LVU248
 639 01ea 2362     		str	r3, [r4, #32]
 254:Src/spi.c     ****         {
 640              		.loc 1 254 9 is_stmt 1 view .LVU249
 254:Src/spi.c     ****         {
 641              		.loc 1 254 13 is_stmt 0 view .LVU250
 642 01ec FFF7FEFF 		bl	HAL_DMA_Init
 643              	.LVL17:
 254:Src/spi.c     ****         {
 644              		.loc 1 254 12 view .LVU251
 645 01f0 C8B9     		cbnz	r0, .L44
 646              	.L22:
 258:Src/spi.c     **** 
 647              		.loc 1 258 9 is_stmt 1 view .LVU252
 258:Src/spi.c     **** 
 648              		.loc 1 258 9 view .LVU253
 261:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel3_IRQn);
 649              		.loc 1 261 9 is_stmt 0 view .LVU254
 650 01f2 0022     		movs	r2, #0
 651 01f4 0121     		movs	r1, #1
 652 01f6 0D20     		movs	r0, #13
 258:Src/spi.c     **** 
 653              		.loc 1 258 9 view .LVU255
 654 01f8 6C65     		str	r4, [r5, #84]
 258:Src/spi.c     **** 
 655              		.loc 1 258 9 is_stmt 1 view .LVU256
 656 01fa A562     		str	r5, [r4, #40]
 258:Src/spi.c     **** 
 657              		.loc 1 258 9 view .LVU257
 261:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel3_IRQn);
 658              		.loc 1 261 9 view .LVU258
 659 01fc FFF7FEFF 		bl	HAL_NVIC_SetPriority
 660              	.LVL18:
 262:Src/spi.c     ****         HAL_NVIC_SetPriority(DMA1_Channel4_IRQn, 1, 0);
 661              		.loc 1 262 9 view .LVU259
ARM GAS  /tmp/ccNhFRu0.s 			page 21


 662 0200 0D20     		movs	r0, #13
 663 0202 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 664              	.LVL19:
 263:Src/spi.c     ****         HAL_NVIC_EnableIRQ(DMA1_Channel4_IRQn);
 665              		.loc 1 263 9 view .LVU260
 666 0206 0E20     		movs	r0, #14
 667 0208 0022     		movs	r2, #0
 668 020a 0121     		movs	r1, #1
 669 020c FFF7FEFF 		bl	HAL_NVIC_SetPriority
 670              	.LVL20:
 264:Src/spi.c     **** 
 671              		.loc 1 264 9 view .LVU261
 672 0210 0E20     		movs	r0, #14
 673 0212 6DE7     		b	.L38
 674              	.L42:
 179:Src/spi.c     ****         }
 675              		.loc 1 179 13 view .LVU262
 676 0214 FFF7FEFF 		bl	Error_Handler
 677              	.LVL21:
 678 0218 5AE7     		b	.L17
 679              	.L41:
 162:Src/spi.c     ****         }
 680              		.loc 1 162 13 view .LVU263
 681 021a FFF7FEFF 		bl	Error_Handler
 682              	.LVL22:
 683 021e 3EE7     		b	.L16
 684              	.L43:
 232:Src/spi.c     ****         }
 685              		.loc 1 232 13 view .LVU264
 686 0220 FFF7FEFF 		bl	Error_Handler
 687              	.LVL23:
 688 0224 C1E7     		b	.L20
 689              	.L44:
 256:Src/spi.c     ****         }
 690              		.loc 1 256 13 view .LVU265
 691 0226 FFF7FEFF 		bl	Error_Handler
 692              	.LVL24:
 693 022a E2E7     		b	.L22
 694              	.L46:
 695              		.align	2
 696              	.L45:
 697 022c 00300140 		.word	1073819648
 698 0230 003C0040 		.word	1073757184
 699 0234 00100240 		.word	1073876992
 700 0238 00040048 		.word	1207960576
 701 023c 00000000 		.word	.LANCHOR2
 702 0240 08000240 		.word	1073872904
 703 0244 00000000 		.word	.LANCHOR3
 704 0248 1C000240 		.word	1073872924
 705 024c 00080048 		.word	1207961600
 706 0250 00000000 		.word	.LANCHOR4
 707 0254 30000240 		.word	1073872944
 708 0258 00000000 		.word	.LANCHOR5
 709 025c 44000240 		.word	1073872964
 710              		.cfi_endproc
 711              	.LFE1869:
 713              		.section	.text.transmit_spi,"ax",%progbits
ARM GAS  /tmp/ccNhFRu0.s 			page 22


 714              		.align	1
 715              		.p2align 2,,3
 716              		.global	transmit_spi
 717              		.syntax unified
 718              		.thumb
 719              		.thumb_func
 720              		.fpu fpv4-sp-d16
 722              	transmit_spi:
 723              	.LVL25:
 724              	.LFB1871:
 274:Src/spi.c     **** 
 275:Src/spi.c     **** 
 276:Src/spi.c     **** static void DMA_SetConfig(DMA_HandleTypeDef *hdma, uint32_t SrcAddress, uint32_t DstAddress, uint32
 277:Src/spi.c     **** {
 278:Src/spi.c     ****     /* Clear DBM bit - not needed for G4 series */
 279:Src/spi.c     ****     
 280:Src/spi.c     ****     /* Configure DMA Channel data length */
 281:Src/spi.c     ****     hdma->Instance->CNDTR = DataLength;
 282:Src/spi.c     **** 
 283:Src/spi.c     ****     /* Memory to Peripheral */
 284:Src/spi.c     ****     if((hdma->Init.Direction) == DMA_MEMORY_TO_PERIPH)
 285:Src/spi.c     ****     {
 286:Src/spi.c     ****         /* Configure DMA Channel destination address */
 287:Src/spi.c     ****         hdma->Instance->CPAR = DstAddress;
 288:Src/spi.c     **** 
 289:Src/spi.c     ****         /* Configure DMA Channel source address */
 290:Src/spi.c     ****         hdma->Instance->CMAR = SrcAddress;
 291:Src/spi.c     ****     }
 292:Src/spi.c     ****     /* Peripheral to Memory */
 293:Src/spi.c     ****     else
 294:Src/spi.c     ****     {
 295:Src/spi.c     ****         /* Configure DMA Channel source address */
 296:Src/spi.c     ****         hdma->Instance->CPAR = SrcAddress;
 297:Src/spi.c     **** 
 298:Src/spi.c     ****         /* Configure DMA Channel destination address */
 299:Src/spi.c     ****         hdma->Instance->CMAR = DstAddress;
 300:Src/spi.c     ****     }
 301:Src/spi.c     **** }
 302:Src/spi.c     **** 
 303:Src/spi.c     **** void transmit_spi(SPI_HandleTypeDef* spiHandle, uint8_t *tx_buf, uint8_t *rx_buf, uint16_t len)
 304:Src/spi.c     **** {
 725              		.loc 1 304 1 view -0
 726              		.cfi_startproc
 727              		@ args = 0, pretend = 0, frame = 0
 728              		@ frame_needed = 0, uses_anonymous_args = 0
 305:Src/spi.c     ****     // Disable DMA
 306:Src/spi.c     ****     // Disable DMA
 307:Src/spi.c     ****     __HAL_DMA_DISABLE(spiHandle->hdmatx);
 729              		.loc 1 307 5 view .LVU267
 730 0000 D0F854C0 		ldr	ip, [r0, #84]
 304:Src/spi.c     ****     // Disable DMA
 731              		.loc 1 304 1 is_stmt 0 view .LVU268
 732 0004 F0B5     		push	{r4, r5, r6, r7, lr}
 733              	.LCFI10:
 734              		.cfi_def_cfa_offset 20
 735              		.cfi_offset 4, -20
 736              		.cfi_offset 5, -16
ARM GAS  /tmp/ccNhFRu0.s 			page 23


 737              		.cfi_offset 6, -12
 738              		.cfi_offset 7, -8
 739              		.cfi_offset 14, -4
 740              		.loc 1 307 5 view .LVU269
 741 0006 DCF80040 		ldr	r4, [ip]
 308:Src/spi.c     ****     __HAL_DMA_DISABLE(spiHandle->hdmarx);
 742              		.loc 1 308 5 view .LVU270
 743 000a 876D     		ldr	r7, [r0, #88]
 307:Src/spi.c     ****     __HAL_DMA_DISABLE(spiHandle->hdmarx);
 744              		.loc 1 307 5 view .LVU271
 745 000c 2568     		ldr	r5, [r4]
 309:Src/spi.c     **** 
 310:Src/spi.c     ****     // Clear TX DMA flags - using correct G4 flags
 311:Src/spi.c     ****     __HAL_DMA_CLEAR_FLAG(spiHandle->hdmatx, 
 746              		.loc 1 311 5 view .LVU272
 747 000e DFF890E0 		ldr	lr, .L57+8
 307:Src/spi.c     ****     __HAL_DMA_DISABLE(spiHandle->hdmarx);
 748              		.loc 1 307 5 view .LVU273
 749 0012 25F00105 		bic	r5, r5, #1
 750 0016 2560     		str	r5, [r4]
 308:Src/spi.c     **** 
 751              		.loc 1 308 5 is_stmt 1 view .LVU274
 752 0018 3D68     		ldr	r5, [r7]
 753 001a 2E68     		ldr	r6, [r5]
 754              		.loc 1 311 5 is_stmt 0 view .LVU275
 755 001c 7445     		cmp	r4, lr
 308:Src/spi.c     **** 
 756              		.loc 1 308 5 view .LVU276
 757 001e 26F00106 		bic	r6, r6, #1
 758 0022 2E60     		str	r6, [r5]
 759              		.loc 1 311 5 is_stmt 1 view .LVU277
 760 0024 8CBF     		ite	hi
 761 0026 1C4E     		ldrhi	r6, .L57
 762 0028 1C4E     		ldrls	r6, .L57+4
 763 002a 4FF4604E 		mov	lr, #57344
 764 002e C6F804E0 		str	lr, [r6, #4]
 312:Src/spi.c     ****         (DMA_FLAG_TC4 | DMA_FLAG_HT4 | DMA_FLAG_TE4));
 313:Src/spi.c     **** 
 314:Src/spi.c     ****     // Clear RX DMA flags - using correct G4 flags  
 315:Src/spi.c     ****     __HAL_DMA_CLEAR_FLAG(spiHandle->hdmarx,
 765              		.loc 1 315 5 view .LVU278
 766 0032 1B4E     		ldr	r6, .L57+8
 767 0034 B542     		cmp	r5, r6
 768 0036 29D9     		bls	.L50
 769              		.loc 1 315 5 is_stmt 0 discriminator 1 view .LVU279
 770 0038 4FF4604E 		mov	lr, #57344
 771 003c C6F898E3 		str	lr, [r6, #920]
 772              	.L51:
 316:Src/spi.c     ****         (DMA_FLAG_TC4 | DMA_FLAG_HT4 | DMA_FLAG_TE4));
 317:Src/spi.c     **** 
 318:Src/spi.c     **** 
 319:Src/spi.c     ****     // Enable DMA requests for SPI
 320:Src/spi.c     ****     SET_BIT(spiHandle->Instance->CR2, SPI_CR2_RXDMAEN);
 773              		.loc 1 320 5 is_stmt 1 view .LVU280
 774 0040 0068     		ldr	r0, [r0]
 775              	.LVL26:
 776              	.LBB18:
ARM GAS  /tmp/ccNhFRu0.s 			page 24


 777              	.LBB19:
 284:Src/spi.c     ****     {
 778              		.loc 1 284 7 is_stmt 0 view .LVU281
 779 0042 DCF808C0 		ldr	ip, [ip, #8]
 780              	.LBE19:
 781              	.LBE18:
 782              		.loc 1 320 5 view .LVU282
 783 0046 4668     		ldr	r6, [r0, #4]
 784 0048 46F00106 		orr	r6, r6, #1
 785 004c 4660     		str	r6, [r0, #4]
 321:Src/spi.c     ****     SET_BIT(spiHandle->Instance->CR2, SPI_CR2_TXDMAEN);
 786              		.loc 1 321 5 is_stmt 1 view .LVU283
 787 004e 4668     		ldr	r6, [r0, #4]
 788 0050 46F00206 		orr	r6, r6, #2
 789 0054 4660     		str	r6, [r0, #4]
 322:Src/spi.c     **** 
 323:Src/spi.c     ****     // Configure DMA channels
 324:Src/spi.c     ****     DMA_SetConfig(spiHandle->hdmatx, (uint32_t)tx_buf, (uint32_t)&spiHandle->Instance->DR, len);
 790              		.loc 1 324 5 view .LVU284
 791              	.LBB22:
 792              	.LBB20:
 284:Src/spi.c     ****     {
 793              		.loc 1 284 7 is_stmt 0 view .LVU285
 794 0056 BCF1100F 		cmp	ip, #16
 795              	.LBE20:
 796              	.LBE22:
 797              		.loc 1 324 66 view .LVU286
 798 005a 00F10C00 		add	r0, r0, #12
 799              	.LVL27:
 800              	.LBB23:
 801              	.LBI18:
 276:Src/spi.c     **** {
 802              		.loc 1 276 13 is_stmt 1 view .LVU287
 803              	.LBB21:
 281:Src/spi.c     **** 
 804              		.loc 1 281 5 view .LVU288
 281:Src/spi.c     **** 
 805              		.loc 1 281 27 is_stmt 0 view .LVU289
 806 005e 6360     		str	r3, [r4, #4]
 284:Src/spi.c     ****     {
 807              		.loc 1 284 5 is_stmt 1 view .LVU290
 287:Src/spi.c     **** 
 808              		.loc 1 287 9 view .LVU291
 287:Src/spi.c     **** 
 809              		.loc 1 287 30 is_stmt 0 view .LVU292
 810 0060 0BBF     		itete	eq
 811 0062 A060     		streq	r0, [r4, #8]
 290:Src/spi.c     ****     }
 812              		.loc 1 290 9 is_stmt 1 view .LVU293
 296:Src/spi.c     **** 
 813              		.loc 1 296 30 is_stmt 0 view .LVU294
 814 0064 A160     		strne	r1, [r4, #8]
 290:Src/spi.c     ****     }
 815              		.loc 1 290 30 view .LVU295
 816 0066 E160     		streq	r1, [r4, #12]
 296:Src/spi.c     **** 
 817              		.loc 1 296 9 is_stmt 1 view .LVU296
ARM GAS  /tmp/ccNhFRu0.s 			page 25


 299:Src/spi.c     ****     }
 818              		.loc 1 299 9 view .LVU297
 299:Src/spi.c     ****     }
 819              		.loc 1 299 30 is_stmt 0 view .LVU298
 820 0068 E060     		strne	r0, [r4, #12]
 821              	.LVL28:
 299:Src/spi.c     ****     }
 822              		.loc 1 299 30 view .LVU299
 823              	.LBE21:
 824              	.LBE23:
 325:Src/spi.c     ****     DMA_SetConfig(spiHandle->hdmarx, (uint32_t)&spiHandle->Instance->DR, (uint32_t)rx_buf, len);
 825              		.loc 1 325 5 is_stmt 1 view .LVU300
 826              	.LBB24:
 827              	.LBI24:
 276:Src/spi.c     **** {
 828              		.loc 1 276 13 view .LVU301
 829              	.LBB25:
 281:Src/spi.c     **** 
 830              		.loc 1 281 5 view .LVU302
 281:Src/spi.c     **** 
 831              		.loc 1 281 27 is_stmt 0 view .LVU303
 832 006a 6B60     		str	r3, [r5, #4]
 284:Src/spi.c     ****     {
 833              		.loc 1 284 5 is_stmt 1 view .LVU304
 284:Src/spi.c     ****     {
 834              		.loc 1 284 7 is_stmt 0 view .LVU305
 835 006c BB68     		ldr	r3, [r7, #8]
 836              	.LVL29:
 284:Src/spi.c     ****     {
 837              		.loc 1 284 7 view .LVU306
 838 006e 102B     		cmp	r3, #16
 287:Src/spi.c     **** 
 839              		.loc 1 287 9 is_stmt 1 view .LVU307
 287:Src/spi.c     **** 
 840              		.loc 1 287 30 is_stmt 0 view .LVU308
 841 0070 0BBF     		itete	eq
 842 0072 AA60     		streq	r2, [r5, #8]
 290:Src/spi.c     ****     }
 843              		.loc 1 290 9 is_stmt 1 view .LVU309
 296:Src/spi.c     **** 
 844              		.loc 1 296 30 is_stmt 0 view .LVU310
 845 0074 A860     		strne	r0, [r5, #8]
 290:Src/spi.c     ****     }
 846              		.loc 1 290 30 view .LVU311
 847 0076 E860     		streq	r0, [r5, #12]
 296:Src/spi.c     **** 
 848              		.loc 1 296 9 is_stmt 1 view .LVU312
 299:Src/spi.c     ****     }
 849              		.loc 1 299 9 view .LVU313
 299:Src/spi.c     ****     }
 850              		.loc 1 299 30 is_stmt 0 view .LVU314
 851 0078 EA60     		strne	r2, [r5, #12]
 852              	.LVL30:
 299:Src/spi.c     ****     }
 853              		.loc 1 299 30 view .LVU315
 854              	.LBE25:
 855              	.LBE24:
ARM GAS  /tmp/ccNhFRu0.s 			page 26


 326:Src/spi.c     **** 
 327:Src/spi.c     ****     // Enable DMA
 328:Src/spi.c     ****     __HAL_DMA_ENABLE(spiHandle->hdmarx);
 856              		.loc 1 328 5 is_stmt 1 view .LVU316
 857 007a 2B68     		ldr	r3, [r5]
 858 007c 43F00103 		orr	r3, r3, #1
 859 0080 2B60     		str	r3, [r5]
 329:Src/spi.c     ****     __HAL_DMA_ENABLE(spiHandle->hdmatx);
 860              		.loc 1 329 5 view .LVU317
 861 0082 2368     		ldr	r3, [r4]
 862 0084 43F00103 		orr	r3, r3, #1
 863 0088 2360     		str	r3, [r4]
 330:Src/spi.c     **** }
 864              		.loc 1 330 1 is_stmt 0 view .LVU318
 865 008a F0BD     		pop	{r4, r5, r6, r7, pc}
 866              	.LVL31:
 867              	.L50:
 315:Src/spi.c     ****         (DMA_FLAG_TC4 | DMA_FLAG_HT4 | DMA_FLAG_TE4));
 868              		.loc 1 315 5 discriminator 2 view .LVU319
 869 008c 034E     		ldr	r6, .L57+4
 870 008e 4FF4604E 		mov	lr, #57344
 871 0092 C6F804E0 		str	lr, [r6, #4]
 872 0096 D3E7     		b	.L51
 873              	.L58:
 874              		.align	2
 875              	.L57:
 876 0098 00040240 		.word	1073873920
 877 009c 00000240 		.word	1073872896
 878 00a0 6C000240 		.word	1073873004
 879              		.cfi_endproc
 880              	.LFE1871:
 882              		.section	.text.HAL_SPI_MspDeInit,"ax",%progbits
 883              		.align	1
 884              		.p2align 2,,3
 885              		.global	HAL_SPI_MspDeInit
 886              		.syntax unified
 887              		.thumb
 888              		.thumb_func
 889              		.fpu fpv4-sp-d16
 891              	HAL_SPI_MspDeInit:
 892              	.LVL32:
 893              	.LFB1872:
 331:Src/spi.c     **** 
 332:Src/spi.c     **** 
 333:Src/spi.c     **** void HAL_SPI_MspDeInit(SPI_HandleTypeDef* spiHandle)
 334:Src/spi.c     **** {
 894              		.loc 1 334 1 is_stmt 1 view -0
 895              		.cfi_startproc
 896              		@ args = 0, pretend = 0, frame = 0
 897              		@ frame_needed = 0, uses_anonymous_args = 0
 335:Src/spi.c     **** 
 336:Src/spi.c     ****   if(spiHandle->Instance==SPI3)
 898              		.loc 1 336 3 view .LVU321
 899              		.loc 1 336 5 is_stmt 0 view .LVU322
 900 0000 1A4A     		ldr	r2, .L65
 901              		.loc 1 336 15 view .LVU323
 902 0002 0368     		ldr	r3, [r0]
ARM GAS  /tmp/ccNhFRu0.s 			page 27


 903              		.loc 1 336 5 view .LVU324
 904 0004 9342     		cmp	r3, r2
 334:Src/spi.c     **** 
 905              		.loc 1 334 1 view .LVU325
 906 0006 10B5     		push	{r4, lr}
 907              	.LCFI11:
 908              		.cfi_def_cfa_offset 8
 909              		.cfi_offset 4, -8
 910              		.cfi_offset 14, -4
 334:Src/spi.c     **** 
 911              		.loc 1 334 1 view .LVU326
 912 0008 0446     		mov	r4, r0
 913              		.loc 1 336 5 view .LVU327
 914 000a 03D0     		beq	.L63
 337:Src/spi.c     ****   {
 338:Src/spi.c     ****   /* USER CODE BEGIN SPI3_MspDeInit 0 */
 339:Src/spi.c     **** 
 340:Src/spi.c     ****   /* USER CODE END SPI3_MspDeInit 0 */
 341:Src/spi.c     ****     /* Peripheral clock disable */
 342:Src/spi.c     ****     __HAL_RCC_SPI3_CLK_DISABLE();
 343:Src/spi.c     ****   
 344:Src/spi.c     ****     /**SPI3 GPIO Configuration    
 345:Src/spi.c     ****     PC10     ------> SPI3_SCK
 346:Src/spi.c     ****     PC11     ------> SPI3_MISO
 347:Src/spi.c     ****     PC12     ------> SPI3_MOSI 
 348:Src/spi.c     ****     */
 349:Src/spi.c     ****     HAL_GPIO_DeInit(GPIOC, GPIO_PIN_10|GPIO_PIN_11|GPIO_PIN_12);
 350:Src/spi.c     **** 
 351:Src/spi.c     ****     /* SPI3 DMA DeInit */
 352:Src/spi.c     ****     HAL_DMA_DeInit(spiHandle->hdmatx);
 353:Src/spi.c     ****     HAL_DMA_DeInit(spiHandle->hdmarx);
 354:Src/spi.c     **** 
 355:Src/spi.c     ****     /* SPI3 interrupt Deinit */
 356:Src/spi.c     ****     HAL_NVIC_DisableIRQ(SPI3_IRQn);
 357:Src/spi.c     ****   /* USER CODE BEGIN SPI3_MspDeInit 1 */
 358:Src/spi.c     **** 
 359:Src/spi.c     ****   /* USER CODE END SPI3_MspDeInit 1 */
 360:Src/spi.c     ****   }
 361:Src/spi.c     ****   else if(spiHandle->Instance==SPI1)
 915              		.loc 1 361 8 is_stmt 1 view .LVU328
 916              		.loc 1 361 10 is_stmt 0 view .LVU329
 917 000c 184A     		ldr	r2, .L65+4
 918 000e 9342     		cmp	r3, r2
 919 0010 16D0     		beq	.L64
 362:Src/spi.c     ****   {
 363:Src/spi.c     ****   /* USER CODE BEGIN SPI1_MspDeInit 0 */
 364:Src/spi.c     **** 
 365:Src/spi.c     ****   /* USER CODE END SPI1_MspDeInit 0 */
 366:Src/spi.c     ****     /* Peripheral clock disable */
 367:Src/spi.c     ****     __HAL_RCC_SPI1_CLK_DISABLE();
 368:Src/spi.c     **** 
 369:Src/spi.c     ****     /**SPI1 GPIO Configuration
 370:Src/spi.c     ****     PA5     ------> SPI1_SCK
 371:Src/spi.c     ****     PA6     ------> SPI1_MISO
 372:Src/spi.c     ****     PA7     ------> SPI1_MOSI
 373:Src/spi.c     ****     */
 374:Src/spi.c     ****     HAL_GPIO_DeInit(GPIOB, GPIO_PIN_3|GPIO_PIN_4|GPIO_PIN_5);
ARM GAS  /tmp/ccNhFRu0.s 			page 28


 375:Src/spi.c     **** 
 376:Src/spi.c     ****     /* SPI1 DMA DeInit */
 377:Src/spi.c     ****     HAL_DMA_DeInit(spiHandle->hdmarx);
 378:Src/spi.c     ****     HAL_DMA_DeInit(spiHandle->hdmatx);
 379:Src/spi.c     ****     HAL_NVIC_DisableIRQ(SPI1_IRQn);
 380:Src/spi.c     ****   /* USER CODE BEGIN SPI1_MspDeInit 1 */
 381:Src/spi.c     **** 
 382:Src/spi.c     ****   /* USER CODE END SPI1_MspDeInit 1 */
 383:Src/spi.c     ****   }
 384:Src/spi.c     **** } 
 920              		.loc 1 384 1 view .LVU330
 921 0012 10BD     		pop	{r4, pc}
 922              	.L63:
 342:Src/spi.c     ****   
 923              		.loc 1 342 5 is_stmt 1 view .LVU331
 924 0014 02F5EA32 		add	r2, r2, #119808
 349:Src/spi.c     **** 
 925              		.loc 1 349 5 is_stmt 0 view .LVU332
 926 0018 4FF4E051 		mov	r1, #7168
 342:Src/spi.c     ****   
 927              		.loc 1 342 5 view .LVU333
 928 001c 936D     		ldr	r3, [r2, #88]
 349:Src/spi.c     **** 
 929              		.loc 1 349 5 view .LVU334
 930 001e 1548     		ldr	r0, .L65+8
 931              	.LVL33:
 342:Src/spi.c     ****   
 932              		.loc 1 342 5 view .LVU335
 933 0020 23F40043 		bic	r3, r3, #32768
 934 0024 9365     		str	r3, [r2, #88]
 349:Src/spi.c     **** 
 935              		.loc 1 349 5 is_stmt 1 view .LVU336
 936 0026 FFF7FEFF 		bl	HAL_GPIO_DeInit
 937              	.LVL34:
 352:Src/spi.c     ****     HAL_DMA_DeInit(spiHandle->hdmarx);
 938              		.loc 1 352 5 view .LVU337
 939 002a 606D     		ldr	r0, [r4, #84]
 940 002c FFF7FEFF 		bl	HAL_DMA_DeInit
 941              	.LVL35:
 353:Src/spi.c     **** 
 942              		.loc 1 353 5 view .LVU338
 943 0030 A06D     		ldr	r0, [r4, #88]
 944 0032 FFF7FEFF 		bl	HAL_DMA_DeInit
 945              	.LVL36:
 356:Src/spi.c     ****   /* USER CODE BEGIN SPI3_MspDeInit 1 */
 946              		.loc 1 356 5 view .LVU339
 947              		.loc 1 384 1 is_stmt 0 view .LVU340
 948 0036 BDE81040 		pop	{r4, lr}
 949              	.LCFI12:
 950              		.cfi_remember_state
 951              		.cfi_restore 14
 952              		.cfi_restore 4
 953              		.cfi_def_cfa_offset 0
 954              	.LVL37:
 356:Src/spi.c     ****   /* USER CODE BEGIN SPI3_MspDeInit 1 */
 955              		.loc 1 356 5 view .LVU341
 956 003a 3320     		movs	r0, #51
ARM GAS  /tmp/ccNhFRu0.s 			page 29


 957 003c FFF7FEBF 		b	HAL_NVIC_DisableIRQ
 958              	.LVL38:
 959              	.L64:
 960              	.LCFI13:
 961              		.cfi_restore_state
 367:Src/spi.c     **** 
 962              		.loc 1 367 5 is_stmt 1 view .LVU342
 963 0040 02F56042 		add	r2, r2, #57344
 374:Src/spi.c     **** 
 964              		.loc 1 374 5 is_stmt 0 view .LVU343
 965 0044 3821     		movs	r1, #56
 367:Src/spi.c     **** 
 966              		.loc 1 367 5 view .LVU344
 967 0046 136E     		ldr	r3, [r2, #96]
 374:Src/spi.c     **** 
 968              		.loc 1 374 5 view .LVU345
 969 0048 0B48     		ldr	r0, .L65+12
 970              	.LVL39:
 367:Src/spi.c     **** 
 971              		.loc 1 367 5 view .LVU346
 972 004a 23F48053 		bic	r3, r3, #4096
 973 004e 1366     		str	r3, [r2, #96]
 374:Src/spi.c     **** 
 974              		.loc 1 374 5 is_stmt 1 view .LVU347
 975 0050 FFF7FEFF 		bl	HAL_GPIO_DeInit
 976              	.LVL40:
 377:Src/spi.c     ****     HAL_DMA_DeInit(spiHandle->hdmatx);
 977              		.loc 1 377 5 view .LVU348
 978 0054 A06D     		ldr	r0, [r4, #88]
 979 0056 FFF7FEFF 		bl	HAL_DMA_DeInit
 980              	.LVL41:
 378:Src/spi.c     ****     HAL_NVIC_DisableIRQ(SPI1_IRQn);
 981              		.loc 1 378 5 view .LVU349
 982 005a 606D     		ldr	r0, [r4, #84]
 983 005c FFF7FEFF 		bl	HAL_DMA_DeInit
 984              	.LVL42:
 379:Src/spi.c     ****   /* USER CODE BEGIN SPI1_MspDeInit 1 */
 985              		.loc 1 379 5 view .LVU350
 986              		.loc 1 384 1 is_stmt 0 view .LVU351
 987 0060 BDE81040 		pop	{r4, lr}
 988              	.LCFI14:
 989              		.cfi_restore 14
 990              		.cfi_restore 4
 991              		.cfi_def_cfa_offset 0
 992              	.LVL43:
 379:Src/spi.c     ****   /* USER CODE BEGIN SPI1_MspDeInit 1 */
 993              		.loc 1 379 5 view .LVU352
 994 0064 2320     		movs	r0, #35
 995 0066 FFF7FEBF 		b	HAL_NVIC_DisableIRQ
 996              	.LVL44:
 997              	.L66:
 998 006a 00BF     		.align	2
 999              	.L65:
 1000 006c 003C0040 		.word	1073757184
 1001 0070 00300140 		.word	1073819648
 1002 0074 00080048 		.word	1207961600
 1003 0078 00040048 		.word	1207960576
ARM GAS  /tmp/ccNhFRu0.s 			page 30


 1004              		.cfi_endproc
 1005              	.LFE1872:
 1007              		.global	hdma_spi1_tx
 1008              		.global	hdma_spi1_rx
 1009              		.global	hspi1
 1010              		.global	hdma_spi3_rx
 1011              		.global	hdma_spi3_tx
 1012              		.global	hspi3
 1013              		.section	.bss.hdma_spi1_rx,"aw",%nobits
 1014              		.align	2
 1015              		.set	.LANCHOR2,. + 0
 1018              	hdma_spi1_rx:
 1019 0000 00000000 		.space	96
 1019      00000000 
 1019      00000000 
 1019      00000000 
 1019      00000000 
 1020              		.section	.bss.hdma_spi1_tx,"aw",%nobits
 1021              		.align	2
 1022              		.set	.LANCHOR3,. + 0
 1025              	hdma_spi1_tx:
 1026 0000 00000000 		.space	96
 1026      00000000 
 1026      00000000 
 1026      00000000 
 1026      00000000 
 1027              		.section	.bss.hdma_spi3_rx,"aw",%nobits
 1028              		.align	2
 1029              		.set	.LANCHOR4,. + 0
 1032              	hdma_spi3_rx:
 1033 0000 00000000 		.space	96
 1033      00000000 
 1033      00000000 
 1033      00000000 
 1033      00000000 
 1034              		.section	.bss.hdma_spi3_tx,"aw",%nobits
 1035              		.align	2
 1036              		.set	.LANCHOR5,. + 0
 1039              	hdma_spi3_tx:
 1040 0000 00000000 		.space	96
 1040      00000000 
 1040      00000000 
 1040      00000000 
 1040      00000000 
 1041              		.section	.bss.hspi1,"aw",%nobits
 1042              		.align	2
 1043              		.set	.LANCHOR0,. + 0
 1046              	hspi1:
 1047 0000 00000000 		.space	100
 1047      00000000 
 1047      00000000 
 1047      00000000 
 1047      00000000 
 1048              		.section	.bss.hspi3,"aw",%nobits
 1049              		.align	2
 1050              		.set	.LANCHOR1,. + 0
 1053              	hspi3:
ARM GAS  /tmp/ccNhFRu0.s 			page 31


 1054 0000 00000000 		.space	100
 1054      00000000 
 1054      00000000 
 1054      00000000 
 1054      00000000 
 1055              		.text
 1056              	.Letext0:
 1057              		.file 2 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/machine/_default_type
 1058              		.file 3 "/usr/share/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/sys/_stdint.h"
 1059              		.file 4 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g431xx.h"
 1060              		.file 5 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_def.h"
 1061              		.file 6 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_gpio.h"
 1062              		.file 7 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dma.h"
 1063              		.file 8 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_spi.h"
 1064              		.file 9 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_ll_tim.h"
 1065              		.file 10 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_ll_usart.h"
 1066              		.file 11 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_ll_dma.h"
 1067              		.file 12 "Inc/spi.h"
 1068              		.file 13 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_cortex.h"
 1069              		.file 14 "Inc/main.h"
ARM GAS  /tmp/ccNhFRu0.s 			page 32


DEFINED SYMBOLS
                            *ABS*:0000000000000000 spi.c
     /tmp/ccNhFRu0.s:18     .text.MX_SPI1_Init:0000000000000000 $t
     /tmp/ccNhFRu0.s:27     .text.MX_SPI1_Init:0000000000000000 MX_SPI1_Init
     /tmp/ccNhFRu0.s:97     .text.MX_SPI1_Init:0000000000000044 $d
     /tmp/ccNhFRu0.s:103    .text.MX_SPI3_Init:0000000000000000 $t
     /tmp/ccNhFRu0.s:111    .text.MX_SPI3_Init:0000000000000000 MX_SPI3_Init
     /tmp/ccNhFRu0.s:180    .text.MX_SPI3_Init:0000000000000044 $d
     /tmp/ccNhFRu0.s:186    .text.HAL_SPI_MspInit:0000000000000000 $t
     /tmp/ccNhFRu0.s:194    .text.HAL_SPI_MspInit:0000000000000000 HAL_SPI_MspInit
     /tmp/ccNhFRu0.s:697    .text.HAL_SPI_MspInit:000000000000022c $d
     /tmp/ccNhFRu0.s:714    .text.transmit_spi:0000000000000000 $t
     /tmp/ccNhFRu0.s:722    .text.transmit_spi:0000000000000000 transmit_spi
     /tmp/ccNhFRu0.s:876    .text.transmit_spi:0000000000000098 $d
     /tmp/ccNhFRu0.s:883    .text.HAL_SPI_MspDeInit:0000000000000000 $t
     /tmp/ccNhFRu0.s:891    .text.HAL_SPI_MspDeInit:0000000000000000 HAL_SPI_MspDeInit
     /tmp/ccNhFRu0.s:1000   .text.HAL_SPI_MspDeInit:000000000000006c $d
     /tmp/ccNhFRu0.s:1025   .bss.hdma_spi1_tx:0000000000000000 hdma_spi1_tx
     /tmp/ccNhFRu0.s:1018   .bss.hdma_spi1_rx:0000000000000000 hdma_spi1_rx
     /tmp/ccNhFRu0.s:1046   .bss.hspi1:0000000000000000 hspi1
     /tmp/ccNhFRu0.s:1032   .bss.hdma_spi3_rx:0000000000000000 hdma_spi3_rx
     /tmp/ccNhFRu0.s:1039   .bss.hdma_spi3_tx:0000000000000000 hdma_spi3_tx
     /tmp/ccNhFRu0.s:1053   .bss.hspi3:0000000000000000 hspi3
     /tmp/ccNhFRu0.s:1014   .bss.hdma_spi1_rx:0000000000000000 $d
     /tmp/ccNhFRu0.s:1021   .bss.hdma_spi1_tx:0000000000000000 $d
     /tmp/ccNhFRu0.s:1028   .bss.hdma_spi3_rx:0000000000000000 $d
     /tmp/ccNhFRu0.s:1035   .bss.hdma_spi3_tx:0000000000000000 $d
     /tmp/ccNhFRu0.s:1042   .bss.hspi1:0000000000000000 $d
     /tmp/ccNhFRu0.s:1049   .bss.hspi3:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_SPI_Init
Error_Handler
HAL_GPIO_Init
HAL_DMA_Init
HAL_NVIC_SetPriority
HAL_NVIC_EnableIRQ
HAL_GPIO_DeInit
HAL_DMA_DeInit
HAL_NVIC_DisableIRQ
